!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Slardar=e():t.Slardar=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e){function n(t){return"object"==typeof t&&null!==t}function o(t){return"function"==typeof t}function r(t){return"[object String]"===Object.prototype.toString.call(t)}function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function a(t){return"[object Date]"===Object.prototype.toString.call(t)}function s(t){return void 0===t}function c(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function u(t,e){var n,o;if(s(t.length))for(n in t)c(t,n)&&e.call(null,n,t[n]);else if(o=t.length)for(n=0;n<o;n++)e.call(null,n,t[n])}function p(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function f(t){for(var e,n=[],o=0,i=t.length;o<i;o++)e=t[o],r(e)?n.push(e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):e&&e.source&&n.push(e.source);return new RegExp(n.join("|"),"i")}function l(t){var e=document.createElement("a");e.href=t;var n=e.pathname||"/";return"/"!==n[0]&&(n="/"+n),{protocol:e.protocol.slice(0,-1),hostname:e.hostname,pathname:n}}function d(t){var e=[];return u(t,function(t,n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.join("&")}function m(){return+new Date}function h(t){var e=t.offsetTop;return null!==t.offsetParent&&(e+=h(t.offsetParent)),e}function g(){return window.innerHeight?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:void 0}t.exports={isObject:n,isFunction:o,isString:r,isArray:i,isDate:a,each:u,isEmptyObject:p,joinRegExp:f,urlParser:l,urlencode:d,now:m,getOffsetTop:h,getWinHeight:g}},function(t,e,n){t.exports=n(2)},function(t,e,n){var o=n(3),r=new o;t.exports=r},function(t,e,n){function o(){this._baseParams={},this._globalOptions={sampleRate:1,ignoreStatic:[],ignoreAjax:[]},this.recordCtx={__firstScreenLoadEndTime:0}}var r=n(4),i=n(5),a=n(7),s=n(8),c=n(0),u=c.isObject,p=c.isArray,f=c.each,l=c.isEmptyObject,d=c.urlencode,m=c.joinRegExp,h=c.now;o.prototype={VERSION:"1.0.0",install:function(t){var e=this,n=e._baseParams,o=e._globalOptions;e._baseEnvCheck()&&u(t)&&!l(t)&&t.bid&&t.pid&&(n.version=this.VERSION,n.bid=t.bid,n.pid=t.pid,n.hostname=window.location.hostname,n.protocol=window.location.protocol.slice(0,-1),o.sampleRate=t.sampleRate||1,o.ignoreStatic=!(!p(t.ignoreStatic)||!t.ignoreStatic.length)&&m(t.ignoreStatic),o.ignoreAjax=!(!p(t.ignoreAjax)||!t.ignoreAjax.length)&&m(t.ignoreAjax),i.start(this.recordCtx),a.start(function(){e._send.apply(e,arguments)},this.recordCtx),r.start(function(){e._send.apply(e,arguments)},o.ignoreStatic),s.start(function(){e._send.apply(e,arguments)},o.ignoreAjax))},sendCustomTimeLog:function(t,e,n){if(t){var o={ev_type:"custom",cm_name:t,cm_type:"time"};e&&(o.cm_tag=e),+n&&(o.cm_value=+n,this._send(o,!0))}},sendCustomCountLog:function(t,e){if(t){var n={ev_type:"custom",cm_name:t,cm_type:"count"};e&&(n.cm_tag=e),this._send(n)}},_send:function(t,e){var n=this._globalOptions,o=this._paramsPack(t);o&&("number"==typeof n.sampleRate?Math.random()<n.sampleRate&&this._makeRequest(o,e):this._makeRequest(o,e))},_makeRequest:function(t,e){var n=new Image,o=e?"https://m.toutiao.com/log/sentry/v2/api/slardar/custom/?":"https://m.toutiao.com/log/sentry/v2/api/slardar/main/?";n.src=o+t},_paramsPack:function(t){return!u(t)||l(t)?null:(f(this._baseParams,function(e,n){t[e]=n}),t.timestamp=h(),d(t))},_baseEnvCheck:function(){return!!window.addEventListener}},t.exports=o},function(t,e,n){var o=n(0),r=o.urlParser,i={start:function(t,e){function n(t,e){var n={ev_type:"static",st_type:e},o=r(t);return n.st_protocol=o.protocol,n.st_domain=o.hostname,n.st_domain?("script"!==e&&"link"!==e||(n.st_path=o.pathname),"img"!==e||o.pathname&&"/"!==o.pathname?n:null):null}function o(o){var r=o||window.event||{},i={};try{i=r.target||r.srcElement||{}}catch(r){return}var a=i.src||i.href||"",s=i.tagName&&i.tagName.toLowerCase()||"";a&&s&&a!==window.location.href&&(e&&e.test(a)||t&&t(n(a,s)))}window.addEventListener("error",o,!0)}};t.exports=i},function(t,e,n){var o=n(0),r=n(6),i=o.getOffsetTop,a=o.getWinHeight,s=o.now,c=r.raf,u=r.caf,p={start:function(t){var e=a(),n=[],o=!1,r=!1,p=c(function a(){var f,l;if(o){if(n.length&&!r)for(f=0;f<n.length;f++){if(l=n[f],!l.complete){r=!1;break}r=!0}else r=!0;if(r)return t.__firstScreenLoadEndTime=s(),void u(p)}else{var d=document.querySelectorAll("img");for(f=0;f<d.length;f++){l=d[f];var m=i(l);if(m>e){o=!0;break}m<=e&&!l.hasPushed&&(l.hasPushed=1,n.push(l))}}p=c(a)});document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("img").length||(o=!0)}),window.addEventListener("load",function(){r=!0,o=!0},!1)}};t.exports=p},function(t,e){for(var n=0,o=["ms","moz","webkit","o"],r=window.requestAnimationFrame,i=window.cancelAnimationFrame,a=0;a<o.length&&!r;++a)r=window[o[a]+"RequestAnimationFrame"],i=window[o[a]+"CancelAnimationFrame"]||window[o[a]+"CancelRequestAnimationFrame"];r||(r=function(t,e){var o=(new Date).getTime(),r=Math.max(0,16-(o-n)),i=window.setTimeout(function(){t(o+r)},r);return n=o+r,i}),i||(i=function(t){clearTimeout(t)}),t.exports={raf:r,caf:i}},function(t,e,n){var o=n(0),r=o.isObject,i=window.performance,a={start:function(t,e){function n(){var t={ev_type:"perf"},n=i.timing;return t.dns=n.domainLookupEnd-n.domainLookupStart,t.tcp=n.connectEnd-n.connectStart,t.request=n.responseStart-n.requestStart,t.response=n.responseEnd-n.responseStart,t.processing=n.domComplete-n.domLoading,t.blank=n.responseEnd-n.navigationStart,t.domready=n.domInteractive-n.navigationStart,t.load=n.loadEventEnd-n.navigationStart,t.firstscreen=e.__firstScreenLoadEndTime?e.__firstScreenLoadEndTime-n.navigationStart:t.domready,t}function o(){t&&t(n())}r(i)&&window.addEventListener("load",function(){setTimeout(o,1500)},!1)}};t.exports=a},function(t,e,n){var o=n(0),r=o.urlParser,i=o.now,a=/m\.toutiao\.com\/log\/sentry\/v2\/api\/(\d+)\/store\/$/,s=window.XMLHttpRequest,c={start:function(t,e){function n(n,o){if(!(e&&e.test(o)||a.test(o)||0===n.ax_status)){var i=r(o);n.ax_protocol=i.protocol,n.ax_domain=i.hostname,n.ax_path=i.pathname,n.ax_domain&&t&&t(n)}}function o(t){var e="[object String]"===Object.prototype.toString.call(t);return t?e?t.length:window.ArrayBuffer&&t instanceof ArrayBuffer?t.byteLength:window.Blob&&t instanceof Blob?t.size:t.length?t.length:0:0}function c(t,e,n,o,r){return this._url=e&&e.split("?")[0]||"",this._method=t&&t.toLowerCase()||"",f.apply(this,arguments)}function u(t){if(4===this.readyState){var e={ev_type:"ajax",ax_status:this.status,ax_type:this._method};if(200===this.status)if(e.ax_duration=i()-this._start,""===this.responseType||"text"===this.responseType)e.ax_size=o(this.responseText);else if(this.response)e.ax_size=o(this.response);else try{e.ax_size=o(this.responseText)}catch(t){}n(e,this._url)}if(this._onreadystatechange)return this._onreadystatechange.apply(this,arguments)}function p(t){return this.onreadystatechange&&(this._onreadystatechange=this.onreadystatechange),this.onreadystatechange=u,this._start=i(),l.apply(this,arguments)}if("function"==typeof s){var f=s.prototype.open,l=s.prototype.send;s.prototype.open=c,s.prototype.send=p}}};t.exports=c}])});