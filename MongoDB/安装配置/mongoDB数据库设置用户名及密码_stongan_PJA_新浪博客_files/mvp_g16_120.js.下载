var mediav=window.mediav||{};var mvproduct=window.mvproduct||{};(function(){mvproduct.makeg16=function(mvas,clickUrl,data,width,height,config,mvtjs){var pubid=mvas?window["mvas_"+mvas]:"",num=data.length,css,html,groupInfo;if(mediav.ad&&mediav.ad.status[pubid]=="stop"){return}css=layout.buildCss("banner_"+mvas,width,height,config);layout.appendStyle(css,"mvCss_"+mvas);data=util.transferNCR(data);layout.changeData(data,config);config.curl=clickUrl||"javascript:void(0);";html=layout.buildHtml(mvas,width,height,data);if(config.entity=="dsp"){layout.write(mvas,html,mvtjs)}else{var productroot=util.G("mvdiv_"+pubid);if(productroot){productroot.innerHTML=html;productroot.style.display="block"}else{layout.write(mvas,html,mvtjs)}}new Slider("banner_"+mvas).start();util.monitorClick(mvas,clickUrl,width,height);if(window["mvcu_"+mvas]){var zurl=eval("mvcu_"+mvas);zurl=decodeURIComponent(zurl);zurl=decodeURIComponent(zurl);zurl=decodeURIComponent(zurl);var zcus=util.getQueryString(zurl,"cus");var zader=zcus.split("_");zader=zader[1]?zader[0]:0;if(zader=="28590"){var pstr="";for(var h=0;h<data.length;h++){if(data[h].pid){pstr+=((pstr==""?"":",")+data[h].pid)}}var tmp=document.createElement("script");tmp.src="http://hs.suning.com/hs/queryAvailableJsonp.html?gdsCds="+pstr+"&chan=1&level=3&sys=dsp_mv&callback=suningBack";document.getElementsByTagName("head")[0].appendChild(tmp)}}};window["suningBack"]=function(obj){var el=util.getByClass("mv_price_txt",document.body);var len=el.length;var price="";var prefix="";var pid="";var pidArr=[],priceArr=[];if(obj["list"]&&obj["list"].length>=1){for(var j=0;j<obj["list"].length;j++){priceArr.push(obj["list"][j].price);pidArr.push(obj["list"][j].gdsCd.substr(9))}for(var i=0;i<len;i++){pid=el[i].attributes[0].value;pid=pid.substr(pid.lastIndexOf("mv_pid_")+7);if(pidArr.indexOf(pid)>=0){price=String(el[i].innerHTML);prefix=price.substr(0,1);price=priceArr[pidArr.indexOf(pid)];el[i].innerHTML=prefix+price}}}};mvproduct.makeg16.version="1.2.0";function Slider(root){var root=this.root=util.G(root);this.btns=util.getByClass("mv_tab",root);this.scrollLi=util.getByClass("mv_slider",root);this.timeout=5000;this.duration=30000;this.pointer=0;this.scrollNum=0;this.addMouseEvent();this.invoke(0)}Slider.prototype={constructor:Slider,start:function(){var self=this;this.intervalId=setInterval(function(){self.next()},this.timeout)},stop:function(){clearInterval(this.intervalId)},invoke:function(n){this.reset();if(this.scrollLi[n]&&this.btns[n]){this.pointer=n||0;this.scrollLi[n].style.display="block";util.addClass(this.btns[n],"mv_active")}},next:function(){if(this.duration&&(this.timeout*this.scrollNum>=this.duration)){return}if(this.pointer>=Math.min(this.scrollLi.length,this.btns.length)-1){this.pointer=-1}this.invoke(this.pointer+1);this.scrollNum+=1},reset:function(){var i,s,b,len=Math.min(this.scrollLi.length,this.btns.length);for(i=0;i<len;i+=1){s=this.scrollLi[i];b=this.btns[i];s&&(s.style.display="none");b&&util.removeClass(b,"mv_active")}},addMouseEvent:function(){var i,len,b,item,bDelay,_this,iDelay,recommend,self=this,items=util.getByClass("mv_item",this.root),content=util.getByClass("mv_content",this.root)[0];this.priceMask=util.getByClass("mv_price_mask",this.root);this.infoMask=util.getByClass("mv_itemInfo_mask",this.root);for(i=0,len=this.btns.length;i<len;i+=1){b=this.btns[i];b.index=i;if(b){b.onmouseover=function(){self.stop();if(this.index!=self.pointer){bDelay=setTimeout(function(){self.invoke(_this.index)},200)}};b.onmouseout=function(){clearTimeout(bDelay);self.start()}}}for(i=0,len=items.length;i<len;i+=1){item=items[i];item.index=i;if(item){item.onmouseover=function(e){e=e||window.event;recommend=util.getByClass("mv_recommend",this)[0];if(self.checkHover(e,this)){this.infoMask=util.getByClass("mv_itemInfo_mask",this.root);self.clearInfoClass(this.infoMask[this.index]);var ex,ey;if(e.pageX||e.pageY){ex=e.pageX;ey=e.pageY}else{ex=e.clientX+document.body.scrollLeft-document.body.clientLeft;ey=e.clientY+document.body.scrollTop-document.body.clientTop}var mouse_pos={"x":ex,"y":ey};var el_event=e.currentTarget;var direction=util.get_direction(el_event,mouse_pos);var directionOfSide=direction||"left";self.animateIn(this.index,directionOfSide);recommend&&(recommend.style.display="none")}};item.onmouseout=function(e){e=e||window.event;recommend=util.getByClass("mv_recommend",this)[0];if(self.checkHover(e,this)){this.infoMask=util.getByClass("mv_itemInfo_mask",this.root);self.clearInfoClass(this.infoMask[this.index]);var ex,ey;if(e.pageX||e.pageY){ex=e.pageX;ey=e.pageY}else{ex=e.clientX+document.body.scrollLeft-document.body.clientLeft;ey=e.clientY+document.body.scrollTop-document.body.clientTop}var mouse_pos={"x":ex,"y":ey};var el_event=e.currentTarget;var direction=util.get_direction(el_event,mouse_pos);var directionOfSide=direction||"left";self.animateOut(this.index,directionOfSide);recommend&&(recommend.style.display="block")}}}}if(content){content.onmouseover=function(e){if(self.checkHover(e,this)){self.stop()
}};content.onmouseout=function(e){if(self.checkHover(e,this)){self.start()}}}},animateIn:function(index,directionOfSide){directionOfSide=directionOfSide||"left";var self=this;if(this.priceMask[index]&&this.infoMask[index]){var el_info=this.infoMask[index];el_info.style.display="block";self.clearInfoClass(el_info);util.addClass(el_info,"from-"+directionOfSide);setTimeout(function(){self.clearInfoClass(el_info)},230)}},animateOut:function(index,directionOfSide){directionOfSide=directionOfSide||"left";var self=this;if(this.priceMask[index]&&this.infoMask[index]){var el_info=this.infoMask[index];util.addClass(el_info,"to-"+directionOfSide);setTimeout(function(){el_info.style.display="none";self.clearInfoClass(el_info)},230)}},clearInfoClass:function(el){util.removeClass(el,"to-left");util.removeClass(el,"to-top");util.removeClass(el,"to-right");util.removeClass(el,"to-bottom");util.removeClass(el,"from-left");util.removeClass(el,"from-top");util.removeClass(el,"from-right");util.removeClass(el,"from-bottom")},checkHover:function(e,target){if(this.getEvent(e).type=="mouseover"){return !this.contains(target,this.getEvent(e).relatedTarget||this.getEvent(e).fromElement)&&!((this.getEvent(e).relatedTarget||this.getEvent(e).fromElement)===target)}else{return !this.contains(target,this.getEvent(e).relatedTarget||this.getEvent(e).toElement)&&!((this.getEvent(e).relatedTarget||this.getEvent(e).toElement)===target)}},getEvent:function(e){return e||window.event},contains:function(parentNode,childNode){if(parentNode.contains){return parentNode!=childNode&&parentNode.contains(childNode)}else{return !!(parentNode.compareDocumentPosition(childNode)&16)}}};var layout={changeData:function(data,config){var w=this.pimgSize?this.pimgSize.width:1,h=this.pimgSize?this.pimgSize.height:1,isRmb=!config.currencySymbol||config.currencySymbol=="\uffe5",i,pn,bn;for(i=0;i<data.length;i++){if(config.imgflag&&(config.imgflag==1)){data[i].timg=data[i].pimg||data[i].timg}data[i].timg=data[i].timg||"http://material.mediav.com/product/images/1x1.gif";data[i].curl=data[i].curl1||data[i].curl;data[i].cpurl=data[i].cpurl1||data[i].cpurl||"javascript:void(0)";if(data[i]["price"]){data[i]["price"]=util.fixPrice(data[i]["price"],isRmb)}if(data[i]["pn"]&&this.pnLength){pn=String(data[i]["pn"]);data[i]["opn"]=pn;data[i]["pn"]=util.getFixedText(pn,this.pnLength,"...")}if(data[i]["bn"]&&config.bnLen){bn=String(data[i]["bn"]);data[i]["obn"]=bn;data[i]["bn"]=util.getFixedText(bn,config.bnLen,"...")}if(data[i]["cn"]){data[i]["cn"]=util.trim(data[i]["cn"]);data[i]["cn"]=util.trimText(data[i]["cn"])}if(!(data[i]["width"]&&data[i]["height"])){data[i]["width"]=160;data[i]["height"]=160}this.pimgResize(data[i],w,h)}return data},pimgResize:function(data,width,height){var ow=parseInt(data.width),oh=parseInt(data.height),w,h;if(!(ow&&oh)){w=width;h=height}else{if(ow/oh>width/height){w=width;h=parseInt(oh/ow*w)}else{h=height;w=parseInt(ow/oh*h)}}data.width=w;data.height=h},logoResize:function(tmpData,width,height){var ow=parseInt(tmpData.logoWidth),oh=parseInt(tmpData.logoHeight),w,h;if(!(ow&&oh)||(ow>=width&&oh>=height)){w=width;h=height}else{if(ow/oh>width/height){h=oh;w=parseInt(width*h/height)}else{w=ow;h=parseInt(w*height/width)}}tmpData.logoWidth=w;tmpData.logoHeight=h},template:function(html,data,type){var html=String(html),replacer="";return html.replace(/#\{(.+?)\}/g,function(match,key){var keys=type?key:key.split("_");try{if(type){replacer=isNaN(data[keys])?data[keys]:data[keys]+"px"}else{replacer=data[keys[0]][keys[1]]}if("[object Function]"===Object.prototype.toString.call(replacer)){replacer=replacer(key)}}catch(e){}return("undefined"===typeof replacer?"":replacer)})},write:function(mvas,html,js){var newTag=document.getElementById("mvdiv_"+mvas+"_holder");if(!newTag){var newTag=document.createElement("div")}var s=document.getElementsByTagName("script"),len=s.length,writeFlag=false,c,i;newTag.id="mvdiv_"+mvas+"_holder";newTag.innerHTML=html;for(i=0;i<len;i++){if(s[i].src&&s[i].src==js){c=s[i];c.parentNode.insertBefore(newTag,c);writeFlag=true;break}}if(!writeFlag){document.body.appendChild(newTag)}},appendStyle:function(style,cssID){var cssNode=document.createElement("style"),cssTextNode;cssNode.type="text/css";cssNode.rel="stylesheet";cssNode.id=cssID;document.getElementsByTagName("head")[0].appendChild(cssNode);if(cssNode.styleSheet){cssNode.styleSheet.cssText=style}else{cssTextNode=document.createTextNode(style);cssNode.appendChild(cssTextNode)}},buildHtml:function(tid,width,height,data){var h=[],s="";this.data=data;if(!this.verifyWH(this.type,width,height)){return"尺寸不合法"}h.push('<div id="banner_'+tid+'">');h.push('<div class="mv_logo">');h.push('<a href="'+this.config.curl+'" target="_blank"><span></span><img src="'+this.config.logo+'"/></a>');h.push("</div>");h.push('<div class="mv_content">');h.push("<ul>");h.push(this.buildItem(data.length));h.push("</ul>");h.push("</div>");h.push("</div>");return this.template(h.join(""),data)},buildTab:function(num){var h=[],i,l=num;
for(i=0;i<l;i++){h.push('<li class="mv_tab"></li>')}return h.join("")},buildItem:function(len){var h=[],tmp,len=len||0;tmp=this.buildItemHtml(0,Math.min(this.displayNum,len));h.push('<li class="mv_slider">');h.push(tmp);h.push("</li>");return h.join("")},buildItemHtml:function(start,len){var h=[],currencySymbol=this.config.currencySymbol||"\uffe5",i,j,index,recommend,showVt=this.config.showvt||0;for(i=start,j=i+len;i<j;i++){h.push('<a class="mv_itemLink" href="#{'+i+'_curl}" title="#{'+i+'_opn}" target="_blank">');h.push('<div class="mv_item">');h.push('<div class="mv_imgArea">');h.push('<div class="mv_itemImg">');h.push('<span></span><img style="width:#{'+i+"_width}px;height:#{"+i+'_height}px;" src="#{'+i+'_timg}"/>');h.push("</div>");h.push('<div class="mv_price_mask"><div class="mv_price"></div><div class="mv_price_txt mv_pid_'+this.data[i].pid+'">'+currencySymbol+"#{"+i+"_price}</div></div>");h.push('<div class="mv_itemInfo_mask">');h.push('<div class="mv_itemInfo"></div>');h.push('<div class="mv_desc">#{'+i+"_pn}</div>");h.push('<div class="mv_label"></div>');h.push("</div>");if(this.data[i].vt&&showVt==1){index=parseInt(this.data[i].vt);recommend=this.viewType[index]||"";recommend&&h.push('<div class="mv_recommend">'+recommend+"</div>")}h.push("</div></div></a>")}return h.join("")},buildCss:function(tid,width,height,config){var css=[],cartUrl="http://material.mediav.com/product/images/cart.png",i,defaultStyle={bgColor:"#FFFFFF",bdColor:"#dfdfdf",bdWidthSize:"2",pricebgColor:"#83b842",priceColor:"#FFFFFF",logoBgColor:"#fff",vtBgColor:"#DD0000",vtColor:"#FFFFFF",fontFamily:"SimSun",itemBdColor:"#666666"},boldStyle={priceBold:"bold",descBold:"bold"},boldName={"0":"nomal","1":"bold"},tempData=this.createCssConfig(width,height,config.bdWidthSize||defaultStyle.bdWidthSize);this.config=config||{};this.pimgSize={width:tempData.imgW,height:tempData.imgH};this.displayNum=tempData.displayNum;if(!tempData){return""}for(i in defaultStyle){tempData[i]=config[i]||defaultStyle[i]}for(i in boldStyle){tempData[i]=boldName[config[i]]||boldStyle[i]}if(config.logoWidth&&config.logoHeight){this.logoResize(tempData,config.logoWidth,config.logoHeight)}else{tempData.logoWidth="auto";tempData.logoHeight="auto"}this.fixQuirks(tempData);css.push("#"+tid+"{position:relative;margin:0;padding:0;display:block;float:none;-webkit-text-size-adjust:none;border-spacing:0px;}\r\n");css.push("#"+tid+" *{background:none;margin:0;padding:0;font: 12px arial,#{fontFamily},sans-serif;}\r\n");css.push("#"+tid+" div{display:block;float:none;}\r\n");css.push("#"+tid+" a{text-decoration:none;cursor:pointer;display:block;}\r\n");css.push("#"+tid+" a{outline:none;blr:expression(this.onFocus=this.blur());}\r\n");css.push("#"+tid+" a:focus {outline:none;}\r\n");css.push("#"+tid+" img{border:none;display:inline;}\r\n");css.push("#"+tid+" ul{list-style:none;}\r\n");css.push("#"+tid+" div:after{display:none;}\r\n");css.push("#"+tid+" div:before{display:none;}\r\n");css.push("#"+tid+"{width:#{a1};height:#{a2};background-color:#{bgColor};border:#{a3} solid #{bdColor};}\r\n");css.push("#"+tid+" .mv_logo {width:#{b1};height:#{b2};overflow:hidden;float:left;background-color:#{logoBgColor};}\r\n");css.push("#"+tid+" .mv_logo a{width:#{c1};height:#{c2};display:table-cell;vertical-align:middle;text-align:center;*display:block;overflow:hidden;}\r\n");css.push("#"+tid+" .mv_logo span{vertical-align:middle;*display:inline-block;*height:100%;}\r\n");css.push("#"+tid+" .mv_logo img{vertical-align:middle;width:#{logoWidth};height:#{logoHeight};}\r\n");css.push("#"+tid+" .mv_content{width:#{d1};height:#{d2};margin:#{e3} #{e4};position:relative;overflow:hidden;float:left;}\r\n");css.push("#"+tid+" .mv_slider{width:#{e1};height:#{e2};}\r\n");css.push("#"+tid+" .mv_itemLink{padding:#{f3} #{f4};display:block;float:left;}\r\n");css.push("#"+tid+" .mv_item{width:#{f1};height:#{f2};}\r\n");css.push("#"+tid+" .mv_imgArea{background-color:#fff;width:#{g1};height:#{g2};border:#{g3} solid #{itemBdColor};position:relative;overflow:hidden;}\r\n");css.push("#"+tid+" .mv_itemImg{width:#{h1};height:#{h2};display:table-cell;vertical-align:middle;text-align:center;overflow:hidden;}\r\n");css.push("#"+tid+" .mv_itemImg span{vertical-align:middle;*display:inline-block;*height:100%;}\r\n");css.push("#"+tid+" .mv_itemImg img{vertical-align:middle;}\r\n");css.push("#"+tid+" .mv_itemInfo_mask{display:none;width:#{l1};height:#{l2};left:#{l3};top:#{l4};background-color: #000;position: absolute;opacity: 0.5;filter: alpha(opacity=50);}\r\n");css.push("#"+tid+" .mv_price {width:#{i1};height:#{i2};bottom: 0;left: 0;background-color:#{pricebgColor};opacity: 0.8;filter: alpha(opacity=80);position: absolute;}\r\n");css.push("#"+tid+" .mv_price_txt {width:#{i1};height:#{i2};line-height:#{i3};bottom:#{i4};left:#{i5};font-size:#{i6};color:#{priceColor};font-weight:#{priceBold};position: absolute;text-align: center;}\r\n");css.push("#"+tid+" .mv_itemInfo {width:#{l1};height:#{l2};left:#{l3};top:#{l4};background-color: #000;position: absolute;opacity: 0.5;filter: alpha(opacity=50);}\r\n");
css.push("#"+tid+" .mv_desc {width:#{m1};height:#{m2};line-height:#{m3};padding:#{m4} #{m5};font-weight:#{descBold};color: #FFFFFF;font-size: 14px;left: 0;top: 0;overflow: hidden;position: absolute;}\r\n");css.push("#"+tid+" .mv_label {width:#{n1};height:#{n2};right:#{n3};bottom:#{n4};background: url("+cartUrl+") no-repeat scroll 0 0 transparent;overflow: hidden;position: absolute;}\r\n");css.push("#"+tid+" .from-left{-webkit-transform-origin: 0% 100%;-moz-transform-origin: 0% 100%;-ms-transform-origin: 0% 100%;transform-origin: 0% 100%;-webkit-animation: enter-clockwise 0.23s ease-out;-moz-animation: enter-clockwise 0.23s ease-out;-ms-animation: enter-clockwise 0.23s ease-out;animation: enter-clockwise 0.23s ease-out;}\r\n");css.push("#"+tid+" .to-left{-webkit-transform-origin: 0% 100%;-moz-transform-origin: 0% 100%;-ms-transform-origin: 0% 100%;transform-origin: 0% 100%;-webkit-animation: leave-anti-clockwise 0.23s ease-out;-moz-animation: leave-anti-clockwise 0.23s ease-out;-ms-animation: leave-anti-clockwise 0.23s ease-out;animation: leave-anti-clockwise 0.23s ease-out;}\r\n");css.push("#"+tid+" .from-top{-webkit-transform-origin: 0% 0%;-moz-transform-origin: 0% 0%;-ms-transform-origin: 0% 0%;transform-origin: 0% 0%;-webkit-animation: enter-clockwise 0.23s ease-out;-moz-animation: enter-clockwise 0.23s ease-out;-ms-animation: enter-clockwise 0.23s ease-out;animation: enter-clockwise 0.23s ease-out;}\r\n");css.push("#"+tid+" .to-top{-webkit-transform-origin: 0% 0%;-moz-transform-origin: 0% 0%;-ms-transform-origin: 0% 0%;transform-origin: 0% 0%;-webkit-animation: leave-anti-clockwise 0.23s ease-out;-moz-animation: leave-anti-clockwise 0.23s ease-out;-ms-animation: leave-anti-clockwise 0.23s ease-out;animation: leave-anti-clockwise 0.23s ease-out;}\r\n");css.push("#"+tid+" .from-right{-webkit-transform-origin: 100% 100%;-moz-transform-origin: 100% 100%;-ms-transform-origin: 100% 100%;transform-origin: 100% 100%;-webkit-animation: enter-anti-clockwise 0.23s ease-out;-moz-animation: enter-anti-clockwise 0.23s ease-out;-ms-animation: enter-anti-clockwise 0.23s ease-out;animation: enter-anti-clockwise 0.23s ease-out;}\r\n");css.push("#"+tid+" .to-right{-webkit-transform-origin: 100% 100%;-moz-transform-origin: 100% 100%;-ms-transform-origin: 100% 100%;transform-origin: 100% 100%;-webkit-animation: leave-clockwise 0.23s ease-out;-moz-animation: leave-clockwise 0.23s ease-out;-ms-animation: leave-clockwise 0.23s ease-out;animation: leave-clockwise 0.23s ease-out;}\r\n");css.push("#"+tid+" .from-bottom{-webkit-transform-origin: 0% 100%;-moz-transform-origin: 0% 100%;-ms-transform-origin: 0% 100%;transform-origin: 0% 100%;-webkit-animation: enter-anti-clockwise 0.23s ease-out;-moz-animation: enter-anti-clockwise 0.23s ease-out;-ms-animation: enter-anti-clockwise 0.23s ease-out;animation: enter-anti-clockwise 0.23s ease-out;}\r\n");css.push("#"+tid+" .to-bottom{-webkit-transform-origin: 0% 100%;-moz-transform-origin: 0% 100%;-ms-transform-origin: 0% 100%;transform-origin: 0% 100%;-webkit-animation: leave-clockwise 0.23s ease-out;-moz-animation: leave-clockwise 0.23s ease-out;-ms-animation: leave-clockwise 0.23s ease-out;animation: leave-clockwise 0.23s ease-out;}\r\n");css.push("@-webkit-keyframes enter-clockwise{from{-webkit-transform: rotate(-90deg);} to{-webkit-transform: rotate(0deg);} }\r\n");css.push("@-moz-keyframes enter-clockwise{from{-moz-transform: rotate(-90deg);} to{-moz-transform: rotate(0deg);} }\r\n");css.push("@-ms-keyframes enter-clockwise{from{-ms-transform: rotate(-90deg);} to{-ms-transform: rotate(0deg);} }\r\n");css.push("@keyframes enter-clockwise{from{transform: rotate(-90deg);} to{transform: rotate(0deg);} }\r\n");css.push("@-webkit-keyframes enter-anti-clockwise{from{-webkit-transform: rotate(90deg);} to{-webkit-transform: rotate(0deg);} }\r\n");css.push("@-moz-keyframes enter-anti-clockwise{from{-moz-transform: rotate(90deg);} to{-moz-transform: rotate(0deg);} }\r\n");css.push("@-ms-keyframes enter-anti-clockwise{from{-ms-transform: rotate(90deg);} to{-ms-transform: rotate(0deg);} }\r\n");css.push("@keyframes enter-anti-clockwise{from{transform: rotate(90deg);} to{transform: rotate(0deg);} }\r\n");css.push("@-webkit-keyframes leave-clockwise{from{-webkit-transform: rotate(0deg);} to{-webkit-transform: rotate(90deg);} }\r\n");css.push("@-moz-keyframes leave-clockwise{from{-moz-transform: rotate(0deg);} to{-moz-transform: rotate(90deg);} }\r\n");css.push("@-ms-keyframes leave-clockwise{from{-ms-transform: rotate(0deg);} to{-ms-transform: rotate(90deg);} }\r\n");css.push("@keyframes leave-clockwise{from{transform: rotate(0deg);} to{transform: rotate(90deg);} }\r\n");css.push("@-webkit-keyframes leave-anti-clockwise{from{-webkit-transform: rotate(0deg);} to{-webkit-transform: rotate(-90deg);} }\r\n");css.push("@-moz-keyframes leave-anti-clockwise{from{-moz-transform: rotate(0deg);} to{-moz-transform: rotate(-90deg);} }\r\n");css.push("@-ms-keyframes leave-anti-clockwise{from{-ms-transform: rotate(0deg);} to{-ms-transform: rotate(-90deg);} }\r\n");
css.push("@keyframes leave-anti-clockwise{from{transform: rotate(0deg);} to{transform: rotate(-90deg);} }\r\n");css.push("#"+tid+" .mv_recommend {background-color: #{vtBgColor};color: #{vtColor};font-size: 12px;height: 16px;line-height: 16px;padding: 0 5px;position: absolute;right: 0;top: 0px;z-index: 1;}\r\n");return this.template(css.join(""),tempData,true)},createCssConfig:function(width,height,bdWidth){var cf={},opt,type=this.type=this.getLayoutType(width,height),tmpW,tmpH;cf.a3=bdWidth||1,cf.a1=width-2*cf.a3,cf.a2=height-2*cf.a3;if(type=="h"){cf.b1=183,cf.b2=cf.a2;cf.c1=cf.b1,cf.c2=cf.b2;cf.d1=cf.a1-cf.b1,cf.d2=cf.a2}else{if(type=="v"){cf.b1=cf.a1,cf.b2=80;if(width==100&&height==160){cf.b2=60}cf.c1=cf.b1,cf.c2=cf.b2;cf.d1=cf.a1,cf.d2=cf.a2-cf.b2}else{if(type=="s"){cf.b1=cf.a1,cf.b2=80;cf.c1=cf.b1,cf.c2=cf.b2;cf.d1=cf.a1,cf.d2=cf.a2-cf.b2}}}cf.logoWidth=cf.b1,cf.logoHeight=cf.b2;cf.e1=cf.d1,cf.e2=cf.d2,opt=this.getOptimumItem(type,cf.d1,cf.d2);if(!opt){return false}this.setPnLength(opt);cf.f3=cf.f4=Math.floor(opt*0.05),cf.f1=cf.f2=opt-2*cf.f3;cf.dh=cf.xNum=Math.floor(cf.d1/(cf.f1+2*cf.f4)),cf.dv=cf.yNum=Math.floor(cf.d2/(cf.f2+2*cf.f3)),cf.displayNum=cf.dh*cf.dv;if(cf.dh&&cf.dv){tmpW=(cf.f1+2*cf.f4)*cf.dh,tmpH=(cf.f2+2*cf.f3)*cf.dv,cf.f4+=Math.floor(((cf.e1-tmpW)/cf.dh)/2);cf.f3+=Math.floor(((cf.e2-tmpH)/cf.dv)/2)}cf.g3=1,cf.g1=cf.f1-2*cf.g3,cf.g2=cf.f2-2*cf.g3;cf.h1=cf.imgW=cf.g1,cf.h2=cf.imgH=cf.g2;cf.i1=cf.h1,cf.i2=cf.i3=18,cf.i4=cf.i5=0,cf.i6=14;cf.l1=cf.h1,cf.l2=cf.h2,cf.l3=cf.l4=0;cf.n1=28,cf.n2=19,cf.n3=5,cf.n4=3;cf.m3=20,cf.m4=0,cf.m5=5,cf.m1=cf.h1-2*cf.m5,cf.m2=cf.h2-2*cf.m4-cf.n2;return cf},getLayoutType:function(width,height){var rate=width/height;if(rate>1.5){return"h"}else{if(rate<=1.5&&rate>=1){return"s"}else{if(rate<1){return"v"}}}},verifyWH:function(type,width,height){if(width>1000||height>600){return false}switch(type){case"h":if(width<220||height<80){return false}return true;break;case"s":if(width<160||height<120){return false}return true;break;case"v":if(width<100||height<100){return false}return true;break;default:return false;break}},getOptimumItem:function(type,width,height){var optimumSize=140,cArea=width*height,iArea;switch(type){case"h":if(height<=140&&height>=78){return height}break;case"s":if(width<=140&&width>=78&&height<=140&&height>=78){return Math.min(width,height)}break;case"v":if(width<=140&&width>=78){return width}break;default:break}while(optimumSize>=78){iArea=optimumSize*optimumSize;if((cArea/iArea)<1||optimumSize>width||optimumSize>height){optimumSize=optimumSize-1}else{break}}return optimumSize},setPnLength:function(opt){if(opt){if(opt<=80){this.pnLength=7}else{if(opt<=90){this.pnLength=8}else{if(opt<=110){this.pnLength=10}else{if(opt<=120){this.pnLength=20}else{if(opt<=130){this.pnLength=21}else{if(opt<=140){this.pnLength=24}}}}}}}},viewType:{0:"\u731C\u4F60\u559C\u6B22",1:"\u5173\u6CE8",3:"\u63A8\u8350",4:"\u63A8\u8350",6:"\u70ED\u5356",7:"\u5173\u6CE8"},fixQuirks:function(data){if(document.compatMode=="BackCompat"&&util.browser.ie&&(util.browser.ie<9||document.documentMode<9)){data.a1+=2*data.a3;data.a2+=2*data.a3;data.g1+=2*data.g3;data.g2+=2*data.g3;data.m1+=2*data.m5;data.m2+=2*data.m4}}};var util={G:function(id){return document.getElementById(id)},getByClass:function(className,context){context=context||document;if(context.getElementsByClassName){return context.getElementsByClassName(className)}else{var nodes=[];var tags=context.getElementsByTagName("*");for(var i=0,len=tags.length;i<len;i++){if(this.hasClass(tags[i],className)){nodes.push(tags[i])}}return nodes}},hasClass:function(node,className){var names=node.className.split(/\s+/);for(var i=0,len=names.length;i<len;i++){if(names[i]==className){return true}}return false},addClass:function(el,name){if(!this.hasClass(el,name)){el.className+=(el.className?" ":"")+name}},removeClass:function(el,name){if(this.hasClass(el,name)){el.className=el.className.replace(new RegExp("(\\s|^)"+name+"(\\s|$)")," ").replace(/^\s+|\s+$/g,"")}},get_pos:function(elem){if(!elem){return false}var left=elem.offsetLeft,top=elem.offsetTop,current=elem.offsetParent;while(current!==null){left+=current.offsetLeft;top+=current.offsetTop;current=current.offsetParent}return{"left":left,"top":top}},get_direction:function(elem,mouse_pos){if(!elem){return false}var pos=this.get_pos(elem),size={"width":elem.offsetWidth,"height":elem.offsetHeight},dx=mouse_pos.x-pos.left-size.width/2,dy=(mouse_pos.y-pos.top-size.height/2)*-1,eve_tan=dy/dx,tan=size.height/size.width;if(dx!=0){if(eve_tan>tan*-1&&eve_tan<tan&&dx<0){return"left"}else{if(eve_tan>tan*-1&&eve_tan<tan&&dx>0){return"right"}else{if((eve_tan>tan||eve_tan<tan*-1)&&dy>0){return"top"}else{if((eve_tan>tan||eve_tan<tan*-1)&&dy<=0){return"bottom"}}}}}else{if(dy>0){return"top"}else{return"bottom"}}},browser:(function(){var uaMatch=navigator.userAgent.toLowerCase().match(/msie ([\w.]+)/);return{ie:uaMatch&&uaMatch[1]}})(),trim:function(str){return str.replace(/(^\s*)|(\s*$)/g,"")},getFixedText:function(text,max,suffix){var textArr=text.split(""),preLength=0,rate=0.6,preText="",len=textArr.length;
if(len>0){for(var i=0;i<len;i++){preLength+=/[\x20-\x7E]/i.test(textArr[i])?rate:1;if(preLength>max){if(suffix){preText=preText.slice(0,-1)+suffix}return preText}else{preText+=textArr[i]}}}return preText},transferNCR:function(data){if(Object.prototype.toString.apply(data)==="[object Array]"){for(var j=0;j<data.length;j++){for(var i in data[j]){if(data[j][i]&&data[j][i].length>0&&!/url/.test(i)){data[j][i]=this.transferNCRStr(data[j][i])}}}}else{data=this.transferNCRStr(data)}return data},transferNCRStr:function(str){str=str.replace(/&(#(?:x[0-9a-f]+|\d+)|[a-z]+);?/gi,function($0,$1){if($1[0]==="#"){return String.fromCharCode($1[1].toLowerCase()==="x"?parseInt($1.substr(2),16):parseInt($1.substr(1),10))}if($1.charAt(0)==="#"){return String.fromCharCode($1.charAt(1).toLowerCase()==="x"?parseInt($1.substr(2),16):parseInt($1.substr(1),10))}});return str},trimText:function(str){str=str.replace(/[\ |\~|\`|\!|\@|\#|\$|\%|\^|\&|\*|\(|\)|\-|\_|\+|\=|\||\\|\[|\]|\{|\}|\;|\:|\"|\'|\,|\<|\.|\>|\/|\?|，|、]/g,"");return str},fixPrice:function(text,isRmb){text+="";if(text.length>6&&!(text.length===7&&text.indexOf(".")>-1)){text=""+parseInt(text);if(text.length>6){text=text.slice(0,-4);if(isRmb){text+="\u4e07"}else{text=(parseInt(text)/100).toFixed(2)+"M"}}}return text},monitorClick:function(bid,clickUrl,width,height){var el=util.G("banner_"+bid);function onClick(e){var pos=util.getMousePosition(e,el),url=util.combineHeatmapUrl(clickUrl);url+="&wh="+width+"x"+height+"&x="+pos.left+"&y="+pos.top;util.request(url)}if(el.addEventListener){el.addEventListener("click",onClick,false)}else{el.attachEvent("onclick",onClick)}},getMousePosition:function(e,el){var pos,x,y,docEl=document.documentElement,body=document.body;x=e.pageX||e.clientX+(docEl&&docEl.scrollLeft||body&&body.scrollLeft||0);y=e.pageY||e.clientY+(docEl&&docEl.scrollTop||body&&body.scrollTop||0);pos=this.getOffset(el);return{top:Math.round(y-pos.top),left:x-pos.left}},getOffset:function(el){var docElem=document.documentElement,body=document.body,box={top:0,left:0};if(typeof el.getBoundingClientRect!==undefined){box=el.getBoundingClientRect()}return{top:box.top+(window.pageYOffset||docElem.scrollTop||body.scrollTop),left:box.left+(window.pageXOffset||docElem.scrollLeft||body.scrollLeft)}},combineHeatmapUrl:function(clickUrl){var prefix="http://view.mediav.com/v?type=12&db=mediav",oimpid=this.getQueryString(clickUrl,"oimpid")||this.getQueryString(clickUrl,"impid"),pub=this.getQueryString(clickUrl,"pub"),cus=this.getQueryString(clickUrl,"cus");return prefix+"&impid="+oimpid+"&pub="+pub+"&cus="+cus},getQueryString:function(url,name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)","i");var r=url.substr(1).match(reg);if(r!=null){return unescape(r[2])}return null},request:function(url){var img=document.createElement("img");img.src=url;img.style.display="none";document.body.appendChild(img);setTimeout(function(){document.body.removeChild(img)},1000)}}})();