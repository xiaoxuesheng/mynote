<!DOCTYPE html>
<!-- saved from url=(0044)http://www.toutiao.com/i6364583209820226050/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script charset="utf-8" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/probe.js.下载" async="" mod_name="tanxssp-probe"></script><style class="vjs-styles-defaults">
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid {
        padding-top: 56.25%
      }
    </style>
    <meta http-equiv="x-dns-prefetch-control" content="on">
    <link rel="dns-prefetch" href="http://s3.pstatp.com/">
    <link rel="dns-prefetch" href="http://s3a.pstatp.com/">
    <link rel="dns-prefetch" href="http://s3b.pstatp.com/">
    <link rel="dns-prefetch" href="http://p1.pstatp.com/">
    <link rel="dns-prefetch" href="http://p3.pstatp.com/">
    
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, minimal-ui">
    
    <meta name="baidu-site-verification" content="T239HZAbh7">
    
    <!--meta name="baidu_union_verify" content="94bb8bb3fa863f70e7fd926bffecd81e"-->
    <meta name="360-site-verification" content="b96e1758dfc9156a410a4fb9520c5956">
    <meta name="360_ssp_verify" content="2ae4ad39552c45425bddb738efda3dbb">
    <meta name="google-site-verification" content="3PYTTW0s7IAfkReV8wAECfjIdKY-bQeSkVTyJNZpBKE">
    <meta name="shenma-site-verification" content="34c05607e2a9430ad4249ed48faaf7cb_1432711730">
    <meta name="baidu_union_verify" content="b88dd3920f970845bad8ad9f90d687f7">
    <meta name="domain_verify" content="pmrgi33nmfuw4ir2ej2g65lunfqw6ltdn5wselbcm52wszbchirdqyztge3tenrsgq3dknjume2tayrvmqytemlfmiydimddgu4gcnzcfqrhi2lnmvjwc5tfei5dcnbwhazdcobuhe2dqobrpu">
    
  <link rel="alternate" media="only screen and (max-width: 640px)" href="http://m.toutiao.com/a6364580438367060226/">

  <title>HAProxy的安装与使用 - 今日头条(www.toutiao.com)</title>

  <meta http-equiv="Cache-Control" content="no-transform">
  <meta name="keywords" content="">
  <meta name="description" content="在互联网时代中，后台系统架构，经常可以听到高可用集群、负载均衡集群之类的系统架构解决方案，其中，负载均衡有基于硬件的F5、Big-IP等，也有基于软件的LVS(基于Linux操作系">
  <meta name="pathname" content="toutiao_pc_article_detail">

    <meta name="format-detection" content="telephone=no">
    <link rel="shortcut icon" href="http://s3a.pstatp.com/toutiao/resource/ntoutiao_web/static/image/favicon_8e9c9c7.ico" type="image/x-icon">
    <link rel="stylesheet" href="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/layout_5fcc025.css">
    <!--[if lt IE 9]>
      <script src="//s3a.pstatp.com/toutiao/resource/ntoutiao_web/static/js/lib/es5-shim_110642e.js"></script>
    <![endif]-->
    <script async="" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/analytics.js.下载"></script><script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/lib_060bfbf.js.下载" crossorigin="anonymous"></script>
    
  <link rel="stylesheet" href="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/article_97557fd.css">
  <link rel="stylesheet" href="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/tt-video.css" media="screen" title="no title">
  <!--[if lt IE 9]>
  <script src="//s3.pstatp.com/toutiao/video_player/dist/videojs-ie8.js" charset="utf-8" crossorigin="anonymous"></script>
  <script src="//s3.pstatp.com/toutiao/video_player/dist/examples/webfont.js" charset="utf-8" crossorigin="anonymous"></script>
  <script>
      WebFont.load({
          custom: {
              families: ['iconfont','yFont'],
              urls:['//s3.pstatp.com/toutiao/video_player/dist/tt-video.css','//www.toutiao.com/static/style/lib/layout.css']
          }
      });
  </script>
  <![endif]-->

<style id="7e998ac">.imga_wrapper{position:relative;display:inline-block;}.imga_flag{display: inline-block;position: absolute;bottom: 8px;left: 8px;border: 1px solid #fff;color: #fff;font-size: 12px;line-height: 12px;height: 12px;padding: 1px 2px;text-align: center;}</style><style id="03dda2b">.bd-bottom-1{padding-left: 10px}</style><style id="da1de5f">.right-top-1{margin-bottom: 30px}</style><style id="866b8a4">.right-top-2{margin-bottom: 30px}</style><style id="862a529">.right-top-3{margin-bottom: 30px}</style><style id="28a8d0b">.right-top-4{margin-bottom: 30px}</style><style id="40afdb2">.right-hover-1{position: fixed; top: 20px;} #imagindexhover > ins {position: absolute !important}</style></head>

<body style="min-width: 1220px; overflow-x: hidden;">
    

    <a href="http://www.toutiao.com/articles_news_society/" style="display:none;"></a>

    <div class="y-wrap">
        

<!-- 公共头部 -->
<div id="header">
  <div riot-tag="wtopbar" style="height: 34px; background: #222;"><div class="y-box wtopbar">  <div class="y-left y-nav-topbar" riot-tag="nav"><div class="nav"> <ul class="y-box nav-list" ga_event="mh_channel"> <li class="y-left nav-item"> <a target="_blank" class="nav-link " href="http://www.toutiao.com/" ga_event="mh_channel_recommend">推荐</a> </li><li class="y-left nav-item"> <a target="_blank" class="nav-link " href="http://www.toutiao.com/ch/news_hot/" ga_event="mh_channel_hot">热点</a> </li><li class="y-left nav-item"> <a target="_blank" class="nav-link " href="http://www.toutiao.com/ch/video/" ga_event="mh_channel_video">视频</a> </li><li class="y-left nav-item"> <a target="_blank" class="nav-link " href="http://www.toutiao.com/ch/news_image/" ga_event="mh_channel_image">图片</a> </li><li class="y-left nav-item"> <a target="_blank" class="nav-link " href="http://www.toutiao.com/ch/essay_joke/" ga_event="mh_channel_essay">段子</a> </li><li class="y-left nav-item"> <a target="_blank" class="nav-link " href="http://www.toutiao.com/ch/news_society/" ga_event="mh_channel_society">社会</a> </li><li class="y-left nav-item"> <a target="_blank" class="nav-link " href="http://www.toutiao.com/ch/news_entertainment/" ga_event="mh_channel_entertainment">娱乐</a> </li><li class="y-left nav-item"> <a target="_blank" class="nav-link " href="http://www.toutiao.com/ch/news_tech/" ga_event="mh_channel_tech">科技</a> </li><li class="y-left nav-item"> <a target="_blank" class="nav-link " href="http://www.toutiao.com/ch/news_car/" ga_event="mh_channel_car">汽车</a> </li><li class="y-left nav-item"> <a target="_blank" class="nav-link " href="http://www.toutiao.com/ch/news_sports/" ga_event="mh_channel_sports">体育</a> </li><li class="y-left nav-item"> <a target="_blank" class="nav-link " href="http://www.toutiao.com/ch/news_finance/" ga_event="mh_channel_finance">财经</a> </li><li class="y-left nav-item"> <a target="_blank" class="nav-link " href="http://www.toutiao.com/ch/news_military/" ga_event="mh_channel_military">军事</a> </li><li class="y-left nav-item"> <a target="_blank" class="nav-link " href="http://www.toutiao.com/ch/news_world/" ga_event="mh_channel_world">国际</a> </li><li class="y-left nav-item"> <a target="_blank" class="nav-link " href="http://www.toutiao.com/ch/news_fashion/" ga_event="mh_channel_fashion">时尚</a> </li><li class="y-left nav-item"> <a target="_blank" class="nav-link " href="http://www.toutiao.com/ch/news_travel/" ga_event="mh_channel_travel">旅游</a> </li><!--riot placeholder--> <li class="y-left nav-item nav-more"> <a class="nav-link" href="javascript:;"> 更多<i class="y-icon icon-more"></i> </a> <div class="nav-layer"> <ul class="nav-more-list"> <li class="nav-more-item"> <a target="_blank" href="http://www.toutiao.com/ch/news_discovery/" ga_event="mh_channel_discovery">探索</a> </li><li class="nav-more-item"> <a target="_blank" href="http://www.toutiao.com/ch/news_baby/" ga_event="mh_channel_baby">育儿</a> </li><li class="nav-more-item"> <a target="_blank" href="http://www.toutiao.com/ch/news_regimen/" ga_event="mh_channel_regimen">养生</a> </li><li class="nav-more-item"> <a target="_blank" href="http://www.toutiao.com/ch/news_story/" ga_event="mh_channel_story">故事</a> </li><li class="nav-more-item"> <a target="_blank" href="http://www.toutiao.com/ch/news_essay/" ga_event="mh_channel_essay">美文</a> </li><li class="nav-more-item"> <a target="_blank" href="http://www.toutiao.com/ch/news_game/" ga_event="mh_channel_game">游戏</a> </li><li class="nav-more-item"> <a target="_blank" href="http://www.toutiao.com/ch/news_history/" ga_event="mh_channel_history">历史</a> </li><li class="nav-more-item"> <a target="_blank" href="http://www.toutiao.com/ch/news_food/" ga_event="mh_channel_food">美食</a> </li><!--riot placeholder--> </ul> </div> </li> </ul> </div></div> <ul class="y-right"> <li class="tb-item userbox"> <div riot-tag="wuserbox" abtype="" pageid=""><div class="y-box wuserbox">  <div class="y-right username"> <a ga_event="mh_nav_user" class="user-head" target="_blank" rel="nofollow" href="http://www.toutiao.com/c/user/7170056853/"> <div class="user-image"> <img onload="this.style.opacity=1;" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/5070639578" style="opacity: 1;"> </div> <span>东北小凤凰</span> </a> <div class="user-layer"> <ul ga_event="mh_nav_user"> <li><a class="layer-item" target="_blank" rel="nofollow" href="http://www.toutiao.com/c/user/7170056853/?tab=favourite">我的收藏</a></li> <li><a class="layer-item" target="_blank" rel="nofollow" href="http://www.toutiao.com/c/user/relation/7170056853/?tab=following">我的关注</a></li> <li><a class="layer-item" target="_blank" rel="nofollow" href="http://www.toutiao.com/c/user/relation/7170056853/?tab=followed">我的粉丝</a></li> <li> <a href="https://sso.toutiao.com/logout/" class="layer-item" rel="nofollow">退出</a> </li> </ul> </div> </div>  </div></div> </li> <li class="tb-item"> <a class="tb-link" href="javascript:void(0)">反馈</a> </li> <li class="tb-item"> <a class="tb-link" href="http://www.toutiao.com/complain/" ga_event="mh_nav_complain">投诉侵权</a> </li> <li class="tb-item more"> <a class="tb-link" href="http://www.toutiao.com/about/">头条产品</a> <div class="layer"> <ul> <li> <a href="https://wenda.toutiao.com/" class="layer-item" ga_event="mh_nav_others" target="_blank">问答</a> </li> <li> <a href="https://mp.toutiao.com/" class="layer-item" target="_blank" ga_event="mh_nav_others">头条号</a> </li> <li> <a href="https://tuchong.com/" class="layer-item" target="_blank" ga_event="mh_nav_others">图虫</a> </li> <li> <a href="https://ad.toutiao.com/promotion/?source2=pchometop" class="layer-item" target="_blank" ga_event="mh_nav_ad">广告投放</a> </li> </ul> </div> </li> </ul> <div id="J_userFeedback"></div> </div></div>
  
  <div class="middlebar">
  <div class="y-box middlebar-inner">
    <div class="y-left logo-box">
      <a class="logo-link" href="http://www.toutiao.com/" ga_event="go_home">
        <img class="logo" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/logo_201f80d.png">
      </a>
    </div>

    
      <div class="y-left chinese-tag">
        <a href="http://www.toutiao.com/" target="_blank" ga_event="click_index">首页</a>
        /
        <a href="http://www.toutiao.com/search/?keyword=%E6%8A%80%E6%9C%AF" target="_blank" ga_event="click_channel">技术</a>
        /
        <span class="text">正文</span>
      </div>
    

    <div class="y-right">
      <div riot-tag="wsearch" style="margin-top: 9px; width: 340px;"><div name="searchBox" class="wsearch"> <form name="searchForm" action="http://www.toutiao.com/search/" method="get" target="_blank"> <div name="inputbox" class="y-box input-group"> <input class="y-left input-text" name="keyword" autocomplete="off" ga_event="mh_search" type="text" placeholder="请输入关键字"> <div class="y-right btn-submit"> <button type="submit" href="javascript:;"> <i class="y-icon icon-search" ga_event="mh_search"></i> </button> </div> </div> </form> <div class="layer "> <ul ga_event="mh_search"> <li class="search-item"> <a href="javascript:;"> <i class="search-no search-no-1">1</i>  <span class="search-txt">首列中欧班列抵达</span> </a> </li><li class="search-item"> <a href="javascript:;"> <i class="search-no search-no-2">2</i>  <span class="search-txt">云南遇暴力抗法</span> </a> </li><li class="search-item"> <a href="javascript:;"> <i class="search-no search-no-3">3</i>  <span class="search-txt">新版外国人身份证</span> </a> </li><li class="search-item"> <a href="javascript:;"> <i class="search-no search-no-4">4</i>  <span class="search-txt">比特币暴跌</span> </a> </li><li class="search-item"> <a href="javascript:;"> <i class="search-no search-no-5">5</i>  <span class="search-txt">儿童网游暗藏色魔</span> </a> </li><li class="search-item"> <a href="javascript:;"> <i class="search-no search-no-6">6</i>  <span class="search-txt">日媒感慨中国手机</span> </a> </li><li class="search-item"> <a href="javascript:;"> <i class="search-no search-no-7">7</i>  <span class="search-txt">被蛇咬死前咬妻子</span> </a> </li><li class="search-item"> <a href="javascript:;"> <i class="search-no search-no-8">8</i>  <span class="search-txt">赵本山女公开恋情</span> </a> </li><li class="search-item"> <a href="javascript:;"> <i class="search-no search-no-9">9</i>  <span class="search-txt">曝章泽天六级成绩</span> </a> </li><li class="search-item"> <a href="javascript:;"> <i class="search-no search-no-10">10</i>  <span class="search-txt">美舰与菲货轮相撞</span> </a> </li><!--riot placeholder--> </ul> </div> </div></div>
    </div>
  </div>
</div>

  
</div>

<div riot-tag="login"><div class="login-dialog hide"> <a class="btn" href="javascript:;"> <i class="icon icon-close"></i> </a> <div class="login-dialog-header"> <h3>邮箱登录</h3> </div> <div class="login-dialog-inner" data-node="inner"> <div class="login-pannel bottom-line"> <form action="http://www.toutiao.com/auth/login/" method="POST"> <ul> <li> <div class="input-group"> <div class="input"> <label>邮箱</label> <input class="name" name="name_or_email" type="text" placeholder="请使用您的注册邮箱" autocomplete="off" spellcheck="false"> </div> </div> </li> <li> <div class="input-group"> <div class="input"> <label>密码</label> <input class="password" name="password" type="password" data-node="password" placeholder="密码" autocomplete="off" spellcheck="false"> </div> </div> </li> <li class="captcha-box "> <div class="input-group"> <div class="input"> <input class="password" name="captcha" type="text" data-node="captcha" placeholder="验证码" autocomplete="off" spellcheck="false"> <img name="captchaImg"> </div> </div> </li> <li> <div class="input-group"> <input type="checkbox" name="remember_me" checked="" style="vertical-align:top"> <label for="remember_me" class="label">记住账号</label> </div> </li> <li> <div class="input-group" style="text-align: center;"> <input type="submit" class="submit-btn" value="登录"> <p class=""></p> </div> </li> </ul> </form> </div> <div class="login-dialog-header"> <h3>合作网站帐号登录</h3> </div> <div class=""> <ul class="y-box sns_login_list"> <li class="sinaweibo"> <a href="javascript:;" data-pid="sina_weibo" ga_event="login_sina_weibo"> <i class="icon"></i> 新浪微博 </a> </li> <li class="qqweibo"> <a href="javascript:;" data-pid="qq_weibo" ga_event="login_tencnet_weibo"> <i class="icon"></i> 腾讯微博 </a> </li> <li class="qzone"> <a href="javascript:;" data-pid="qzone_sns" ga_event="login_qqzone"> <i class="icon"></i> QQ空间 </a> </li> <li class="renren"> <a href="javascript:;" data-pid="renren_sns" ga_event="login_renren"> <i class="icon"></i> 人人网 </a> </li> <li class="weixin"> <a href="javascript:;" style="margin-right:0;" data-pid="weixin" ga_event="login_wechat"> <i class="icon"></i> 微信 </a> </li> </ul> </div> </div> </div> <div class="mask hide"></div></div>
<div id="toast"></div>


<div class="y-box container">
  <div class="y-left">
    <div class="y-box">
      <div class="y-left index-left">
        <div riot-tag="snsbox"><div class="snsbox" name="snsbox">  <a href="http://www.toutiao.com/i6364583209820226050/#comment_area" class="share-count" ga_event="click_comment_anchor"> <i class="y-icon icon-comments"></i> <span>1</span> </a> <div class="share-hr"></div> <div class="share-box" ga_event="click_share_weibo"><i class="y-icon icon-sina"></i><span>微博</span></div> <div class="share-box" ga_event="click_share_qzone"><i class="y-icon icon-qzone"></i><span>Qzone</span></div> <div class="share-box share-weixin" ga_event="click_share_weixin"> <i class="y-icon icon-wechat"></i><span>微信</span> <div class="share-qrcode"> <div></div> </div> </div> </div></div>
      </div>
      <div class="y-left index-middle" id="J_content">
        <div id="article-main">
	

  <h1 class="article-title">HAProxy的安装与使用</h1>

  <div class="articleInfo">
	
    
    <span class="src">
    	
    		科技优家
    	
    </span>
    
    <span class="time">2016-12-16 14:56</span>
</div>

  <div class="article-content"><p>在互联网时代中，后台系统架构，经常可以听到高可用集群、负载均衡集群之类的系统架构解决方案，其中，负载均衡有基于硬件的F5、Big-IP等，也有基于软件的LVS(基于Linux操作系统实现，性能可以和基于硬件的性能媲美)、Nginx、HAProxy(基于第三方应用实现)等，本文介绍一下HAProxy的安装与配置使用。</p><p>HAProxy是一个高性能的、开源的负载均衡软件，它支持TCP(ISO参考模型的第四层)和HTTP(ISO参考模型的第七层)协议，支持虚拟主机，haproxy实现了一种事件驱动、单一进程模型，最高可以同时维护4到5万个并发连接，支持多种负载均衡算法与session保持，也支持ACL(Access Control List，访问控制列表)。</p><p>上面说到支持TCP和HTTP协议的应用负载均衡，对于tcp层来说，主要通过分析IP层及TCP/UDP层的流量来实现基于"IP+端口"的负载均衡，在这一层的产品有LVS和F5等；对于http层来说，实际上，支持http、ftp、smtp协议，除了支持基于"IP+端口"的负载均衡，还可根据报文内容，再配合负载均衡算法来选择后端服务器，成为“内容交换机”，在这一层的产品有HAProxy、Nginx等。这里可以发现，在http层要实现报文内容的负载均衡，haproxy需要先与客户端建立一次tcp连接，然后再根据内容进行后端转发，这里在haproxy与后端机器也会建立一次tcp连接，haproxy相当于代理,而在tcp层，客户端与后端服务器会直接建立tcp连接，haproxy相当于路由。</p><p>HAProxy的官网：http://www.haproxy.org</p><p>大概了解了HAProxy后，下面开始安装使用，这里下载了当前最新版本（haproxy-1.7.1.tar.gz）：</p><p>1. 安装文件：</p><p><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/15ef001089275ec04e6f" img_width="543" img_height="139" alt="HAProxy的安装与使用" inline="0"></p><p>2. 解压：tar zxf haproxy-1.7.1.tar.gz</p><p>3. 进入安装文件目录：cd haproxy-1.7.1</p><p>4. 编译：make TARGET=linux26 PREFIX=/usr/local/haproxy171</p><p><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/15ea0002a1903ba90381" img_width="916" img_height="398" alt="HAProxy的安装与使用" inline="0"></p><p>没有错误，继续下一步来安装：</p><p>5. 安装：sudo make install PREFIX=/usr/local/haproxy171</p><p><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/15ea0002a19158652e7e" img_width="918" img_height="199" alt="HAProxy的安装与使用" inline="0"></p><p>6. haproxy安装后是没有配置文件目录的，这里手动新建：</p><p><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/15f4000b191d72a47cef" img_width="461" img_height="170" alt="HAProxy的安装与使用" inline="0"></p><p>7. 这里为了方便，把之前的配置文件复制来用，文件内容如下：</p><pre>global
log 127.0.0.1local0 info
maxconn 4096
daemon
    nbproc 1
    pidfile /usr/local/sbin/haproxy.pid

defaults
    retries3
    timeout connect 10s
    timeout client 30s
    timeout server 30s
    timeout check 5s

frontend www
    bind *:6604
    mode http
    option httplog
    option forwardfor
    option httpclose
    log global
    default_backend htmpool

backend htmpool
    mode http
    option redispatch
    balance roundrobin
        server APP_UPDATE_NOTE APP_UPDATE_NOTE:8000  check inter 2000 rise 2 fall 5
</pre><p>8. 配置文件解析：</p><p><strong>global段：</strong></p><p>全局配置参数，属于进程级的配置，通常与操作系统配置相关。</p><p>log：日志配置，其中local0是日志设备，后面跟日志记录级别，有：err、warning、info、debug。haproxy使用了Linux系统的rsyslog服务（CentOS6.3版本以后不再使用syslog，使用rsyslog）来记录日志，详细可以到其官网了解：http://www.rsyslog.com</p><p><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/15f8000b28202cc2c09b" img_width="706" img_height="664" alt="HAProxy的安装与使用" inline="0"></p><p>maxconn设置了每个haproxy进程可接受的最大并发连接数。</p><p>daemon设置haproxy在后台运行。</p><p>nbproc设置haproxy启动时可创建的进程数，默认为1个，该值应小于服务器的CPU核数。</p><p>pidfile配置了haproxy启动后进程的pid文件路径。</p><p><strong>defaults段：</strong></p><p>默认参数配置，该部分参数作用域覆盖frontend段和backend段。</p><p>retries配置连接后端服务器失败重试次数，超过3次后会将失败的后端服务器标记为不可用。</p><p>timeout connect配置成功连接到一台服务器的最长等待时间，默认单位是毫秒，也可自己指定单位</p><p>timeout client配置连接客户端发送数据时的最长等待时间，默认单位是毫秒，也可自己指定单位。</p><p>timeout server配置服务器端回应客户端数据发送时最长等待时间，默认单位是毫秒，也可自己指定单位。</p><p>timeout check配置对后端服务器的检测超时时间，默认单位是毫秒，也可自己指定单位。</p><p><strong>frontend段(ACL规则也在这部分配置)：</strong></p><p>前端监听服务器配置</p><p><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/15ea0002a19357e4dd47" img_width="230" img_height="144" alt="HAProxy的安装与使用" inline="0"></p><p>这里定义了一个"www"名字的前段虚拟节点。</p><p>bind配置了监听地址和端口，这里设置为”*“表示当前系统所有的IPV4地址，端口建议数值大于1024。</p><p>mode配置为http模式，这样，客户端请求在转发到后端服务器前会被进行内容分析。</p><p>option httplog配置启用日志来记录http请求，haproxy默认只对tcp日志进行日志记录的。</p><p>option forwoardfor配置后端服务器需要获得客户端的真实IP，它通过增加”X-Forwarded-For“来记录客户端IP。</p><p>option httpclose配置在客户端和服务器完成一次连接请求后，haproxy主动关闭此TCP连接。</p><p>log global配置使用全局的日志配置。</p><p>default_backend htmpool配置使用的后端机组。</p><p><strong>backend段：</strong></p><p>后端服务器集群配置，真正处理用户请求的服务器机组。</p><p>这里定义了一个”htmpool“名字的后端机组。</p><p>mode配置为http模式</p><p>option redispatch用于cookie保持的环境中，此参数建议加上。</p><p>balance roundrobin配置使用基于权重进行轮叫调度的算法，在服务器性能分布较均匀情况下推荐。另外还有如下几种算法：</p><p>-- static-rr (也是基于权重进行轮转调度，不过属于静态方法，运行时调整后端机组权重不会使用新的权重)</p><p>-- source （基于请求源IP进行hash运算来匹配后端机组）</p><p>-- leastconn (不适合会话较短的环境，如基于http的应用)</p><p>-- uri （对整个URI进行hash运算）</p><p>-- uri_param （对URI中的参数进行转发）</p><p>-- hdr(&lt;name&gt;):根据http头进行转发，不存在该头则转为使用roundrobin</p><p>server 指定后端机器，格式：server &lt;自定义名字，便于识别主机即可&gt; &lt;主机IP或名字&gt;:&lt;端口&gt; [params ...]</p><p>[params ...]参数：</p><p>check 表示对后端服务器进行健康状态检查</p><p>inter 2000 健康状态检查时间间隔为2000毫秒</p><p>rise 2 从故障状态转换至正常状态需要成功检查的次数</p><p>fall 5 后端服务器从正常转换为故障状态需要检查的次数</p><p>可选：</p><p>weight: 权重，默认1，最大为265，0则表示不参与负载均衡</p><p>9. 日志配置(前提：haproxy.cfg配置了log模块)</p><p>9.1 检查rsyslog是否安装</p><p>9.2 编辑文件/etc/rsyslog.conf，修改为如下：</p><p><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/15eb00106819a16142e0" img_width="728" img_height="672" alt="HAProxy的安装与使用" inline="0"></p><p>9.3 修改/etc/sysconfig/rsyslog文件</p><p><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/15ef0010892b2e85647f" img_width="682" img_height="130" alt="HAProxy的安装与使用" inline="0"></p><p>9.4 重启rsyslog服务：sudo service rsyslog restart</p><p>10. 启动haproxy</p><p>可以查看一下haproxt的帮助：</p><p><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/15ea0002a196a8c81672" img_width="638" img_height="463" alt="HAProxy的安装与使用" inline="0"></p><p>启动：</p><p>启动完成。</p><p>如需平衡重启：sudo ./haproxy -f ../conf/haproxy.cfg -st &lt;haproxy的pid&gt;</p><p>11. 测试：</p><p>http://192.168.0.193:6604</p><p><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/15eb0010681a93c9eeb4" img_width="777" img_height="296" alt="HAProxy的安装与使用" inline="0"></p><p>实际上，这个页面的真实源地址是：http://182.*.2*.**:80，说明haproxy已经成功运行了。</p><p>看看日志文件：</p><p><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/15f4000b1921b10a743f" img_width="992" img_height="382" alt="HAProxy的安装与使用" inline="0"></p><p>查看浏览器开发者模式输出：</p><p><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/15f600029ffa19465eb7" img_width="1062" img_height="299" alt="HAProxy的安装与使用" inline="0"></p><p>的确达到了我们的目的。</p><p>13. 配置haproxy监测</p><p>修改配置文件，增加如下：</p><p><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/15eb0010681cdc827d91" img_width="499" img_height="488" alt="HAProxy的安装与使用" inline="0"></p><p>重启haproxy，访问如下：</p><p><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/15f8000b2824906fdc95" img_width="1486" img_height="607" alt="HAProxy的安装与使用" inline="0"></p><p>通过这个网站，可以查看该负载均衡集群的主机运行状态，当后端服务器集群出现故障时，相应改变颜色来提示运维人员，方便及时发现和修复。</p><p>14. 扩展：</p><p>可以增加ACL配置规则和根据实际需要使用其他后端服务器使用算法，这里只是使用了轮训算法。</p></div>

  <div class="y-box article-actions">
		
<div class="labelList">
	<i class="y-icon icon-tag"></i>
	<ul class="label-list">
		
		<li class="label-item"><a class="label-link" href="http://www.toutiao.com/search/?keyword=Linux" target="_blank">Linux</a></li>
		
		<li class="label-item"><a class="label-link" href="http://www.toutiao.com/search/?keyword=%E8%BD%AF%E4%BB%B6" target="_blank">软件</a></li>
		
		<li class="label-item"><a class="label-link" href="http://www.toutiao.com/search/?keyword=Nginx" target="_blank">Nginx</a></li>
		
		<li class="label-item"><a class="label-link" href="http://www.toutiao.com/search/?keyword=%E6%8A%80%E6%9C%AF" target="_blank">技术</a></li>
		
	</ul>
</div>

		<div riot-tag="actionBox" class="actionBox"><div class="repin "> <i class="y-icon icon-favorite "></i><span>收藏</span> </div> <a href="javascript:;" class="areport"> <i class="y-icon icon-report"></i><span>举报</span> </a> <div id="J_articleReport"></div></div>
  </div>
</div>

        <div class="bd-bottom-1" ad-cursor="" name="adetail_main*bottom_1" id="J_ad_baidu_bottom" ad_name="h_640*60_TB_146" done="1"><script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/ex" id="tanx-s-mm_32479643_3494618_75352146" charset="gbk"></script><script charset="utf-8" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/tanxssp.js.下载"></script><ins style="display:inline-block;padding:0;margin:0;width:640px;height:90px;*zoom:1;*display:inline; position:relative;" id="tanxssp-outer-conmm_32479643_3494618_75352146"><div id="tanxssp_con_mm_32479643_3494618_75352146" style="overflow:hidden;display:inline-block;position:relative;width:640px;height:90px;*display:inline;*zoom:1;font:12px/1.5 tahoma,&#39;Hiragino Sans GB&#39;,&#39;microsoft yahei&#39;,sans-serif;"><iframe id="tanxssp-tuwen-iframemm_32479643_3494618_75352146" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1iXhkPFXXXXcwXFXXXXXXXXXX.html" style="width:640px;height:90px" border="0" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" allowtransparency="true"></iframe><a id="iconmm_32479643_3494618_75352146" title="我也要申请橱窗推广" target="_blank" href="http://pro.taobao.com/index.htm?spm=a2320.7388781.1998051528.5.JOvNkN" style="overflow:hidden;width:15px;height:13px;right:20px;bottom:0px;display:block;position:absolute;cursor:pointer;z-index:250;">   <span id="icon_smallmm_32479643_3494618_75352146" style="border-right:2px solid #eee;float:none;width:13px;display:block;height:13px;box-sizing:content-box"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1DmcoJXXXXXavXpXXXXXXXXXX-26-26.png" border="0" style="width:13px;height:13px;margin:auto;display:block;"></span>   <span id="icon_bigmm_32479643_3494618_75352146" style="float:none;width:60px;height:13px;display: none;"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1Lt7aJXXXXXcjXVXXXXXXXXXX-117-26.png" style="width:60px;height:13px;margin:auto;display:block;" border="0/"></span></a><a id="sxmm_32479643_3494618_75352146" href="javascript:;" style="width:20px;height:13px;right:0px;bottom:0px;display:block;position:absolute;cursor:pointer;z-index:250;margin:0;">   <span id="sx1mm_32479643_3494618_75352146" style="float:none;width:20px;display:block;height:13px;"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1tWvVJFXXXXc_aXXXXXXXXXXX-40-26.png" style="width:20px;height:13px;margin:auto;display:block;min-height:13px;" border="0/"></span><div id="sxtipmm_32479643_3494618_75352146" style="display:none;position:absolute;left:-38px;bottom:13px;"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1upAiJXXXXXa5aXXXXXXXXXXX-116-30.png" style="width:58px;height:15px;margin:auto;display:block;min-height:15px;" border="0"></div></a></div></ins><a style="display:none;" id="tanx-a-mm_32479643_3494618_75352146"></a><script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/ex(1)"></script></div>
        <a id="comment_area" href="http://www.toutiao.com/i6364583209820226050/#" style="display: inline-block;margin-bottom: 20px;"></a><!--评论锚点-->
        <div riot-tag="comment" id="comment"><div class="c-header"> <em>1&nbsp;</em>条评论 </div> <div riot-tag="inputBox" ismain="true" avatar="http://p0.pstatp.com/origin/3791/5070639578" group_id="6364580438367060226" item_id="6364583209820226050"><div class="inputBox"> <div class="y-box"> <div class="avatar-wrap avatar-wrap-center"> <img alt="" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/5070639578"> </div> <div class="input-wrap  "> <div class="c-textarea" ga_event="click_input_comment"> <textarea name="inputText" placeholder="写下您的评论..."></textarea> </div> <div class="c-action" ga_event="click_publish_comment"> <div class="c-submit">评论</div> </div> </div> </div> </div></div> <ul> <!--riot placeholder--> </ul>  <div id="J_report"></div></div>
      </div>
    </div>
    <div class="y-box" style="margin-top: 30px;">
      <div class="y-left index-left">
        <div riot-tag="relatedChannel"><div name="relatedChannel" ga_event="related_channel_click" class="relatedChannel "> <h2 class="relatedChannel-header">相关推荐</h2> <ul class="relatedChannel-list"> <li> <a href="javacript:;" class="relatedChannel-item active"> <i class="y-icon icon-refreshfeed " style="display: none;"></i><span>推荐</span> </a> </li><li> <a href="javacript:;" class="relatedChannel-item "> <i class="y-icon icon-refreshfeed " style="display: none;"></i><span>热点</span> </a> </li><li> <a href="javacript:;" class="relatedChannel-item "> <i class="y-icon icon-refreshfeed " style="display: none;"></i><span>社会</span> </a> </li><li> <a href="javacript:;" class="relatedChannel-item "> <i class="y-icon icon-refreshfeed " style="display: none;"></i><span>娱乐</span> </a> </li><li> <a href="javacript:;" class="relatedChannel-item "> <i class="y-icon icon-refreshfeed " style="display: none;"></i><span>科技</span> </a> </li><li> <a href="javacript:;" class="relatedChannel-item "> <i class="y-icon icon-refreshfeed " style="display: none;"></i><span>体育</span> </a> </li><!--riot placeholder--> </ul> </div></div>
      </div>
      <div class="y-left index-middle">
        <div class="index-cut-line" id="J_cut_line"></div>
        <div riot-tag="feedBox"></div>
      </div>
    </div>
  </div>
  <div id="J_rindex" class="y-right index-right">
    
<div class="module">
  <div class="pgcInfo">
    <div class="pgc-head">
      <a class="pgc-link" target="_blank" href="http://www.toutiao.com/c/user/5841160544/" ga_event="click_into_pgc">
          <img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/2745320029" alt="科技优家">
          <div class="pgc-username">
            <span>科技优家</span>
            <div riot-tag="subscribe" class="pgc-subscribe"><div class="subscribe" ga_event="follow_pgc"> <div class="article-subscribe left-arrow"> <i class="y-icon icon-check"></i><span>已关注</span> </div>  </div></div>
          </div>
      </a>
    </div>
    <p class="pgc-description"></p>
    <ul>
      
      
    	<li class="pgc-article" ga_event="click_pgc_news">
        <a href="http://www.toutiao.com/item/6432396216956355074" target="_blank" class="pgc-article-link">
          Spark基础-parallelize函数和makeRDD函数的区别
        </a>
    	</li>
      
      
      
    	<li class="pgc-article" ga_event="click_pgc_news">
        <a href="http://www.toutiao.com/item/6432416096078266881" target="_blank" class="pgc-article-link">
          oracle表的简单操作
        </a>
    	</li>
      
      
      
    	<li class="pgc-article" ga_event="click_pgc_news">
        <a href="http://www.toutiao.com/item/6432475803073643009" target="_blank" class="pgc-article-link">
          Java基础——关于访问权限的一道例题
        </a>
    	</li>
      
      
      
    	<li class="pgc-article" ga_event="click_pgc_news">
        <a href="http://www.toutiao.com/item/6432450792908653058" target="_blank" class="pgc-article-link">
          vue-schart：vue.js 的图表组件
        </a>
    	</li>
      
      
    </ul>
  </div>
</div>


    <div class="right-top-1 right-img" name="adetail_right*top_1" ad-cursor="1" ad_name="h_300*250_TB_456" done="1"><script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/ex(2)" id="tanx-s-mm_32479643_3494618_56064456" charset="gbk"></script><ins style="display:inline-block;padding:0;margin:0;width:300px;height:250px;*zoom:1;*display:inline; position:relative;" id="tanxssp-outer-conmm_32479643_3494618_56064456"><div id="tanxssp_con_mm_32479643_3494618_56064456" style="overflow:hidden;display:inline-block;position:relative;width:300px;height:250px;*display:inline;*zoom:1;font:12px/1.5 tahoma,&#39;Hiragino Sans GB&#39;,&#39;microsoft yahei&#39;,sans-serif;"><iframe id="tanxssp-tuwen-iframemm_32479643_3494618_56064456" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/creation-245057E3sJ6U0UZ8D-2830683.html" style="width:300px;height:250px" border="0" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" allowtransparency="true"></iframe><a id="iconmm_32479643_3494618_56064456" title="我也要申请橱窗推广" target="_blank" href="http://pro.taobao.com/index.htm?spm=a2320.7388781.1998051528.5.JOvNkN" style="overflow:hidden;width:15px;height:13px;right:20px;bottom:0px;display:block;position:absolute;cursor:pointer;z-index:250;">   <span id="icon_smallmm_32479643_3494618_56064456" style="border-right:2px solid #eee;float:none;width:13px;display:block;height:13px;box-sizing:content-box"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1DmcoJXXXXXavXpXXXXXXXXXX-26-26.png" border="0" style="width:13px;height:13px;margin:auto;display:block;"></span>   <span id="icon_bigmm_32479643_3494618_56064456" style="float:none;width:60px;height:13px;display: none;"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1Lt7aJXXXXXcjXVXXXXXXXXXX-117-26.png" style="width:60px;height:13px;margin:auto;display:block;" border="0/"></span></a><a id="sxmm_32479643_3494618_56064456" href="javascript:;" style="width:20px;height:13px;right:0px;bottom:0px;display:block;position:absolute;cursor:pointer;z-index:250;margin:0;">   <span id="sx1mm_32479643_3494618_56064456" style="float:none;width:20px;display:block;height:13px;"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1tWvVJFXXXXc_aXXXXXXXXXXX-40-26.png" style="width:20px;height:13px;margin:auto;display:block;min-height:13px;" border="0/"></span><div id="sxtipmm_32479643_3494618_56064456" style="display:none;position:absolute;left:-38px;bottom:13px;"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1upAiJXXXXXa5aXXXXXXXXXXX-116-30.png" style="width:58px;height:15px;margin:auto;display:block;min-height:15px;" border="0"></div></a></div></ins><a style="display:none;" id="tanx-a-mm_32479643_3494618_56064456"></a><script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/ex(3)"></script></div>
    <div riot-tag="hotVideo" class="hotVideo module" ga_event="click_video_recommend"><div class="module-head video-head"><a href="http://www.toutiao.com/video/" target="_blank">热门视频</a></div> <ul> <li class="hot-item"> <a class="hot-link" target="_blank" href="http://www.toutiao.com/group/6432210803227689217/"> <div class="module-pic video-image"> <img onload="this.style.opacity=1" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/288600025ad2c7eb9782" style="opacity: 1;"> </div> <i class="hot-tag video-tag"> <span>02:41</span> </i> <p class="hot-title module-title">小情侣吵架了，美女一招就让小伙开口说话了</p> </a> </li><li class="hot-item"> <a class="hot-link" target="_blank" href="http://www.toutiao.com/group/6379004002130575617/"> <div class="module-pic video-image"> <img onload="this.style.opacity=1" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/1630000350660de4192c" style="opacity: 1;"> </div> <i class="hot-tag video-tag"> <span>03:36</span> </i> <p class="hot-title module-title">毛主席是如何评价蒋介石的？他说了这么一番话</p> </a> </li><li class="hot-item"> <a class="hot-link" target="_blank" href="http://www.toutiao.com/group/6402943258243219714/"> <div class="module-pic video-image"> <img onload="this.style.opacity=1" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/19fb000061e1c6c38a8b" style="opacity: 1;"> </div> <i class="hot-tag video-tag"> <span>04:12</span> </i> <p class="hot-title module-title">三人打麻将合伙作弊出老千也没赢了这个瞎子</p> </a> </li><li class="hot-item"> <a class="hot-link" target="_blank" href="http://www.toutiao.com/group/6418126816459883010/"> <div class="module-pic video-image"> <img onload="this.style.opacity=1" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/1f29000c6843aef7056f" style="opacity: 1;"> </div> <i class="hot-tag video-tag"> <span>04:26</span> </i> <p class="hot-title module-title">集团老总被富二代嘲笑没钱没车，一个电话后，看傻对方</p> </a> </li><li class="hot-item"> <a class="hot-link" target="_blank" href="http://www.toutiao.com/group/6432434370846048513/"> <div class="module-pic video-image"> <img onload="this.style.opacity=1" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/2834000c9c6939b2bab2" style="opacity: 1;"> </div> <i class="hot-tag video-tag"> <span>09:42</span> </i> <p class="hot-title module-title">星爷的套路，你怎么看？</p> </a> </li><li class="hot-item"> <a class="hot-link" target="_blank" href="http://www.toutiao.com/group/6416189310731993346/"> <div class="module-pic video-image"> <img onload="this.style.opacity=1" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/1f7b000599cf911bf28f" style="opacity: 1;"> </div> <i class="hot-tag video-tag"> <span>04:48</span> </i> <p class="hot-title module-title">两位小协警到底拷了谁，市长，书记都过来道歉</p> </a> </li><!--riot placeholder--> </ul></div>
    <div class="right-top-2 right-img" name="adetail_right*top_2" ad-cursor="1" ad_name="h_300*250_TB_903" done="1"><script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/ex(4)" id="tanx-s-mm_32479643_3494618_75342903" charset="gbk"></script><ins style="display:inline-block;padding:0;margin:0;width:300px;height:250px;*zoom:1;*display:inline; position:relative;" id="tanxssp-outer-conmm_32479643_3494618_75342903"><div id="tanxssp_con_mm_32479643_3494618_75342903" style="overflow:hidden;display:inline-block;position:relative;width:300px;height:250px;*display:inline;*zoom:1;font:12px/1.5 tahoma,&#39;Hiragino Sans GB&#39;,&#39;microsoft yahei&#39;,sans-serif;"><iframe id="tanxssp-tuwen-iframemm_32479643_3494618_75342903" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/creation-245057E3sJ6U0UZ8D-2830683(1).html" style="width:300px;height:250px" border="0" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" allowtransparency="true"></iframe><a id="iconmm_32479643_3494618_75342903" title="我也要申请橱窗推广" target="_blank" href="http://pro.taobao.com/index.htm?spm=a2320.7388781.1998051528.5.JOvNkN" style="overflow:hidden;width:15px;height:13px;right:20px;bottom:0px;display:block;position:absolute;cursor:pointer;z-index:250;">   <span id="icon_smallmm_32479643_3494618_75342903" style="border-right:2px solid #eee;float:none;width:13px;display:block;height:13px;box-sizing:content-box"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1DmcoJXXXXXavXpXXXXXXXXXX-26-26.png" border="0" style="width:13px;height:13px;margin:auto;display:block;"></span>   <span id="icon_bigmm_32479643_3494618_75342903" style="float:none;width:60px;height:13px;display: none;"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1Lt7aJXXXXXcjXVXXXXXXXXXX-117-26.png" style="width:60px;height:13px;margin:auto;display:block;" border="0/"></span></a><a id="sxmm_32479643_3494618_75342903" href="javascript:;" style="width:20px;height:13px;right:0px;bottom:0px;display:block;position:absolute;cursor:pointer;z-index:250;margin:0;">   <span id="sx1mm_32479643_3494618_75342903" style="float:none;width:20px;display:block;height:13px;"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1tWvVJFXXXXc_aXXXXXXXXXXX-40-26.png" style="width:20px;height:13px;margin:auto;display:block;min-height:13px;" border="0/"></span><div id="sxtipmm_32479643_3494618_75342903" style="display:none;position:absolute;left:-38px;bottom:13px;"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1upAiJXXXXXa5aXXXXXXXXXXX-116-30.png" style="width:58px;height:15px;margin:auto;display:block;min-height:15px;" border="0"></div></a></div></ins><a style="display:none;" id="tanx-a-mm_32479643_3494618_75342903"></a><script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/ex(5)"></script></div>
    

    <div class="right-top-3 right-img" name="adetail_right*top_3" ad-cursor="1" ad_name="h_300*250_TB_4454" done="1"><script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/ex(6)" id="tanx-s-mm_32479643_3494618_107024454" charset="gbk"></script><ins style="display:inline-block;padding:0;margin:0;width:300px;height:250px;*zoom:1;*display:inline; position:relative;" id="tanxssp-outer-conmm_32479643_3494618_107024454"><div id="tanxssp_con_mm_32479643_3494618_107024454" style="overflow:hidden;display:inline-block;position:relative;width:300px;height:250px;*display:inline;*zoom:1;font:12px/1.5 tahoma,&#39;Hiragino Sans GB&#39;,&#39;microsoft yahei&#39;,sans-serif;"><iframe id="tanxssp-tuwen-iframemm_32479643_3494618_107024454" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/creation-245057E3sJ6U0UZ8D-2830683(2).html" style="width:300px;height:250px" border="0" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" allowtransparency="true"></iframe><a id="iconmm_32479643_3494618_107024454" title="我也要申请橱窗推广" target="_blank" href="http://pro.taobao.com/index.htm?spm=a2320.7388781.1998051528.5.JOvNkN" style="overflow:hidden;width:15px;height:13px;right:20px;bottom:0px;display:block;position:absolute;cursor:pointer;z-index:250;">   <span id="icon_smallmm_32479643_3494618_107024454" style="border-right:2px solid #eee;float:none;width:13px;display:block;height:13px;box-sizing:content-box"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1DmcoJXXXXXavXpXXXXXXXXXX-26-26.png" border="0" style="width:13px;height:13px;margin:auto;display:block;"></span>   <span id="icon_bigmm_32479643_3494618_107024454" style="float:none;width:60px;height:13px;display: none;"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1Lt7aJXXXXXcjXVXXXXXXXXXX-117-26.png" style="width:60px;height:13px;margin:auto;display:block;" border="0/"></span></a><a id="sxmm_32479643_3494618_107024454" href="javascript:;" style="width:20px;height:13px;right:0px;bottom:0px;display:block;position:absolute;cursor:pointer;z-index:250;margin:0;">   <span id="sx1mm_32479643_3494618_107024454" style="float:none;width:20px;display:block;height:13px;"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1tWvVJFXXXXc_aXXXXXXXXXXX-40-26.png" style="width:20px;height:13px;margin:auto;display:block;min-height:13px;" border="0/"></span><div id="sxtipmm_32479643_3494618_107024454" style="display:none;position:absolute;left:-38px;bottom:13px;"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1upAiJXXXXXa5aXXXXXXXXXXX-116-30.png" style="width:58px;height:15px;margin:auto;display:block;min-height:15px;" border="0"></div></a></div></ins><a style="display:none;" id="tanx-a-mm_32479643_3494618_107024454"></a><script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/ex(7)"></script></div>
    <div riot-tag="hotPicture" class="hotPicture module" ga_event="click_pictures_recommend"><div class="module-head pic-head"><a href="http://www.toutiao.com/news_image/" target="_blank">精彩图片</a></div> <ul> <li class="hot-item"> <a class="hot-link" target="_blank" href="http://www.toutiao.com/group/6408240243322044673/">  <div class="pic-style style_2"> <div class="module-pic pic-middle"><img alt="" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/1b7f0001be9b961b9426"></div> <div class="module-pic pic-small"><img alt="" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/1b7b000619692c4d4015"></div> <div class="module-pic pic-small"><img alt="" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/1b7f0001bea69467a86a"></div> </div>  <i class="hot-tag pic-tag"> <span>16图</span> </i> <p class="hot-title module-title">农民不摘树顶的柿子，这里有讲究，而且蕴含着深刻的人生哲理</p> </a> </li><li class="hot-item"> <a class="hot-link" target="_blank" href="http://www.toutiao.com/group/6431759890250924290/">  <div class="pic-style style_2"> <div class="module-pic pic-middle"><img alt="" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/288900025f7fdc150c5e"></div> <div class="module-pic pic-small"><img alt="" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/28880001d2d0e12b6398"></div> <div class="module-pic pic-small"><img alt="" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/28880001d2e1e01b7f35"></div> </div>  <i class="hot-tag pic-tag"> <span>10图</span> </i> <p class="hot-title module-title">农村父母初见“儿媳”的喜悦，一顿饭足以表达，女友却在菜园吃饱</p> </a> </li><li class="hot-item"> <a class="hot-link" target="_blank" href="http://www.toutiao.com/group/6432263798363521282/">  <div class="pic-style style_2"> <div class="module-pic pic-middle"><img alt="" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/288d00008757fc320d1f"></div> <div class="module-pic pic-small"><img alt="" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/26f30002134663c919ee"></div> <div class="module-pic pic-small"><img alt="" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/288b00030ec13775bb12"></div> </div>  <i class="hot-tag pic-tag"> <span>8图</span> </i> <p class="hot-title module-title">被“黑”惨的当红女星那么多，为何唯独她至今翻不了身？</p> </a> </li><li class="hot-item"> <a class="hot-link" target="_blank" href="http://www.toutiao.com/group/6407019419989443074/">   <div class="pic-style style_3"> <div class="module-pic pic-middle"><img alt="" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/1b780001ce98030878a2"></div> <div class="module-pic pic-small"><img alt="" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/1b750005fd73bdaf87a1"></div> <div class="module-pic pic-small"><img alt="" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/1b750005fd78935c84b3"></div> </div> <i class="hot-tag pic-tag"> <span>17图</span> </i> <p class="hot-title module-title">常吃能延缓衰老，这么做巨好吃，有人却嫌太吸油不吃它，太可惜了</p> </a> </li><!--riot placeholder--> </ul></div>
    <div class="right-top-4 right-img" name="adetail_right*top_4" ad-cursor="1" ad_name="h_300*250_TB_461" done="1"><script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/ex(8)" id="tanx-s-mm_32479643_3494618_56068461" charset="gbk"></script><ins style="display:inline-block;padding:0;margin:0;width:300px;height:250px;*zoom:1;*display:inline; position:relative;" id="tanxssp-outer-conmm_32479643_3494618_56068461"><div id="tanxssp_con_mm_32479643_3494618_56068461" style="overflow:hidden;display:inline-block;position:relative;width:300px;height:250px;*display:inline;*zoom:1;font:12px/1.5 tahoma,&#39;Hiragino Sans GB&#39;,&#39;microsoft yahei&#39;,sans-serif;"><iframe id="tanxssp-tuwen-iframemm_32479643_3494618_56068461" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/creation-245057E3sJ6U0UZ8D-2830683(3).html" style="width:300px;height:250px" border="0" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" allowtransparency="true"></iframe><a id="iconmm_32479643_3494618_56068461" title="我也要申请橱窗推广" target="_blank" href="http://pro.taobao.com/index.htm?spm=a2320.7388781.1998051528.5.JOvNkN" style="overflow:hidden;width:15px;height:13px;right:20px;bottom:0px;display:block;position:absolute;cursor:pointer;z-index:250;">   <span id="icon_smallmm_32479643_3494618_56068461" style="border-right:2px solid #eee;float:none;width:13px;display:block;height:13px;box-sizing:content-box"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1DmcoJXXXXXavXpXXXXXXXXXX-26-26.png" border="0" style="width:13px;height:13px;margin:auto;display:block;"></span>   <span id="icon_bigmm_32479643_3494618_56068461" style="float:none;width:60px;height:13px;display: none;"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1Lt7aJXXXXXcjXVXXXXXXXXXX-117-26.png" style="width:60px;height:13px;margin:auto;display:block;" border="0/"></span></a><a id="sxmm_32479643_3494618_56068461" href="javascript:;" style="width:20px;height:13px;right:0px;bottom:0px;display:block;position:absolute;cursor:pointer;z-index:250;margin:0;">   <span id="sx1mm_32479643_3494618_56068461" style="float:none;width:20px;display:block;height:13px;"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1tWvVJFXXXXc_aXXXXXXXXXXX-40-26.png" style="width:20px;height:13px;margin:auto;display:block;min-height:13px;" border="0/"></span><div id="sxtipmm_32479643_3494618_56068461" style="display:none;position:absolute;left:-38px;bottom:13px;"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1upAiJXXXXXa5aXXXXXXXXXXX-116-30.png" style="width:58px;height:15px;margin:auto;display:block;min-height:15px;" border="0"></div></a></div></ins><a style="display:none;" id="tanx-a-mm_32479643_3494618_56068461"></a><script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/ex(9)"></script></div>
    <div class="right-hover-1 right-img" id="imagindexhover" name="adetail_right*hover_1" ad-cursor="1" ad_name="h_300*250_TB_469" done="1"><script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/ex(10)" id="tanx-s-mm_32479643_3494618_63260469" charset="gbk"></script><ins style="display:inline-block;padding:0;margin:0;width:300px;height:250px;*zoom:1;*display:inline; position:relative;" id="tanxssp-outer-conmm_32479643_3494618_63260469"><div id="tanxssp_con_mm_32479643_3494618_63260469" style="overflow:hidden;display:inline-block;position:relative;width:300px;height:250px;*display:inline;*zoom:1;font:12px/1.5 tahoma,&#39;Hiragino Sans GB&#39;,&#39;microsoft yahei&#39;,sans-serif;"><iframe id="tanxssp-outer-iframemm_32479643_3494618_63260469" style="width: 300px; height: 250px;" border="0" frameborder="0" scrolling="no" marginwidth="0" allowtransparency="true" marginheight="0" src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/saved_resource.html"></iframe><a style="display:none !important;" id="tanx_frameanchor_mm_32479643_3494618_63260469" data-mid="17534123"></a><a id="iconmm_32479643_3494618_63260469" title="我也要申请橱窗推广" target="_blank" href="http://pro.taobao.com/index.htm?spm=a2320.7388781.1998051528.5.JOvNkN" style="overflow:hidden;width:15px;height:13px;right:20px;bottom:0px;display:block;position:absolute;cursor:pointer;z-index:250;">   <span id="icon_smallmm_32479643_3494618_63260469" style="border-right:2px solid #FBE008;float:none;width:13px;display:block;height:13px;box-sizing:content-box"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1DmcoJXXXXXavXpXXXXXXXXXX-26-26.png" border="0" style="width:13px;height:13px;margin:auto;display:block;"></span>   <span id="icon_bigmm_32479643_3494618_63260469" style="float:none;width:60px;height:13px;display: none;"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1Lt7aJXXXXXcjXVXXXXXXXXXX-117-26.png" style="width:60px;height:13px;margin:auto;display:block;" border="0/"></span></a><a id="sxmm_32479643_3494618_63260469" href="javascript:;" style="width:20px;height:13px;right:0px;bottom:0px;display:block;position:absolute;cursor:pointer;z-index:250;margin:0;">   <span id="sx1mm_32479643_3494618_63260469" style="float:none;width:20px;display:block;height:13px;"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1tWvVJFXXXXc_aXXXXXXXXXXX-40-26.png" style="width:20px;height:13px;margin:auto;display:block;min-height:13px;" border="0/"></span><div id="sxtipmm_32479643_3494618_63260469" style="display:none;position:absolute;left:-38px;bottom:13px;"><img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/TB1upAiJXXXXXa5aXXXXXXXXXXX-116-30.png" style="width:58px;height:15px;margin:auto;display:block;min-height:15px;" border="0"></div></a></div></ins><a style="display:none;" id="tanx-a-mm_32479643_3494618_63260469"></a><script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/ex(11)"></script></div>
  </div>
</div>

<div class="action-feedback">
  
</div>

<!-- 公共尾部 -->
<div id="footer">
    <div>
        <span class="fitem">© 2017 今日头条 </span>
        <a class="fitem" href="http://www.12377.cn/" target="_blank">中国互联网举报中心</a>
        <a class="fitem" href="http://www.miibeian.gov.cn/" target="_blank">京ICP证140141号</a>
        <a class="fitem" href="http://www.miibeian.gov.cn/" target="_blank">京ICP备12025439号-3</a>
        <a class="fitem" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11000002002023" target="_blank" ga_event="click_about">
            <img src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/gongan_d0289dc.png">京公网安备 11000002002023号
        </a>
    </div>
    <div>
        <a class="fitem" href="http://www.toutiao.com/license/" target="_blank">网络文化经营许可证</a>
        <a class="fitem" href="http://www.toutiao.com/a3642705768/" target="_blank">跟帖评论自律管理承诺书</a>
        <span class="fitem">违法和不良信息举报电话：010-58341833</span>
        <span class="fitem">公司名称：北京字节跳动科技有限公司</span>
    </div>
</div>



      <div riot-tag="promotion-ext" id="promotion-ext"></div>
    </div>

    <script>

        if (window.Raven) {
          if (1||Math.floor(Math.random()*2)) {
            Raven.config('http://key@m.toutiao.com/log/sentry/v2/51', {
              whitelistUrls: [/pstatp\.com/]
            }).install();
          }
        }

        window.globals = window.globals || {};

        taAnalysis && taAnalysis.setup({
          c: 'detail_article'
        });
        taAnalysis && taAnalysis.send('pageview', {});

        var antiPVHandler = utils.on(window, 'scroll', function(e) {
          taAnalysis && taAnalysis.send('antipageview', {});
          utils.off(window, 'scroll', antiPVHandler);
        });

        window.gaqpush = function (ga_action, ga_label){
            ga('send', 'event','detail_article' , ga_action, ga_label);
        };

        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        // ga('create', 'UA-28423340-5', 'auto');
        ga('create', 'UA-28423340-5', 'auto', {'sampleRate': 10});
        ga('send', 'pageview');

        utils.on(document.getElementsByTagName('body')[0], 'click', function(e) {
            var target = utils.getTarget(e),
                ga_event,
                ga_category,
                ga_label,
                ga_value;

            while(target && target.nodeName.toUpperCase() !== 'BODY') {
                ga_event = utils.getAttribute(target, 'ga_event');
                ga_category = utils.getAttribute(target, 'ga_category') || 'detail_article';
                ga_label = utils.getAttribute(target, 'ga_label');
                ga_value = utils.getAttribute(target, 'ga_value') || 1;

                ga_event && ga('send', 'event', ga_category, ga_event, ga_label, ga_value);
                ga_event && taAnalysis && taAnalysis.send('event', { ev: ga_event });
                target = target.parentNode;
            }
        });

        riot.observable(window);
    </script>
    <script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/toutiao.web.toutiao_pc-pc-fe_switch.js.下载"></script>
    <script>
      var PAGE_SWITCH = window['toutiao.web.toutiao_pc/pc/fe_switch'] || {};
    </script>
    

<script>
  // 用户信息
  var userInfo = {
      id: 7170056853,
      name: '东北小凤凰',
      avatarUrl: 'http://p0.pstatp.com/origin/3791/5070639578',
      isPgc: false,
      isOwner: false
  };


  var group = {
  	id: '6364580438367060226',
    item_id: '6364583209820226050',
  	repin:0,
  };

  var media = {
    user_id: 5841160544,
  	id:5841160544,
  	like:true
  };

  var siblingList = [{"comments_count":450,"is_related":true,"is_feed_ad":false,"is_diversion_page":false,"title":"\u96be\u5f97\u4e00\u89c1\uff1a\u56fd\u5bb6\u4e3b\u5e2d\u5218\u5c11\u5947\u7684\u8bb2\u8bdd\uff01","single_mode":true,"gallary_image_count":0,"middle_mode":true,"has_video":true,"video_duration_str":"01:28","source_url":"\/group\/6292321946507936258\/","source":"\u4e00\u70b9\u70b9","more_mode":null,"article_genre":"video","has_gallery":false,"video_play_count":4203014,"image_url":"http:\/\/p3.pstatp.com\/list\/190x124\/71c000750086e331f26","group_id":"6292321946507936258","media_url":"\/c\/user\/6195587961\/"},{"comments_count":20282,"media_avatar_url":"http:\/\/p3.pstatp.com\/large\/78f0005e7340a6c0133","is_feed_ad":false,"is_diversion_page":false,"title":"\u65e5\u672c\u9009\u624b\u88ab\u4e2d\u56fd\u4e52\u4e53\u8650\u54ed\uff0c\u6559\u7ec3\u8bf4\u4f60\u8ba9\u7740\u5979\u70b9\uff0c\u4e8e\u662f\u8fd0\u52a8\u5458\u8fd9\u6837\u8ba9\u4e86","single_mode":true,"gallary_image_count":0,"middle_mode":true,"has_video":true,"video_duration_str":"03:21","source_url":"\/group\/6317080297842999554\/","source":"\u6c11\u54e5\u89e3\u8bf4","more_mode":null,"article_genre":"video","has_gallery":false,"video_play_count":6177886,"image_url":"http:\/\/p1.pstatp.com\/list\/190x124\/c0c00002aa92636ec15","group_id":"6317080297842999554","is_related":true,"media_url":"\/c\/user\/6827899831\/"},{"comments_count":12727,"is_related":true,"is_feed_ad":false,"is_diversion_page":false,"title":"\u8c01\u6562\u5f00\u7b2c\u4e00\u67aa\uff01\u770b\u770b\u6211\u56fd\u8d85\u9707\u64bc\u519b\u4e8b\u529b\u91cf\uff1a\u5927\u8d5e\u7956\u56fd\uff01","single_mode":true,"gallary_image_count":0,"middle_mode":true,"has_video":true,"video_duration_str":"03:02","source_url":"\/group\/6298908466601787905\/","source":"\u519b\u9012","more_mode":null,"article_genre":"video","has_gallery":false,"video_play_count":5221625,"image_url":"http:\/\/p3.pstatp.com\/list\/190x124\/90e0005b71c1c15306d","group_id":"6298908466601787905","media_url":"\/c\/user\/5715302584\/"},{"comments_count":54160,"media_avatar_url":"http:\/\/p3.pstatp.com\/large\/78f000884cf40203ac4","is_feed_ad":false,"is_diversion_page":false,"title":"\u4e2d\u56fd\u4eba\u662f\u4e0d\u53ef\u6218\u80dc\u7684","single_mode":true,"gallary_image_count":0,"middle_mode":true,"has_video":true,"video_duration_str":"04:48","source_url":"\/group\/6300007771311964674\/","source":"\u4fe1\u4ef0\u7684\u5c0a\u8d35","more_mode":null,"article_genre":"video","has_gallery":false,"video_play_count":4184669,"image_url":"http:\/\/p3.pstatp.com\/list\/190x124\/90e0009ce8d0c4c8945","group_id":"6300007771311964674","is_related":true,"media_url":"\/c\/user\/3607688975\/"},{"comments_count":16160,"media_avatar_url":"http:\/\/p1.pstatp.com\/large\/bc30007a7d593c64939","is_feed_ad":false,"is_diversion_page":false,"title":"\u795e\u4e00\u822c\u7684\u5b58\u5728\uff0c\u81f3\u4eca\u6ca1\u6709\u54ea\u4e00\u4f4d\u660e\u661f\u53ef\u4ee5\u4e0e\u4e4b\u76f8\u6bd4","single_mode":true,"gallary_image_count":0,"middle_mode":true,"has_video":true,"video_duration_str":"03:54","source_url":"\/group\/6291632956020621826\/","source":"\u5a31\u4e50\u6700\u5c0f\u5496","more_mode":null,"article_genre":"video","has_gallery":false,"video_play_count":4175967,"image_url":"http:\/\/p3.pstatp.com\/list\/190x124\/71c00059e0fed24705a","group_id":"6291632956020621826","is_related":true,"media_url":"\/c\/user\/6519716307\/"},{"comments_count":37917,"is_related":true,"is_feed_ad":false,"is_diversion_page":false,"title":"\u5b9e\u62cd\uff1a\u6c34\u5e93\u91cc\u7684\u60ca\u9b42\u4e00\u5e55\uff0c\u8bf7\u4e00\u5b9a\u770b\u5b8c\uff01","single_mode":true,"gallary_image_count":0,"middle_mode":true,"has_video":true,"video_duration_str":"02:30","source_url":"\/group\/6287322447033139714\/","source":"\u6cf0\u5b89\u90a3\u4e9b\u4e8b","more_mode":null,"article_genre":"video","has_gallery":false,"video_play_count":9387245,"image_url":"http:\/\/p3.pstatp.com\/list\/190x124\/5890011a0fc8bb48892","group_id":"6287322447033139714","media_url":"\/c\/user\/3610331176\/"},{"comments_count":12675,"media_avatar_url":"http:\/\/p3.pstatp.com\/large\/41200033204317c2828","is_feed_ad":false,"is_diversion_page":false,"title":"\u786c\u6c14\uff01\u5357\u6d77\u5b98\u5175\u6700\u5f3a\u519b\u4ee4\uff1a\u5357\u6d77\u6709\u6211\u4eec\uff0c\u7956\u56fd\u8bf7\u653e\u5fc3\uff01","single_mode":true,"gallary_image_count":0,"middle_mode":true,"has_video":true,"video_duration_str":"02:39","source_url":"\/group\/6296668997312053761\/","source":"\u7b2c\u4e00\u519b\u60c5","more_mode":null,"article_genre":"video","has_gallery":false,"video_play_count":2346626,"image_url":"http:\/\/p1.pstatp.com\/list\/190x124\/7da000732a5cc297c9a","group_id":"6296668997312053761","is_related":true,"media_url":"\/c\/user\/6264649967\/"},{"comments_count":5780,"is_related":true,"is_feed_ad":false,"is_diversion_page":false,"title":"\u519c\u6c11\u5de5\u906d\u53f8\u673a\u552e\u7968\u5458\u5201\u96be\uff0c\u5927\u7237\u9a82\u4eba\u4e0d\u5e26\u810f\u5b57\uff0c\u51e0\u53e5\u8bdd\u8bf4\u5f97\u771f\u6f02\u4eae\uff01","single_mode":true,"gallary_image_count":0,"middle_mode":true,"has_video":true,"video_duration_str":"05:02","source_url":"\/group\/6298556574247944706\/","source":"\u611f\u52a8\u65f6\u523b","more_mode":null,"article_genre":"video","has_gallery":false,"video_play_count":7919167,"image_url":"http:\/\/p3.pstatp.com\/list\/190x124\/91100044b3b2e69184a","group_id":"6298556574247944706","media_url":"\/c\/user\/4505794342\/"},{"comments_count":11245,"is_related":true,"is_feed_ad":false,"is_diversion_page":false,"title":"\u5168\u56fd\u90fd\u5728\u66dd\u5149\u4ed6\uff01\u8fd9\u4e2a\u8001\u5e08\u8981\u706b\uff01","single_mode":true,"gallary_image_count":0,"middle_mode":true,"has_video":true,"video_duration_str":"06:58","source_url":"\/group\/6293379777638171137\/","source":"\u82f1\u5fb7\u5fae\u5b9d","more_mode":null,"article_genre":"video","has_gallery":false,"video_play_count":3431203,"image_url":"http:\/\/p1.pstatp.com\/list\/190x124\/71a0009b5abf2250df3","group_id":"6293379777638171137","media_url":"\/c\/user\/5820641997\/"},{"comments_count":16180,"media_avatar_url":"http:\/\/p3.pstatp.com\/large\/411001d72938eeb75c6","is_feed_ad":false,"is_diversion_page":false,"title":"\u5973\u5b50\u53d1\u751f\u8f66\u7978\u811a\u88ab\u649e\u6b8b\uff01\u63a5\u4e0b\u6765\u7684\u753b\u9762\u8ba9\u56f4\u89c2\u7fa4\u4f17\u5403\u60ca\u4e86\uff01","single_mode":true,"gallary_image_count":0,"middle_mode":true,"has_video":true,"video_duration_str":"00:28","source_url":"\/group\/6310401237863596289\/","source":"\u9e7f\u5b50\u89c6\u754c","more_mode":null,"article_genre":"video","has_gallery":false,"video_play_count":2538890,"image_url":"http:\/\/p3.pstatp.com\/list\/190x124\/b0b000209b65e730ec6","group_id":"6310401237863596289","is_related":true,"media_url":"\/c\/user\/6591527520\/"},{"comments_count":6602,"is_related":true,"is_feed_ad":false,"is_diversion_page":false,"title":"\u7537\u5b50\u6d77\u4e0a\u9493\u9c7c\u65f6\u611f\u89c9\u9493\u7ebf\u5f02\u5e38\u6c89\u91cd\uff0c\u6700\u540e\u9493\u4e0a\u6765\u7684\u5bb6\u4f19\u628a\u4ed6\u5413\u4e86\u4e00\u8df3","single_mode":true,"gallary_image_count":0,"middle_mode":true,"has_video":true,"video_duration_str":"01:00","source_url":"\/group\/6286534798869529090\/","source":"\u706b\u9f99\u679c\u4f20\u5a92","more_mode":null,"article_genre":"video","has_gallery":false,"video_play_count":3170802,"image_url":"http:\/\/p3.pstatp.com\/list\/190x124\/6ce00053c7f8fb9718c","group_id":"6286534798869529090","media_url":"\/c\/user\/6044739145\/"},{"comments_count":3020,"media_avatar_url":"http:\/\/p3.pstatp.com\/large\/16aa00080aeb1ad82e8e","is_feed_ad":false,"is_diversion_page":false,"title":"\u5468\u661f\u9a70\u5e26\u9648\u767e\u7965\u6284\u9ccc\u62dc\u7684\u5bb6\uff01\u8fd9\u4e00\u6bb5\u6211\u770b\u4e8610\u904d\uff0c\u6c38\u8fdc\u4e0d\u4f1a\u89c9\u5f97\u817b","single_mode":true,"gallary_image_count":0,"middle_mode":true,"has_video":true,"video_duration_str":"03:23","source_url":"\/group\/6419898683222917634\/","source":"\u5317\u57ce\u6545\u4e8b","more_mode":null,"article_genre":"video","has_gallery":false,"video_play_count":4519309,"image_url":"http:\/\/p1.pstatp.com\/list\/190x124\/1f8e00049f3cae36ef02","group_id":"6419898683222917634","is_related":true,"media_url":"\/c\/user\/55757148500\/"},{"comments_count":12215,"is_related":true,"is_feed_ad":false,"is_diversion_page":false,"title":"\u519b\u4e8b\u6f14\u4e60\u4e00\u77ac\u95f4\uff0c\u8fd9\u624d\u662f\u771f\u6b63\u4e2d\u56fd\u597d\u58f0\u97f3\uff01","single_mode":true,"gallary_image_count":0,"middle_mode":true,"has_video":true,"video_duration_str":"02:36","source_url":"\/group\/6304740675246096898\/","source":"\u6218\u53cb\u60c5\u7f18","more_mode":null,"article_genre":"video","has_gallery":false,"video_play_count":3793205,"image_url":"http:\/\/p1.pstatp.com\/list\/190x124\/9e300078934df159556","group_id":"6304740675246096898","media_url":"\/c\/user\/5782516006\/"},{"comments_count":10682,"media_avatar_url":"http:\/\/p3.pstatp.com\/large\/4110004fd2681eb7cb7","is_feed_ad":false,"is_diversion_page":false,"title":"\u5982\u679c\u4f60\u5bf9\u751f\u6d3b\u5931\u53bb\u4fe1\u5fc3\uff0c\u90a3\u4e48\u8bf7\u770b\u4e0b\u8fd9\u4e2a\u89c6\u9891\u5427","single_mode":true,"gallary_image_count":0,"middle_mode":true,"has_video":true,"video_duration_str":"03:15","source_url":"\/group\/6293274175373050369\/","source":"\u52a8\u7269\u96c6\u7ed3\u53f7","more_mode":null,"article_genre":"video","has_gallery":false,"video_play_count":3795252,"image_url":"http:\/\/p1.pstatp.com\/list\/190x124\/72100070329606cbfee","group_id":"6293274175373050369","is_related":true,"media_url":"\/c\/user\/6093141211\/"},{"comments_count":539,"media_avatar_url":"http:\/\/p3.pstatp.com\/large\/41200167c12e1d04450","is_feed_ad":false,"is_diversion_page":false,"title":"\u8fd9\u624d\u662f\u8ba9\u654c\u4eba\u80c6\u98a4\u7684\u4e2d\u56fd\u89e3\u653e\u519b","single_mode":true,"gallary_image_count":0,"middle_mode":true,"has_video":true,"video_duration_str":"02:44","source_url":"\/group\/6287868315289256450\/","source":"\u5927\u56fd\u4e4b\u5175\u957f","more_mode":null,"article_genre":"video","has_gallery":false,"video_play_count":2442801,"image_url":"http:\/\/p3.pstatp.com\/list\/190x124\/5890012acab342e9976","group_id":"6287868315289256450","is_related":true,"media_url":"\/c\/user\/6241153515\/"},{"comments_count":36852,"is_related":true,"is_feed_ad":false,"is_diversion_page":false,"title":"\u6d3b\u4e8625\u5e74\uff0c\u7b2c\u4e00\u6b21\u9047\u5230\u5f00\u8f66\u8fd9\u4e48\u56a3\u5f20\u7684\u4eba\uff0c\u770b\u5230\u6700\u540e\u6211\u4e5f\u5c31\u653e\u5fc3\u4e86","single_mode":true,"gallary_image_count":0,"middle_mode":true,"has_video":true,"video_duration_str":"02:05","source_url":"\/group\/6296679029898478081\/","source":"\u517b\u8f66\u90a3\u70b9\u4e8b","more_mode":null,"article_genre":"video","has_gallery":false,"video_play_count":6360456,"image_url":"http:\/\/p3.pstatp.com\/list\/190x124\/71c0012210e848faf85","group_id":"6296679029898478081","media_url":"\/c\/user\/3723783031\/"}];
</script>

<script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/article_07b03ea.js.下载"></script>

<script>
  riot.mount('wtopbar', {
    home: false,
    userInfo: userInfo
  });
  riot.mount('login');
  riot.mount('wsearch');
</script>

<script>
  riot.mount('snsbox',{
    share_url:"http://www.toutiao.com/item/6364583209820226050/",
    abstract:"在互联网时代中，后台系统架构，经常可以听到高可用集群、负载均衡集群之类的系统架构解决方案，其中，负载均衡有基于硬件的F5、Big-IP等，也有基于软件的LVS(基于Linux操作系统实现，性能可以和基于硬件的性能媲美)、Nginx、HAProxy(基于第三方应用实现)等，本文介绍".replace(/<br \/>/ig, ''),
    group_id:"6364580438367060226",
    comments_count: utils.numFormat('1', 1, 'en'),
    fix: true
  });
  riot.mount('hotVideo');
  riot.mount('hotPicture');
  riot.mount('feedback');
</script>

<script>
  riot.mount('comment', {
    group_id: '6364580438367060226',
    item_id: '6364583209820226050' || '',
    comments_count: utils.numCutByComma('1'),
    userInfo: userInfo,
    ban_comment: 0 + 0
  });
</script>

<script>
  riot.mount('relatedChannel', {
    tag: '__all__'
  });
</script>
<script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/tt-video.js.下载" charset="utf-8" crossorigin="anonymous"></script>
<script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/video_a99722f.js.下载" crossorigin="anonymous"></script>
<!--[if lt IE 9]>
  <script src="//s3.pstatp.com/toutiao/resource/ntoutiao_web/page/detail/article_detail/article_main/audio/audio_ie8_8f6ccc5.js" charset="utf-8"></script>
<![endif]-->
<script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/audio_a4dce16.js.下载" crossorigin="anonymous"></script>
<script type="text/javascript">
window.jsblock=function(){
  setTimeout(function () {
    window._czc && _czc.push(['_trackEvent', 'jsblock', 'article', 'block', 1, ''])
  }, 1500);
}
</script>
<script>
  ;(function(win) {
    var picVersion = win.PAGE_SWITCH && win.PAGE_SWITCH.picVersion;
    if (!picVersion) {
      var d = new Date();
      picVersion = d.getFullYear() + '' + (d.getMonth() + 1) + '' + d.getDate() + '_01';
    }
    var url = '//s3a.pstatp.com/toutiao/gallery_img/dist/img.min.js?ver=' + picVersion;
    window.utils && window.utils.loadScript(url, function() {
      setTimeout(function() {
        window.trigger('ad_put');
      });
    }, function() {
      return window.jsblock();
    });
  })(window);
</script><script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/img.min.js.下载" crossorigin="anonymous"></script>
<script>
  var TT_PERF_CONFIG = {
      metrics: true,
      percent: 20
  };
</script>
<script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/ta.js.下载"></script>

    <script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/z_stat.php" language="JavaScript"></script><script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/core.php" charset="utf-8" type="text/javascript"></script><a href="http://www.cnzz.com/stat/website.php?web_id=1259612802" target="_blank" title="站长统计">站长统计</a>
    <script src="./HAProxy的安装与使用 - 今日头条(www.toutiao.com)_files/promotion_c49e139.js.下载"></script>
    <script>
      var is360 = window.uaCheck && window.uaCheck.is360se();
      var isShowed = window.localStorage && window.localStorage.getItem('is_ext_pop_showed');
      var isInstalled = window.sessionStorage && window.sessionStorage.getItem('is_ext_installed');
      if (is360 && isShowed !== '1' && isInstalled !== '1') {
        window.riot && riot.mount('#promotion-ext', 'promotion');
      }
    </script>


</body></html>