<!DOCTYPE html>
<!-- saved from url=(0049)https://www.cnblogs.com/bigben0123/p/9008313.html -->
<html lang="zh-cn"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="referrer" content="same-origin">
<title>一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园</title>
<link type="text/css" rel="stylesheet" href="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/bundle-SimpleMemory.css">
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/bundle-SimpleMemory-mobile.css">
<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/bigben0123/rss">
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/bigben0123/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/bigben0123/wlwmanifest.xml">
<script async="" src="https://www.google-analytics.com/analytics.js"></script><script src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/jquery-2.2.0.min.js.下载"></script>
<script type="text/javascript">var currentBlogApp = 'bigben0123', cb_enable_mathjax=false;var isLogined=false;</script>
<script src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/blog-common.js.下载" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>

<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
	<a id="lnkBlogLogo" href="http://www.cnblogs.com/bigben0123/"><img id="blogLogo" src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/logo.gif" alt="返回主页"></a>			
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="http://www.cnblogs.com/bigben0123/">Bigben</a></h1>
<h2></h2>



		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li><a id="blog_nav_sitehome" class="menu" href="http://www.cnblogs.com/">博客园</a></li>
<li><a id="blog_nav_myhome" class="menu" href="http://www.cnblogs.com/bigben0123/">首页</a></li>
<li><a id="blog_nav_newpost" class="menu" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a></li>
<li><a id="blog_nav_contact" class="menu" rel="nofollow" href="https://msg.cnblogs.com/send/Bigben">联系</a></li>
<li><a id="blog_nav_rss" class="menu" href="http://www.cnblogs.com/bigben0123/rss">订阅</a>
<!--<a id="blog_nav_rss_image" class="aHeaderXML" href="http://www.cnblogs.com/bigben0123/rss"><img src="//www.cnblogs.com/images/xml.gif" alt="订阅" /></a>--></li>
<li><a id="blog_nav_admin" class="menu" rel="nofollow" href="https://i.cnblogs.com/">管理</a></li>
</ul>
		<div class="blogStats">
			
			<div id="blog_stats">
<span id="stats_post_count">随笔 - 566&nbsp; </span>
<span id="stats_article_count">文章 - 12&nbsp; </span>
<span id="stats-comment_count">评论 - 9</span>
</div>
			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		
<div id="post_detail">
<!--done-->
<div id="topics">
	<div class="post">
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/bigben0123/p/9008313.html">一个可供中小团队参考的微服务架构技术栈</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body"><h2 id="activity-name" class="rich_media_title"><a href="https://mp.weixin.qq.com/s?__biz=MzIwMzg1ODcwMw==&amp;mid=2247487775&amp;idx=1&amp;sn=a4edf7c541ccbdfef1b8aef347efc4d0&amp;chksm=96c9a77fa1be2e69c9a44302ef893b08a081bfc9644c11f28fadd92d01bce235ed70b190c7b2&amp;scene=0&amp;key=8cc42cb313e9869e742dbc5394e76ab0e2d88192e56bc837d362a6e3160f009c7d93453c323ecad42b7208758010e3b600a3926b128926385629b6e25660a757438d6e64dc2c0da236814fca4ee2ae31&amp;ascene=1&amp;uin=MjgwMTEwNDQxNg%3D%3D&amp;devicetype=Windows-QQBrowser&amp;version=6103000b&amp;lang=zh_CN&amp;pass_ticket=FjxrhbglEwLAUfMKz5pV2AoxOYuJUDWHTw9%2B4tpdetw0aLby1PRM%2B09x0hqgQm%2Bl" target="_blank">一个可供中小团队参考的微服务架构技术栈</a></h2>
<div id="meta_content" class="rich_media_meta_list"><a id="profileBt" class="rich_media_meta rich_media_meta_link rich_media_meta_nickname"></a>聊聊架构&nbsp;<span class="rich_media_meta rich_media_meta_text"><span class="rich_media_meta rich_media_meta_text">2018-05-07</span></span>
<p class="rich_media_meta_primary rich_media_meta_text">作者&nbsp;杨波</p>
</div>
<div id="js_content" class="rich_media_content "><img src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/640" alt="" data-ratio="0.665625" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/UicsouxJOkBfd0Pic2LmCJvAtFKLEOBsjibEJFTKTzy3hwz7WrhBtwyRJFroQyPwfSkF64GCjRYCwNlAaww8fiaCicg/640?wx_fmt=jpeg" data-type="jpeg" data-w="640" data-fail="0">作者 | &nbsp;杨波编辑 | &nbsp;张浩
<p>近年，Spring Cloud 俨然已经成为微服务开发的主流技术栈，在国内开发者社区非常火爆。我近年一直在一线互联网公司（携程，拍拍贷等）开展微服务架构实践，根据我个人的一线实践经验和我平时对 Spring Cloud 的调研，我认为 Spring Cloud 技术栈中的有些组件离生产级开发尚有一定距离。比方说 Spring Cloud Config 和 Spring Cloud Sleuth 都是 Pivotal 自研产品，尚未得到大规模企业级生产应用，很多企业级特性缺失（具体见我后文描述）。</p>
<p>另外 Spring Cloud 体系还缺失一些关键的微服务基础组件，比如 Metrics 监控，健康检查和告警等。所以我在参考 Spring Cloud 微服务技术栈的基础上，结合自身的实战落地经验，也结合国内外一线互联网公司（例如 Netflix，点评，携程，Zalando 等）的开源实践，综合提出更贴近国内技术文化特色的轻量级的微服务参考技术栈。希望这个参考技术栈对一线的架构师（或者是初创公司）有一个好的指导，能够少走弯路，快速落地微服务架构。</p>
<p>这个参考技术栈和总体架构如下图所示：</p>
<p><img src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/640(1)" alt="" data-ratio="0.47625" data-src="https://mmbiz.qpic.cn/mmbiz_png/UicsouxJOkBfd0Pic2LmCJvAtFKLEOBsjibhAgKEExh2b0KUQIbSyUcu1SrseibB1ztiaUX6vF5fKOD6t5tDaHIlH7Q/640?wx_fmt=png" data-type="png" data-w="800" data-fail="0"></p>
<p>主要包含 11 大核心组件，分别是：</p>
<p><strong>核心支撑组件</strong></p>
<ol class="list-paddingleft-2">
<li>
<p>服务网关 Zuul</p>
</li>
<li>
<p>服务注册发现 Eureka+Ribbon</p>
</li>
<li>
<p>服务配置中心 Apollo</p>
</li>
<li>
<p>认证授权中心 Spring Security OAuth2</p>
</li>
<li>
<p>服务框架 Spring MVC/Boot</p>
</li>
</ol>
<p><strong>监控反馈组件</strong></p>
<ol class="list-paddingleft-2">
<li>
<p>数据总线 Kafka</p>
</li>
<li>
<p>日志监控 ELK</p>
</li>
<li>
<p>调用链监控 CAT</p>
</li>
<li>
<p>Metrics 监控 KairosDB</p>
</li>
<li>
<p>健康检查和告警 ZMon</p>
</li>
<li>
<p>限流熔断和流聚合 Hystrix/Turbine</p>
</li>
</ol>
<p>后续章节我会依次简单介绍这 11 个组件，在《2018 波波的微服务基础架构和实践》课程中，我会对其中的 8 款核心组件的架构设计和生产实践进行深度剖析，感兴趣的同学可以扫描下方二维码了解详情。</p>
<p><img src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/640(2)" alt="" data-ratio="0.33375" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/UicsouxJOkBfd0Pic2LmCJvAtFKLEOBsjibCEoiaIdMORh7nlcLuaWCjiaV1UWrMBiaQricnicdk9yPpk1FahLOfPouUicw/640?wx_fmt=jpeg" data-type="jpeg" data-w="800" data-fail="0"></p>
核心支撑组件服务网关 Zuul
<p>2013 年左右，InfoQ 曾经对前 Netflix 架构总监 Adrian Cockcroft 有过一次专访 [附录 1]，其中有问 Adrian：“Netflix 开源这么多项目，你认为哪一个是最不可或缺的 (MOST Indispensable)”，Adrian 回答说：“在 NetflixOSS 开源项目中，有一个容易被忽略，但是 Netflix 最强大的基础服务之一，它就是 Zuul 网关服务。Zuul 网关主要用于智能路由，同时也支持认证，区域和内容感知路由，将多个底层服务聚合成统一的对外 API。Zuul 网关的一大亮点是动态可编程，配置可以秒级生效”。从 Adrian 的回答中，我们可以感受到 Zuul 网关对微服务基础架构的重要性。</p>
<p><img src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/640(3)" alt="" data-ratio="0.8089668615984406" data-src="https://mmbiz.qpic.cn/mmbiz_png/UicsouxJOkBfd0Pic2LmCJvAtFKLEOBsjibwumUWzBVFUDIFGyOlPmiamh2CTHtydlX7BpyNGdB21xHiamnBeEAnTZw/640?wx_fmt=png" data-type="png" data-w="513" data-fail="0"></p>
<p>Zuul 在英文中是一种怪兽，星际争霸中虫族里头也有 Zuul，Netflix 为网关起名 Zuul，寓意看门神兽。</p>
<p>Zuul 网关在 Netflix 经过生产级验证，在纳入 Spring Cloud 体系之后，在社区中也有众多成功的应用。Zuul 网关在携程（日流量超 50 亿），拍拍贷等公司也有成功的落地实践，是微服务基础架构中网关一块的首选。其它开源产品像 Kong 或者 Nginx 等也可以改造支持网关功能，但是较复杂门槛高一点。</p>
<p>Zuul 网关虽然不完全支持异步，但是同步模型反而使它简单轻量，易于编程和扩展，当然同步模型需要做好限流熔断（和限流熔断组件 Hystrix 配合），否则可能造成资源耗尽甚至雪崩效应（cascading failure）。</p>
服务注册发现 Eureka + Ribbon
<p>针对微服务注册发现场景，社区里头的开源产品当中，经过生产级大流量验证的，目前只有 Netflix Eureka 一个，它也已经纳入 Spring Cloud 体系，在社区中有众多成功应用，例如携程 Apollo 配置中心也是使用 Eureka 做软负载。其它产品如 Zookeeper/Etcd/Consul 等，都是比较通用的产品，还需要进一步封装定制才可生产级使用。Eureka 支持跨数据中心高可用，但它是 AP 最终一致系统，不是强一致性系统。</p>
<p><img src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/640(4)" alt="" data-ratio="0.6939799331103679" data-src="https://mmbiz.qpic.cn/mmbiz_png/UicsouxJOkBfd0Pic2LmCJvAtFKLEOBsjiblicbDTNaVPtM18XcibnISZjvlEYWvgBe4q3zhG4lHh8JURdtd0TADXZQ/640?wx_fmt=png" data-type="png" data-w="598" data-fail="0"></p>
<p>Ribbon 是可以和 Eureka 配套对接的客户端软负载库，在 Eureka 的配合下能够支持多种灵活的动态路由和负载均衡策略。内部微服务直连可以直接走 Ribbon 客户端软负载，网关上也可以部署 Ribbon，这时网关相当于一个具有路由和软负载能力的超级客户端。</p>
<p><img src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/640(5)" alt="" data-ratio="0.8402777777777778" data-src="https://mmbiz.qpic.cn/mmbiz_png/UicsouxJOkBfd0Pic2LmCJvAtFKLEOBsjibdORQU17ElOZc0508SOuOpg4JicNRWoxib8148wotcfv580gmiaibA1yxicQ/640?wx_fmt=png" data-type="png" data-w="288" data-fail="0"></p>
<p>Ribbon 是蝴蝶结的意思。</p>
服务配置中心 Apollo
<p>Spring Cloud 体系里头有个 Spring Cloud Config 产品，但是功能远远达不到生产级，只能小规模场景下用，中大规模企业级场景不建议采用。携程框架研发部开源的 Apollo 是一款在携程和其它众多互联网公司生产落地下来的产品，开源两年多，目前在 github 上有超过 4k 星，非常成功，文档齐全也是它的一大亮点，推荐作为企业级的配置中心产品。</p>
<p>Apollo 支持完善的管理界面，支持多环境，配置变更实时生效，权限和配置审计等多种生产级功能。Apollo 既可以用于连接字符串等常规配置场景，也可用于发布开关（Feature Flag）和业务配置等高级场景。在《2018 波波的微服务基础架构和实践》课程中，第二个模块就配置中心相关主题，会深度剖析携程 Apollo 的架构和实践，预计 6 月份推出，欢迎大家关注学习。</p>
<p><img src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/640(6)" alt="" data-ratio="0.35714285714285715" data-src="https://mmbiz.qpic.cn/mmbiz_png/UicsouxJOkBfd0Pic2LmCJvAtFKLEOBsjibk5MCicE4zcZp7ruZV9DuLKaVXvT4UtxbJQ6M4WbGPhqXnGFtwQvLg5w/640?wx_fmt=png" data-type="png" data-w="490" data-fail="0"></p>
<p>阿波罗是希腊神话中太阳神的意思</p>
认证授权中心 Spring Security OAuth2
<p>目前开源社区还没有特别成熟的微服务安全认证中心产品，之前我工作过的一些中大型互联网公司，比如携程，唯品会等，在这一块基本都是定制自研的，但是对一般企业来说，定制自研还是有门槛的。OAuth2 是一种基于令牌 Token 的授权框架，已经得到众多大厂（Google, Facebook, Twitter, Microsoft 等）的支持，可以认为是事实上的微服务安全协议标准，适用于开放平台联合登录，现代微服务安全（包括单页浏览器 App/ 无线原生 App/ 服务器端 WebApp 接入微服务，以及微服务之间调用等场景），和企业内部应用认证授权 (IAM/SSO) 等多种场景。</p>
<p>Spring Security OAuth2 是 Spring Security 基础上的一个扩展，支持四种主要的 OAuth2 Flows，基本可以作为微服务认证授权中心的推荐产品。但是 Spring Security OAuth2 还只是一个框架，不是一个端到端的开箱即用的产品，企业级应用仍需在其上进行定制，例如提供 Web 端管理界面，对接企业内部的用户认证登录系统，使用 Cache 缓存令牌，和微服务网关对接等，才能作为生产级使用。在《2018 波波的微服务基础架构和实践》课程中，第一个模块就是微服务安全架构和实践相关主题，会深度剖析 OAuth2 原理和 Spring Security OAuth2 实践，欢迎大家关注学习。</p>
<p><img src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/640(7)" alt="" data-ratio="0.305982905982906" data-src="https://mmbiz.qpic.cn/mmbiz_png/UicsouxJOkBfd0Pic2LmCJvAtFKLEOBsjibZwt6g3zKDUOJXrAjicaWiatrxPTXaQgJwP2VOZZ2d6F6TKRBHriaxqINA/640?wx_fmt=png" data-type="png" data-w="585" data-fail="0"></p>
<p>Spring Security OAuth2 是 Spring Security 框架的一个扩展。</p>
服务框架 Spring/Boot
<p>Spring 可以说是史上最成功的 Web App/API 开发框架之一，它融入了 Java 社区中多年来沉淀下来的最佳实践，虽然有将近 15 年历史，但目前的社区活跃度仍呈上升趋势。Spring Boot 在 Spring 的基础上进一步打包封装，提供更贴心的 Starter 工程，自启动能力，自动依赖管理，基于代码的配置等特性进一步降低接入门槛。另外 Spring Boot 也提供 actuator 这样的生产级监控特性，支持 DevOps 研发模式，它是微服务开发框架的推荐首选。</p>
<p>REST 契约规范 Swagger 和 Spring 有比较好的集成，使得 Spring 也支持契约驱动开发 (Contract Driven Development) 模型。对于一些中大规模的企业，如果业务复杂团队较多，考虑到互操作性和集成成本，建议采用契约驱动开发模型，也就是开发时先定义 Swagger 契约，然后再通过契约生成服务端接口和客户端，再实现服务端业务逻辑，这种开发模型能够标准化接口，降低系统间集成成本，对于多团队协同并行开发非常重要。</p>
监控反馈组件数据总线 Kafka
<p>最初由 Linkedin 研发并在其内部大规模成功应用，然后在 Apache 上开源的 Kafka，是业内数据总线 (Databus) 一块的标配，几乎每一家互联网公司都可以看到 Kafka 的身影。Kafka 堪称开源项目的一个经典成功案例，其创始人团队从 Linkedin 离职后还专门成立了一家叫 confluent 的企业软件服务公司，围绕 Kafka 周边提供配套和增值服务。在监控一块，日志和 Metrics 等数据可以通过 Kafka 做收集、存储和转发，相当于中间增加了一个大容量缓冲，能够应对海量日志数据的场景。除了日志监控数据收集，Kafka 在业务大数据分析，IoT 等场景都有广泛应用。如果对 Kafka 进行适当定制增强，还可以用于传统消息中间件场景。</p>
<p>Kafka 的特性是大容量，高吞吐，高可用，数据可重复消费，可水平扩展，支持消费者组等。Kafka 尤其适用于不严格要求实时和不丢数据的大数据日志场景。</p>
<p><img src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/640(8)" alt="" data-ratio="0.7009174311926606" data-src="https://mmbiz.qpic.cn/mmbiz_png/UicsouxJOkBfd0Pic2LmCJvAtFKLEOBsjibrice31ibMHe3W93o9UQuQSC73icuCSW7B8qWYiaETOBiar4fzeSNSc8aPqQ/640?wx_fmt=png" data-type="png" data-w="545" data-fail="0"></p>
<p>Kafka 创始人三人组，离开 Linkedin 后，创立了基于 Kafka 的创业公司 Confluent。</p>
日志监控 ELK
<p>&lt;![endif]--&gt;</p>
<p>ELK（ElasticSearch/Logstash/Kibana）是日志监控一块的标配技术栈，几乎每一家互联网公司都可以看到 ELK 的身影，据称携程是国内 ELK 的最大用户，每日增量日志数据量达到 80~90TB。ELK 已经非常成熟，基本上是开箱即用，后续主要的工作在运维、治理和调优。</p>
<p>ELK 一般和 Kafka 配套使用，因为日志分词操作还是比较耗时的，Kafka 主要作为前置缓冲，起到流量消峰作用，抵消日志流量高峰和消费（分词建索引）的不匹配问题。一旦反向索引建立，日志检索是非常快的，所以日志检索快和灵活是 ElasticSearch 的最大亮点。另外 ELK 还有大容量，高吞吐，高可用，可水平扩容等企业级特性。</p>
<p>创业公司起步期，考虑到资源时间限制，调用链监控和 Metrics 监控可以不是第一优先级，但是 ELK 是必须搭一套的，应用日志数据一定要收集并建立索引，基本能够覆盖大部分 Trouble Shooting 场景（业务，性能，程序 bug 等）。</p>
<p>另外用好 ELK 的关键是治理，需要制定一些规则（比如只收集 Warn 级别以上日志），对应用的日志数据量做好监控，否则开发人员会滥用，什么垃圾数据都往 ELK 里头丢，造成大量空间被浪费，严重的还可能造成性能可用性问题。</p>
<p><img src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/640(9)" alt="" data-ratio="0.53" data-src="https://mmbiz.qpic.cn/mmbiz_png/UicsouxJOkBfd0Pic2LmCJvAtFKLEOBsjibqhibhO5TgpUyVmLYyvbutZSvd9afJxqlXkQzvAhaibJeOTdUS2eOMSHw/640?wx_fmt=png" data-type="png" data-w="800" data-fail="0"></p>
<p>ELK + Kafka 参考部署架构</p>
调用链监控 CAT
<p>Spring Cloud 支持基于 Zipkin 的调用链监控，我个人基于实践经验认为 Zipkin 还不能算一款企业级调用链监控产品，充其量只能算是一个半成品，很多重要的企业级特性缺失。Zipkin 最早是由 Twitter 在消化 Google Dapper 论文的基础上研发，在 Twitter 内部有较成功应用，但是在开源出来的时候把不少重要的统计报表功能给阉割了（因为依赖于一些比较重的大数据分析平台），只是开源了一个半成品，能简单查询和呈现可视化调用链，但是细粒度的调用性能数据报表没有开源。</p>
<p>Google 大致在 2007 年左右开始研发称为 Dapper 的调用链监控系统，但在远远早于这个时间（大致在 2002 左右），eBay 就已经有了自己的调用链监控系统 CAL（Centralized Application Logging），Google 和 eBay 的设计思路大致相同，但是也有一些差别。CAL 在 eBay 有大规模成功应用，被称为是 eBay 的四大神器之一（另外三个是 DAL，Messaging 和 SOA）。</p>
<p>开源调用链监控系统 CAT 的作者吴其敏（我曾经和他同事，习惯叫他老吴），曾经在 eBay 工作近十年，期间深入消化吸收了 CAL 的设计。2011 年后老吴离开 eBay 去了点评，用三年时间在点评再造了一款调用链监控产品 CAT（Centralized Application Tracking），CAT 具有 CAL 的基因和影子，同时也融入了老吴在点评的探索实践和创新。</p>
<p>CAT 是一款更完整的企业级调用链监控产品，甚至已经接近一个 APM（Application Performance Management）产品的范畴，它不仅支持调用链的查询和可视化，还支持细粒度的调用性能数据统计报表，这块是 CAT 和市面上其它开源调用链监控产品最本质的差异点，实际上开发人员大部分时间用 CAT 是看性能统计报表（主要是 CAT 的 Transaction 和 Problem 报表），这些报表相当于给了开发人员一把尺子，可以自助测量并持续改进应用性能。另外 CAT 还支持应用报错大盘，自助告警等功能，也是企业级监控非常实用的功能。</p>
<p>CAT 在点评，携程，陆金所，拍拍贷等公司有成功落地案例，因为是国产调用链监控产品，界面展示和功能等更契合国内文化，更易于在国内公司落地。个人推荐 CAT 作为微服务调用链监控的首选。</p>
<p>至于社区里头有人提到 CAT 的侵入性问题，我觉得是要一分为二看，有利有弊，有耦合性但是性能更好，一般企业中基础架构团队会使用 CAT 统一为基础组件埋点，开发人员一般不用自己埋点；另外企业用了一款调用链监控产品以后，一般是不会换的，开发人员用习惯就好了，侵入不是大问题。</p>
<p><img src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/640(10)" alt="" data-ratio="0.43125" data-src="https://mmbiz.qpic.cn/mmbiz_png/UicsouxJOkBfd0Pic2LmCJvAtFKLEOBsjibKVVFYVDOuUBcEDAy8aCfQkJiaCJd0MINKictuIZnExiaYpOa03MFFnguA/640?wx_fmt=png" data-type="png" data-w="800" data-fail="0"></p>
<p>CAT 的 Transaction 报表</p>
Metrics 监控 KariosDB
<p>除了日志和调用链，Metrics 也是应用监控的重要关注点。互联网应用提倡度量驱动开发（Metrics Driven Development），也就是说开发人员不仅要关注功能实现，做好单元测试（TDD），还要做好业务层（例如注册，登录和下单数等）和应用层（例如调用数，调用延迟等）的监控埋点，这个也是 DevOps（开发即运维）理念的体现，DevOps 要求开发人员必须关注运维需求，监控埋点是一种生产级运维需求。</p>
<p>Metrics 监控产品底层依赖于时间序列数据库（TSDB），最近比较热的开源产品有 Prometheus 和 InfluxDB，社区用户数量和反馈都不错，可以采纳。但是这些产品分布式能力比较弱，定制扩展门槛比较高，一般建议刚起步量不大的公司采用。</p>
<p>如果企业业务和团队规模发展到一定阶段，建议考虑支持分布式能力的时间序列监控产品，例如 KairosDB 或者 OpenTSDB，我本人对这两款产品都有一些实践经验，KariosDB 基于 Cassandra，相对更轻量一点，建议中大规模公司采用，如果你们公司已经采用 Hadoop/HBase，则 OpenTSDB 也是不错选择。</p>
<p>KairosDB 一般也和 Kafka 配套使用，Kafka 作为前置缓冲。另外注意使用 KariosDB 打点的话 tag 的值不能太离散，否则会有查询性能问题，这个和 KariosDB 底层存储结构有关系。Grafana 是 Metrics 展示标配，可以和 KariosDB 无缝集成。</p>
<p><img src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/640(11)" alt="" data-ratio="0.5" data-src="https://mmbiz.qpic.cn/mmbiz_png/UicsouxJOkBfd0Pic2LmCJvAtFKLEOBsjibg797WUP2UfIGvQnE3e1YeDypImjKDPQnDFTFYibFSD7dTFEUaqYQgmw/640?wx_fmt=png" data-type="png" data-w="800" data-fail="0"></p>
<p>Grafana 是 Metrics 展示标配，和主流时间序列数据库都可以集成</p>
健康检查和告警 ZMon
<p>除了上述监控手段，我们仍需要健康检查和告警系统作为配套的监控手段。ZMon 是德国电商公司 Zalando 开源的一款健康检查和告警平台，具备强大灵活的监控告警能力。ZMon 本质上可以认为是一套分布式监控任务调度平台，它提供众多的 Check 脚本（也可以自己再定制扩展），能够对各种硬件资源或者目标服务（例如 HTTP 端口，Spring 的 Actuator 端点，KariosDB 中的 Metrics，ELK 中的错误日志等等）进行定期的健康检查和告警，它的告警逻辑和策略采用 Python 脚本实现，开发人员可以实现自助式告警。ZMon 同时适用于系统，应用，业务，甚至端用户体验层的监控和告警。</p>
<p><img src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/640(12)" alt="" data-ratio="0.545" data-src="https://mmbiz.qpic.cn/mmbiz_png/UicsouxJOkBfd0Pic2LmCJvAtFKLEOBsjibspqB5dllOwfJwZTBhBwW0lNsHgJTuIETyLcTbNE0lQTVibZvZuNMzDg/640?wx_fmt=png" data-type="png" data-w="800" data-fail="0"></p>
<p>ZMon 分布式监控告警系统架构，底层基于 KairosDB 时间序列数据库</p>
限流熔断和流聚合 Hystrix+Turbine
<p>2010 年左右，Netflix 也饱受分布式微服务系统中雪崩效应（Cascading Failure）的困扰，于是专门启动了一个叫做弹性工程的项目来解决这个问题，Hystrix 就是弹性工程最终落地下来的一个产品。Hystrix 在 Netflix 微服务系统中大规模推广应用后，雪崩效应问题基本得到解决，整个体统更具弹性。</p>
<p>之后 Netflix 把 Hystrix 开源贡献给了社区，短期获得社区的大量正面反馈，目前 Hystrix 在 github 上有超过 1.3 万颗星，据说支持奥巴马总统选举的系统也曾使用 Hystrix 进行限流熔断保护 [参考附录 2]，可见限流熔断是分布式系统稳定性的强需求，Netflix 很好的抓住了这个需求并给出了经过生产级验证的解决方案。Hystrix 已经被纳入 Spring Cloud 体系，它是 Java 社区中限流熔断组件的首选（目前还看不到第二个更好的产品）。</p>
<p>Turbine 是和 Hystrix 配套的一个流聚合服务，能够对 Hystrix 监控数据流进行聚合，聚合以后可以在 Hystrix Dashboard 上看到集群的流量和性能情况。</p>
<p><img src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/640(13)" alt="" data-ratio="0.285" data-src="https://mmbiz.qpic.cn/mmbiz_png/UicsouxJOkBfd0Pic2LmCJvAtFKLEOBsjibfghzwQomay4jZ4rqg0eXwv3Y2FzqGuSDASr4OibaJyVicdFNFNfKMNnA/640?wx_fmt=png" data-type="png" data-w="800" data-fail="0"></p>
<p>Hystrix 在英文中是豪猪兽的意思，豪猪兽通过身上的刺保护自己，Netflix 为限流熔断组件起名 Hystrix，寓意 Hystrix 能够保护微服务调用。</p>
结论<ol class="list-paddingleft-2">
<li>
<p>技术栈没有好坏之分，只有适合一说。本文推荐的技术栈主要基于我个人的实践和总结，但是未必适合所有场景，毕竟每个企业的上下文各不相同。作为架构师你可以参考我推荐的技术栈，但不可拘泥照搬，你必须在深入理解分布系统原理的基础上，再结合企业实际场景灵活应用。</p>
</li>
<li>
<p>本文推荐的技术栈主要面向微服务基础架构，也是《2018 波波的微服务基础架构和实践》课程要深度剖析的主题。在整个互联网基础技术平台体系中，还有消息，任务，数据访问层，发布系统，容器云平台，分布式事务，分布式一致性，测试，CI/CD 等其它重要主题，这些是波波在 2019 第三季和 2020 第四季要陆续推出的内容，请大家持续关注。</p>
</li>
<li>
<p>&nbsp;</p>
</li>
</ol></div></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag">标签: <a href="http://www.cnblogs.com/bigben0123/tag/spring/">spring</a></div>
<div id="blog_post_info"><div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(9008313,cb_blogId,1);green_channel_success(this,&#39;谢谢推荐！&#39;);">好文要顶</a>
            <a id="green_channel_follow" onclick="follow(&#39;b15dc9ee-b54b-e011-ac81-842b2b196315&#39;);" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/icon_weibo_24.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/bigben0123/" target="_blank"><img src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/sample_face.gif" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/bigben0123/">Bigben</a><br>
            <a href="http://home.cnblogs.com/u/bigben0123/followees">关注 - 17</a><br>
            <a href="http://home.cnblogs.com/u/bigben0123/followers">粉丝 - 7</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
                <a href="javascript:void(0);" onclick="follow(&#39;b15dc9ee-b54b-e011-ac81-842b2b196315&#39;);return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(9008313,&#39;Digg&#39;)">
        <span class="diggnum" id="digg_count">0</span>
    </div>
    <div class="buryit" onclick="votePost(9008313,&#39;Bury&#39;)">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>
<script type="text/javascript">
    currentDiggType = 0;
</script></div>
<div class="clear"></div>
<div id="post_next_prev"><a href="http://www.cnblogs.com/bigben0123/p/8990515.html" class="p_n_p_prefix">« </a> 上一篇：<a href="http://www.cnblogs.com/bigben0123/p/8990515.html" title="发布于2018-05-04 14:38">每个Java程序员需要了解的8个Java开发工具</a><br></div>
</div>


		</div>
		<div class="postDesc">posted @ <span id="post-date">2018-05-08 15:09</span> <a href="http://www.cnblogs.com/bigben0123/">Bigben</a> 阅读(<span id="post_view_count">4</span>) 评论(<span id="post_comment_count">0</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=9008313" rel="nofollow">编辑</a> <a href="https://www.cnblogs.com/bigben0123/p/9008313.html#" onclick="AddToWz(9008313);return false;">收藏</a></div>
	</div>
	<script type="text/javascript">var allowComments=true,cb_blogId=85503,cb_entryId=9008313,cb_blogApp=currentBlogApp,cb_blogUserGuid='b15dc9ee-b54b-e011-ac81-842b2b196315',cb_entryCreatedDate='2018/5/8 15:09:00';loadViewCount(cb_entryId);var cb_postType=1;</script>
	
</div><!--end: topics 文章、评论容器-->
</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="https://www.cnblogs.com/bigben0123/p/9008313.html#" onclick="return RefreshPage();">刷新页面</a><a href="https://www.cnblogs.com/bigben0123/p/9008313.html#top">返回顶部</a></div>
<div id="comment_form_container"><div class="login_tips">注册用户登录后才能发表评论，请 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return login(&#39;commentform&#39;);">登录</a> 或 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return register();">注册</a>，<a href="http://www.cnblogs.com/">访问</a>网站首页。</div></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="ad_t2"><a href="http://www.ucancode.com/index.htm" target="_blank">【推荐】超50万VC++源码: 大型组态工控、电力仿真CAD与GIS源码库！</a><br><a href="https://www.yunqi2050.com/" target="_blank">【活动】2050 大会 - 年青人因科技而团聚（5.26-5.27 杭州·云栖小镇）</a><br><a href="http://121.42.243.177/r/?rno=1803" target="_blank">【推荐】跟最课程陆敏技学Java，5个月高薪就业</a><br><a href="http://clickc.admaster.com.cn/c/a105960,b2436452,c1705,i0,m101,8a1,8b2,h" target="_blank">【推荐】0元免费体验华为云服务</a><br><a href="https://cloud.tencent.com/act/first_purchase?fromSource=gwzcw.919198.919198.919198" target="_blank">【活动】腾讯云云服务器新购特惠，5折上云</a><br></div>
<div id="opt_under_post"></div>
<div id="cnblogs_c1" class="c_ad_block"><a onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;C1&#39;);" href="https://cloud.tencent.com/act/event/cdbbasic.html?fromSource=gwzcw.919199.919199.919199" target="_blank"><img width="300" height="250" src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/24442-20180502205118653-1977595167.jpg" alt="腾讯云0502"></a></div>
<div id="under_post_news"><div class="itnews c_ad_block"><b>最新IT新闻</b>:<br> ·  <a href="https://news.cnblogs.com/n/596196/" target="_blank">Google Gmail引入机器学习：替你写邮件</a><br> ·  <a href="https://news.cnblogs.com/n/596189/" target="_blank">为何盖茨与纳德拉“追捧”苹果股票？可能想将Siri拉入自己家</a><br> ·  <a href="https://news.cnblogs.com/n/596195/" target="_blank">起底豆瓣刷分产业链：新片刷至6分只需5500元</a><br> ·  <a href="https://news.cnblogs.com/n/596203/" target="_blank">微软发布了一台能直播写代码的智能会议电话机，太虐人了！</a><br> ·  <a href="https://news.cnblogs.com/n/596202/" target="_blank">360 N7，先做好一部手机，其次才是游戏</a><br>» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></div></div>
<div id="cnblogs_c2" class="c_ad_block"><a href="http://click.aliyun.com/m/26880/" target="_blank"><img src="./一个可供中小团队参考的微服务架构技术栈 - Bigben - 博客园_files/TB1WDRaXMoQMeJjy0FnXXb8gFXa-468-60.jpg" alt="" style="width: 468px; height: 60px;"></a></div>
<div id="under_post_kb"><div class="itnews c_ad_block" id="kb_block"><b>最新知识库文章</b>:<br><div id="kb_recent"> ·  <a href="http://kb.cnblogs.com/page/578689/" target="_blank">如何成为优秀的程序员？</a><br> ·  <a href="http://kb.cnblogs.com/page/594930/" target="_blank">菜鸟工程师的超神之路 -- 从校园到职场</a><br> ·  <a href="http://kb.cnblogs.com/page/593985/" target="_blank">如何识别人的技术能力和水平？</a><br> ·  <a href="http://kb.cnblogs.com/page/575255/" target="_blank">写给自学者的入门指南</a><br> ·  <a href="http://kb.cnblogs.com/page/578690/" target="_blank">和程序员谈恋爱</a><br></div>» <a href="http://kb.cnblogs.com/" target="_blank">更多知识库文章...</a></div></div>
<div id="HistoryToday" class="c_ad_block"><b>历史上的今天:</b><br>2015-05-08 <a href="http://www.cnblogs.com/bigben0123/p/4488479.html">android 常见死机问题--log分析</a><br>2015-05-08 <a href="http://www.cnblogs.com/bigben0123/p/4488470.html">android anr分析方法</a><br>2015-05-08 <a href="http://www.cnblogs.com/bigben0123/p/4488457.html">android的logcat详细用法</a><br>2015-05-08 <a href="http://www.cnblogs.com/bigben0123/p/4488434.html">Android 设计模式 之 观察者模式</a><br>2015-05-08 <a href="http://www.cnblogs.com/bigben0123/p/4488429.html">Android 设计模式 之 单例模式</a><br>2013-05-08 <a href="http://www.cnblogs.com/bigben0123/archive/2013/05/08/3067035.html">eclipse c c++ 设定自动换行的宽度 非默认80</a><br></div>
<script type="text/javascript">
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverAdT2();
    deliverAdC1();
    deliverAdC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);   
</script>
</div>


	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">公告</h3>
	<div id="blog-news"><div id="profile_block">昵称：<a href="https://home.cnblogs.com/u/bigben0123/">Bigben</a><br>园龄：<a href="https://home.cnblogs.com/u/bigben0123/" title="入园时间：2011-03-11">7年1个月</a><br>粉丝：<a href="https://home.cnblogs.com/u/bigben0123/followers/">7</a><br>关注：<a href="https://home.cnblogs.com/u/bigben0123/followees/">17</a><div id="p_b_follow"><a href="javascript:void(0);" onclick="follow(&#39;b15dc9ee-b54b-e011-ac81-842b2b196315&#39;)">+加关注</a></div><script>getFollowStatus('b15dc9ee-b54b-e011-ac81-842b2b196315')</script></div></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="blog-calendar" style=""><table id="blogCalendar" class="Cal" cellspacing="0" cellpadding="0" title="Calendar">
	<tbody><tr><td colspan="7"><table class="CalTitle" cellspacing="0">
		<tbody><tr><td class="CalNextPrev"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2018/04/01&#39;);return false;">&lt;</a></td><td align="center">2018年5月</td><td class="CalNextPrev" align="right"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2018/06/01&#39;);return false;">&gt;</a></td></tr>
	</tbody></table></td></tr><tr><th class="CalDayHeader" align="center" abbr="日" scope="col">日</th><th class="CalDayHeader" align="center" abbr="一" scope="col">一</th><th class="CalDayHeader" align="center" abbr="二" scope="col">二</th><th class="CalDayHeader" align="center" abbr="三" scope="col">三</th><th class="CalDayHeader" align="center" abbr="四" scope="col">四</th><th class="CalDayHeader" align="center" abbr="五" scope="col">五</th><th class="CalDayHeader" align="center" abbr="六" scope="col">六</th></tr><tr><td class="CalOtherMonthDay" align="center">29</td><td class="CalOtherMonthDay" align="center">30</td><td align="center">1</td><td align="center">2</td><td align="center"><a href="http://www.cnblogs.com/bigben0123/archive/2018/05/03.html"><u>3</u></a></td><td align="center"><a href="http://www.cnblogs.com/bigben0123/archive/2018/05/04.html"><u>4</u></a></td><td class="CalWeekendDay" align="center">5</td></tr><tr><td class="CalWeekendDay" align="center">6</td><td align="center">7</td><td align="center"><a href="http://www.cnblogs.com/bigben0123/archive/2018/05/08.html"><u>8</u></a></td><td class="CalTodayDay" align="center">9</td><td align="center">10</td><td align="center">11</td><td class="CalWeekendDay" align="center">12</td></tr><tr><td class="CalWeekendDay" align="center">13</td><td align="center">14</td><td align="center">15</td><td align="center">16</td><td align="center">17</td><td align="center">18</td><td class="CalWeekendDay" align="center">19</td></tr><tr><td class="CalWeekendDay" align="center">20</td><td align="center">21</td><td align="center">22</td><td align="center">23</td><td align="center">24</td><td align="center">25</td><td class="CalWeekendDay" align="center">26</td></tr><tr><td class="CalWeekendDay" align="center">27</td><td align="center">28</td><td align="center">29</td><td align="center">30</td><td align="center">31</td><td class="CalOtherMonthDay" align="center">1</td><td class="CalOtherMonthDay" align="center">2</td></tr><tr><td class="CalOtherMonthDay" align="center">3</td><td class="CalOtherMonthDay" align="center">4</td><td class="CalOtherMonthDay" align="center">5</td><td class="CalOtherMonthDay" align="center">6</td><td class="CalOtherMonthDay" align="center">7</td><td class="CalOtherMonthDay" align="center">8</td><td class="CalOtherMonthDay" align="center">9</td></tr>
</tbody></table></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"><div id="sidebar_search" class="sidebar-block">
<div id="sidebar_search" class="mySearch">
<h3 class="catListTitle">搜索</h3>
<div id="sidebar_search_box">
<div id="widget_my_zzk" class="div_my_zzk"><input type="text" id="q" onkeydown="return zzk_go_enter(event);" class="input_my_zzk">&nbsp;<input onclick="zzk_go()" type="button" value="找找看" id="btnZzk" class="btn_my_zzk"></div>
<div id="widget_my_google" class="div_my_zzk"><input type="text" name="google_q" id="google_q" onkeydown="return google_go_enter(event)" class="input_my_zzk">&nbsp;<input onclick="google_go()" type="button" value="谷歌搜索" class="btn_my_zzk"></div>
</div>
</div>

</div><div id="sidebar_shortcut" class="sidebar-block">
<div class="catListLink">
<h3 class="catListTitle">常用链接</h3>
<ul>
<li><a href="http://www.cnblogs.com/bigben0123/p/" title="我的博客的随笔列表">我的随笔</a></li><li><a href="http://www.cnblogs.com/bigben0123/MyComments.html" title="我发表过的评论列表">我的评论</a></li><li><a href="http://www.cnblogs.com/bigben0123/OtherPosts.html" title="我评论过的随笔列表">我的参与</a></li><li><a href="http://www.cnblogs.com/bigben0123/RecentComments.html" title="我的博客的评论列表">最新评论</a></li><li><a href="http://www.cnblogs.com/bigben0123/tag/" title="我的博客的标签列表">我的标签</a></li>
</ul>
<div id="itemListLin_con" style="display:none;">
<ul>

</ul>
</div>
</div></div><div id="sidebar_toptags" class="sidebar-block">
<div class="catListTag">
<h3 class="catListTitle">我的标签</h3>
<ul>
<li><a href="http://www.cnblogs.com/bigben0123/tag/linux/">linux</a>(19)</li><li><a href="http://www.cnblogs.com/bigben0123/tag/docker/">docker</a>(14)</li><li><a href="http://www.cnblogs.com/bigben0123/tag/java/">java</a>(12)</li><li><a href="http://www.cnblogs.com/bigben0123/tag/NFC/">NFC</a>(11)</li><li><a href="http://www.cnblogs.com/bigben0123/tag/spring/">spring</a>(9)</li><li><a href="http://www.cnblogs.com/bigben0123/tag/mysql/">mysql</a>(8)</li><li><a href="http://www.cnblogs.com/bigben0123/tag/go/">go</a>(8)</li><li><a href="http://www.cnblogs.com/bigben0123/tag/c%2B%2B/">c++</a>(8)</li><li><a href="http://www.cnblogs.com/bigben0123/tag/android/">android</a>(7)</li><li><a href="http://www.cnblogs.com/bigben0123/tag/sdl/">sdl</a>(7)</li><li><a href="http://www.cnblogs.com/bigben0123/tag/">更多</a></li>
</ul>
</div></div><div id="sidebar_categories">
<div id="sidebar_postcategory" class="catListPostCategory sidebar-block">
<h3 class="catListTitle">随笔分类<span style="font-size:11px;font-weight:normal">(27)</span></h3>

<ul>

<li><a id="CatList_LinkList_0_Link_0" href="http://www.cnblogs.com/bigben0123/category/493766.html">C/C++(3)</a> </li>

<li><a id="CatList_LinkList_0_Link_1" href="http://www.cnblogs.com/bigben0123/category/493767.html">linux(20)</a> </li>

<li><a id="CatList_LinkList_0_Link_2" href="http://www.cnblogs.com/bigben0123/category/498355.html">SQL(1)</a> </li>

<li><a id="CatList_LinkList_0_Link_3" href="http://www.cnblogs.com/bigben0123/category/288594.html">webkit(2)</a> </li>

<li><a id="CatList_LinkList_0_Link_4" href="http://www.cnblogs.com/bigben0123/category/1108258.html">设计模式(1)</a> </li>

</ul>

</div>

<div id="sidebar_postarchive" class="catListPostArchive sidebar-block">
<h3 class="catListTitle">随笔档案<span style="font-size:11px;font-weight:normal">(567)</span></h3>

<ul>

<li><a id="CatList_LinkList_1_Link_0" href="http://www.cnblogs.com/bigben0123/archive/2018/05.html">2018年5月 (7)</a> </li>

<li><a id="CatList_LinkList_1_Link_1" href="http://www.cnblogs.com/bigben0123/archive/2018/04.html">2018年4月 (22)</a> </li>

<li><a id="CatList_LinkList_1_Link_2" href="http://www.cnblogs.com/bigben0123/archive/2018/03.html">2018年3月 (20)</a> </li>

<li><a id="CatList_LinkList_1_Link_3" href="http://www.cnblogs.com/bigben0123/archive/2018/02.html">2018年2月 (6)</a> </li>

<li><a id="CatList_LinkList_1_Link_4" href="http://www.cnblogs.com/bigben0123/archive/2018/01.html">2018年1月 (17)</a> </li>

<li><a id="CatList_LinkList_1_Link_5" href="http://www.cnblogs.com/bigben0123/archive/2017/12.html">2017年12月 (8)</a> </li>

<li><a id="CatList_LinkList_1_Link_6" href="http://www.cnblogs.com/bigben0123/archive/2017/11.html">2017年11月 (18)</a> </li>

<li><a id="CatList_LinkList_1_Link_7" href="http://www.cnblogs.com/bigben0123/archive/2017/10.html">2017年10月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_8" href="http://www.cnblogs.com/bigben0123/archive/2017/09.html">2017年9月 (12)</a> </li>

<li><a id="CatList_LinkList_1_Link_9" href="http://www.cnblogs.com/bigben0123/archive/2017/08.html">2017年8月 (7)</a> </li>

<li><a id="CatList_LinkList_1_Link_10" href="http://www.cnblogs.com/bigben0123/archive/2017/07.html">2017年7月 (6)</a> </li>

<li><a id="CatList_LinkList_1_Link_11" href="http://www.cnblogs.com/bigben0123/archive/2017/06.html">2017年6月 (12)</a> </li>

<li><a id="CatList_LinkList_1_Link_12" href="http://www.cnblogs.com/bigben0123/archive/2017/05.html">2017年5月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_13" href="http://www.cnblogs.com/bigben0123/archive/2017/04.html">2017年4月 (6)</a> </li>

<li><a id="CatList_LinkList_1_Link_14" href="http://www.cnblogs.com/bigben0123/archive/2017/03.html">2017年3月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_15" href="http://www.cnblogs.com/bigben0123/archive/2017/02.html">2017年2月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_16" href="http://www.cnblogs.com/bigben0123/archive/2017/01.html">2017年1月 (4)</a> </li>

<li><a id="CatList_LinkList_1_Link_17" href="http://www.cnblogs.com/bigben0123/archive/2016/12.html">2016年12月 (6)</a> </li>

<li><a id="CatList_LinkList_1_Link_18" href="http://www.cnblogs.com/bigben0123/archive/2016/11.html">2016年11月 (5)</a> </li>

<li><a id="CatList_LinkList_1_Link_19" href="http://www.cnblogs.com/bigben0123/archive/2016/10.html">2016年10月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_20" href="http://www.cnblogs.com/bigben0123/archive/2016/09.html">2016年9月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_21" href="http://www.cnblogs.com/bigben0123/archive/2016/08.html">2016年8月 (6)</a> </li>

<li><a id="CatList_LinkList_1_Link_22" href="http://www.cnblogs.com/bigben0123/archive/2016/07.html">2016年7月 (7)</a> </li>

<li><a id="CatList_LinkList_1_Link_23" href="http://www.cnblogs.com/bigben0123/archive/2016/06.html">2016年6月 (3)</a> </li>

<li><a id="CatList_LinkList_1_Link_24" href="http://www.cnblogs.com/bigben0123/archive/2016/05.html">2016年5月 (11)</a> </li>

<li><a id="CatList_LinkList_1_Link_25" href="http://www.cnblogs.com/bigben0123/archive/2016/04.html">2016年4月 (10)</a> </li>

<li><a id="CatList_LinkList_1_Link_26" href="http://www.cnblogs.com/bigben0123/archive/2016/03.html">2016年3月 (3)</a> </li>

<li><a id="CatList_LinkList_1_Link_27" href="http://www.cnblogs.com/bigben0123/archive/2016/02.html">2016年2月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_28" href="http://www.cnblogs.com/bigben0123/archive/2016/01.html">2016年1月 (4)</a> </li>

<li><a id="CatList_LinkList_1_Link_29" href="http://www.cnblogs.com/bigben0123/archive/2015/12.html">2015年12月 (6)</a> </li>

<li><a id="CatList_LinkList_1_Link_30" href="http://www.cnblogs.com/bigben0123/archive/2015/11.html">2015年11月 (9)</a> </li>

<li><a id="CatList_LinkList_1_Link_31" href="http://www.cnblogs.com/bigben0123/archive/2015/10.html">2015年10月 (4)</a> </li>

<li><a id="CatList_LinkList_1_Link_32" href="http://www.cnblogs.com/bigben0123/archive/2015/09.html">2015年9月 (6)</a> </li>

<li><a id="CatList_LinkList_1_Link_33" href="http://www.cnblogs.com/bigben0123/archive/2015/08.html">2015年8月 (8)</a> </li>

<li><a id="CatList_LinkList_1_Link_34" href="http://www.cnblogs.com/bigben0123/archive/2015/07.html">2015年7月 (11)</a> </li>

<li><a id="CatList_LinkList_1_Link_35" href="http://www.cnblogs.com/bigben0123/archive/2015/06.html">2015年6月 (6)</a> </li>

<li><a id="CatList_LinkList_1_Link_36" href="http://www.cnblogs.com/bigben0123/archive/2015/05.html">2015年5月 (17)</a> </li>

<li><a id="CatList_LinkList_1_Link_37" href="http://www.cnblogs.com/bigben0123/archive/2015/04.html">2015年4月 (10)</a> </li>

<li><a id="CatList_LinkList_1_Link_38" href="http://www.cnblogs.com/bigben0123/archive/2015/03.html">2015年3月 (17)</a> </li>

<li><a id="CatList_LinkList_1_Link_39" href="http://www.cnblogs.com/bigben0123/archive/2015/02.html">2015年2月 (21)</a> </li>

<li><a id="CatList_LinkList_1_Link_40" href="http://www.cnblogs.com/bigben0123/archive/2015/01.html">2015年1月 (45)</a> </li>

<li><a id="CatList_LinkList_1_Link_41" href="http://www.cnblogs.com/bigben0123/archive/2014/12.html">2014年12月 (28)</a> </li>

<li><a id="CatList_LinkList_1_Link_42" href="http://www.cnblogs.com/bigben0123/archive/2014/11.html">2014年11月 (6)</a> </li>

<li><a id="CatList_LinkList_1_Link_43" href="http://www.cnblogs.com/bigben0123/archive/2014/06.html">2014年6月 (5)</a> </li>

<li><a id="CatList_LinkList_1_Link_44" href="http://www.cnblogs.com/bigben0123/archive/2014/05.html">2014年5月 (9)</a> </li>

<li><a id="CatList_LinkList_1_Link_45" href="http://www.cnblogs.com/bigben0123/archive/2014/04.html">2014年4月 (8)</a> </li>

<li><a id="CatList_LinkList_1_Link_46" href="http://www.cnblogs.com/bigben0123/archive/2014/03.html">2014年3月 (12)</a> </li>

<li><a id="CatList_LinkList_1_Link_47" href="http://www.cnblogs.com/bigben0123/archive/2014/02.html">2014年2月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_48" href="http://www.cnblogs.com/bigben0123/archive/2014/01.html">2014年1月 (4)</a> </li>

<li><a id="CatList_LinkList_1_Link_49" href="http://www.cnblogs.com/bigben0123/archive/2013/12.html">2013年12月 (6)</a> </li>

<li><a id="CatList_LinkList_1_Link_50" href="http://www.cnblogs.com/bigben0123/archive/2013/11.html">2013年11月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_51" href="http://www.cnblogs.com/bigben0123/archive/2013/10.html">2013年10月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_52" href="http://www.cnblogs.com/bigben0123/archive/2013/09.html">2013年9月 (9)</a> </li>

<li><a id="CatList_LinkList_1_Link_53" href="http://www.cnblogs.com/bigben0123/archive/2013/08.html">2013年8月 (10)</a> </li>

<li><a id="CatList_LinkList_1_Link_54" href="http://www.cnblogs.com/bigben0123/archive/2013/07.html">2013年7月 (26)</a> </li>

<li><a id="CatList_LinkList_1_Link_55" href="http://www.cnblogs.com/bigben0123/archive/2013/06.html">2013年6月 (9)</a> </li>

<li><a id="CatList_LinkList_1_Link_56" href="http://www.cnblogs.com/bigben0123/archive/2013/05.html">2013年5月 (21)</a> </li>

<li><a id="CatList_LinkList_1_Link_57" href="http://www.cnblogs.com/bigben0123/archive/2013/04.html">2013年4月 (9)</a> </li>

<li><a id="CatList_LinkList_1_Link_58" href="http://www.cnblogs.com/bigben0123/archive/2013/03.html">2013年3月 (6)</a> </li>

<li><a id="CatList_LinkList_1_Link_59" href="http://www.cnblogs.com/bigben0123/archive/2012/10.html">2012年10月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_60" href="http://www.cnblogs.com/bigben0123/archive/2012/08.html">2012年8月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_61" href="http://www.cnblogs.com/bigben0123/archive/2012/04.html">2012年4月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_62" href="http://www.cnblogs.com/bigben0123/archive/2012/03.html">2012年3月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_63" href="http://www.cnblogs.com/bigben0123/archive/2012/01.html">2012年1月 (7)</a> </li>

<li><a id="CatList_LinkList_1_Link_64" href="http://www.cnblogs.com/bigben0123/archive/2011/12.html">2011年12月 (5)</a> </li>

<li><a id="CatList_LinkList_1_Link_65" href="http://www.cnblogs.com/bigben0123/archive/2011/11.html">2011年11月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_66" href="http://www.cnblogs.com/bigben0123/archive/2011/03.html">2011年3月 (4)</a> </li>

</ul>

</div>

<div id="sidebar_articlearchive" class="catListArticleArchive sidebar-block">
<h3 class="catListTitle">文章档案<span style="font-size:11px;font-weight:normal">(12)</span></h3>

<ul>

<li><a id="CatList_LinkList_2_Link_0" href="http://www.cnblogs.com/bigben0123/archives/2017/11.html" rel="nofollow">2017年11月 (3)</a> </li>

<li><a id="CatList_LinkList_2_Link_1" href="http://www.cnblogs.com/bigben0123/archives/2017/10.html" rel="nofollow">2017年10月 (4)</a> </li>

<li><a id="CatList_LinkList_2_Link_2" href="http://www.cnblogs.com/bigben0123/archives/2013/05.html" rel="nofollow">2013年5月 (1)</a> </li>

<li><a id="CatList_LinkList_2_Link_3" href="http://www.cnblogs.com/bigben0123/archives/2013/03.html" rel="nofollow">2013年3月 (3)</a> </li>

<li><a id="CatList_LinkList_2_Link_4" href="http://www.cnblogs.com/bigben0123/archives/2013/02.html" rel="nofollow">2013年2月 (1)</a> </li>

</ul>

</div>

</div><div id="sidebar_recentcomments" class="sidebar-block"><div id="recent_comments_wrap">
<div class="catListComment">
<h3 class="catListTitle">最新评论</h3>

	<div id="RecentCommentsBlock"><ul>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/bigben0123/p/8243041.html#3884583">1. Re:从使用到原理学习Java线程池</a></li>
        <li class="recent_comment_body">很多HTML源码，格式有问题</li>
        <li class="recent_comment_author">--蹦三的人</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/bigben0123/p/5828896.html#3866206">2. Re:wildfly jboss 优化配置</a></li>
        <li class="recent_comment_body">感谢，在数据源的url后面加入?characterEncoding=utf-8后乱码问题得以解决，谢谢</li>
        <li class="recent_comment_author">--数据挖掘新手</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/bigben0123/p/3154406.html#3510526">3. Re:使用multi curl进行http并发访问</a></li>
        <li class="recent_comment_body">@松山仪龙什么情况会返回-1，遇到了相同的问题，请问这个你有解决吗？...</li>
        <li class="recent_comment_author">--艾丽娅的猫</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/bigben0123/archive/2013/05/30/3107640.html#3453858">4. Re:MySQL常用函数总结</a></li>
        <li class="recent_comment_body">将日期截断到天。 truncate to dayConversion ExamplesTypical conversion examples:Oracle	MySQL1	TRUNC(SYSDATE)	......</li>
        <li class="recent_comment_author">--Bigben</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/bigben0123/p/3154406.html#3285779">5. Re:使用multi curl进行http并发访问</a></li>
        <li class="recent_comment_body">CURLMcode mc;mc=curl_multi_fdset(curl_m, &amp;fd_read, &amp;fd_write, &amp;fd_except, &amp;max_fd); max_fd的结果总是-1，知道......</li>
        <li class="recent_comment_author">--松山仪龙</li>
</ul>
</div>
</div>
</div></div><div id="sidebar_topviewedposts" class="sidebar-block"><div id="topview_posts_wrap">
<div class="catListView">
<h3 class="catListTitle">阅读排行榜</h3>
	<div id="TopViewPostsBlock"><ul><li><a href="http://www.cnblogs.com/bigben0123/archive/2012/04/13/2445218.html">1. 真机缺少com.google.android.maps.jar解决方法：(11619)</a></li><li><a href="http://www.cnblogs.com/bigben0123/archive/2013/05/07/3064843.html">2. shell脚本中使用其他用户执行脚本(9121)</a></li><li><a href="http://www.cnblogs.com/bigben0123/p/4212896.html">3. sqlite 日期型 字符串转为日期型(5819)</a></li><li><a href="http://www.cnblogs.com/bigben0123/p/7017594.html">4. sql server 2000 个人版怎么在win7下安装(4812)</a></li><li><a href="http://www.cnblogs.com/bigben0123/archive/2011/12/02/2272369.html">5. VMware让ubuntu与win7共享文件方法(4266)</a></li></ul></div>
</div>
</div></div><div id="sidebar_topcommentedposts" class="sidebar-block"><div id="topfeedback_posts_wrap">
<div class="catListFeedback">
<h3 class="catListTitle">评论排行榜</h3>
	<div id="TopFeedbackPostsBlock"><ul><li><a href="http://www.cnblogs.com/bigben0123/p/3154406.html">1. 使用multi curl进行http并发访问(2)</a></li><li><a href="http://www.cnblogs.com/bigben0123/p/3336444.html">2. vlc sdl 播放视频可随窗口改变大小(2)</a></li><li><a href="http://www.cnblogs.com/bigben0123/p/8243041.html">3. 从使用到原理学习Java线程池(1)</a></li><li><a href="http://www.cnblogs.com/bigben0123/p/5828896.html">4. wildfly jboss 优化配置(1)</a></li><li><a href="http://www.cnblogs.com/bigben0123/archive/2013/05/30/3107640.html">5. MySQL常用函数总结(1)</a></li></ul></div>
</div>
</div></div><div id="sidebar_topdiggedposts" class="sidebar-block"><div id="topdigg_posts_wrap">
<div class="catListView">
<h3 class="catListTitle">推荐排行榜</h3>
<div id="TopDiggPostsBlock"><ul><li><a href="http://www.cnblogs.com/bigben0123/p/7886092.html">1. 基于Jenkins，docker实现自动化部署（持续交互）(2)</a></li><li><a href="http://www.cnblogs.com/bigben0123/p/5828896.html">2. wildfly jboss 优化配置(2)</a></li><li><a href="http://www.cnblogs.com/bigben0123/p/5818607.html">3. 在WildFly中运行多个standalone模式的实例(1)</a></li><li><a href="http://www.cnblogs.com/bigben0123/archive/2013/05/30/3107600.html">4. 使用expect在script中切换到root用户(1)</a></li><li><a href="http://www.cnblogs.com/bigben0123/archive/2011/11/16/2250640.html">5. 秋天(1)</a></li></ul></div>
</div></div></div></div><script type="text/javascript">loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		
<!--done-->
Copyright ©2018 Bigben
	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->


</body></html>