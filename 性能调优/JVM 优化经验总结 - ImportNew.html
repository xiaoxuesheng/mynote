<!DOCTYPE html>
<!-- saved from url=(0035)http://www.importnew.com/16327.html -->
<html dir="ltr" lang="zh-CN" xmlns:wb="http://open.weibo.com/wb" class=" js rgba borderradius boxshadow textshadow opacity cssanimations cssgradients csstransitions fontface generatedcontent video audio js"><!--<![endif]--><!-- BEGIN head --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><div class="fit-vids-style">­<style>               .fluid-width-video-wrapper {                 width: 100%;                              position: relative;                       padding: 0;                            }                                                                                   .fluid-width-video-wrapper iframe,        .fluid-width-video-wrapper object,        .fluid-width-video-wrapper embed {           position: absolute;                       top: 0;                                   left: 0;                                  width: 100%;                              height: 100%;                          }                                       </style></div><script src="./JVM 优化经验总结 - ImportNew_files/shares.php" charset="utf-8"></script>

	<!-- Title -->
	<title>JVM 优化经验总结 - ImportNew</title>
	
	<!-- Meta Tags -->
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<!-- Favicon & Mobileicon -->
	<link rel="shortcut icon" href="http://www.importnew.com/wp-content/uploads/2014/12/d02a42d9cb3dec9320e5f550278911c7.ico">
	<link rel="apple-touch-icon" href="http://www.importnew.com/wp-content/themes/jobbolev4blog/mobileicon.png">
	
	<!-- RSS, Atom & Pingbacks -->
		<link rel="alternate" title="ImportNew RSS Feed" href="http://www.importnew.com/feed">
		<link rel="alternate" title="RSS .92" href="http://www.importnew.com/feed/rss">
	<link rel="alternate" title="Atom 0.3" href="http://www.importnew.com/feed/atom">
	<link rel="pingback" href="http://www.importnew.com/xmlrpc.php">
	
	<!-- Theme Hook -->
	<link rel="stylesheet" id="lightboxStyle-css" href="./JVM 优化经验总结 - ImportNew_files/colorbox.css" type="text/css" media="screen">
<link rel="stylesheet" id="core3.0-css" href="./JVM 优化经验总结 - ImportNew_files/shCore.css" type="text/css" media="all">
<link rel="stylesheet" id="core-Default3.0-css" href="./JVM 优化经验总结 - ImportNew_files/shCoreDefault.css" type="text/css" media="all">
<link rel="stylesheet" id="theme-Default3.0-css" href="./JVM 优化经验总结 - ImportNew_files/shThemeDefault.css" type="text/css" media="all">
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/jquery.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/q2w3-fixed-widget.min.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/modernizr.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/comment-reply.js.下载"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.importnew.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.importnew.com/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="JVM 垃圾回收器工作原理及使用实例介绍" href="http://www.importnew.com/16325.html">
<link rel="next" title="在成为Java团队领导人15年后我学到了哪些？" href="http://www.importnew.com/16315.html">
<link rel="shortlink" href="http://www.importnew.com/?p=16327">

<!-- All in One SEO Pack 1.6.15.2 by Michael Torbert of Semper Fi Web Design[465,496] -->
<meta name="description" content="本文讲解了如何将新对象预留在年轻代、如何让大对象进入年老代、如何设置对象进入年老代的年龄、稳定的 Java 堆 VS 动荡的 Java 堆、增大吞吐量提升系统性能、尝试使用大的内存分页、使用非占有的垃圾回收器等主题。">
<meta name="keywords" content="gc,jvm">
<link rel="canonical" href="http://www.importnew.com/16327.html">
<!-- /all in one seo pack -->

<!-- Comment Rating plugin Version: 2.9.32 by Bob King, http://wealthynetizen.com/, dynamic comment voting & styling. --> 
<style type="text/css" media="screen">
   .ckrating_highly_rated {background-color:#FFFFCC !important;}
   .ckrating_poorly_rated {opacity:0.6;filter:alpha(opacity=60) !important;}
   .ckrating_hotly_debated {background-color:#FFF0F5 !important;}
</style>


<!-- WP SyntaxHighlighter Ver.1.7.3 CSS for code Begin -->
<style type="text/css">
.syntaxhighlighter,
.syntaxhighlighter a,
.syntaxhighlighter div,
.syntaxhighlighter code,
.syntaxhighlighter table,
.syntaxhighlighter table td,
.syntaxhighlighter table tr,
.syntaxhighlighter table tbody,
.syntaxhighlighter table thead,
.syntaxhighlighter table caption,
.syntaxhighlighter textarea {
font-size: 12px !important; /* Set the font size in pixels */  
font-family: "Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace !important; /* Set the font type */  
}
.syntaxhighlighter table caption {
/* For Title(Caption) */  
font-size: 14px !important; /* Set the font size in pixels */  
font-family: "Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace !important; /* Set the font type */  
}
.syntaxhighlighter.nogutter td.code .line {
/* Set the left padding space when no-gutter in ver. 3.0 */  
padding-left: 3px !important;
}
.syntaxhighlighter {
/* For Chrome/Safari(WebKit) */  
/* Hide the superfluous vertical scrollbar in ver. 3.0 */  
overflow-y: hidden !important;
padding: 1px !important;
}
.widget-area.syntaxhighlighter a,
.widget-area.syntaxhighlighter div,
.widget-area.syntaxhighlighter code,
.widget-area.syntaxhighlighter table,
.widget-area.syntaxhighlighter table td,
.widget-area.syntaxhighlighter table tr,
.widget-area.syntaxhighlighter table tbody,
.widget-area.syntaxhighlighter table thead,
.widget-area.syntaxhighlighter table caption,
.widget-area.syntaxhighlighter textarea {
/* For Widget */  
font-size: 14px !important; /* Set the font size in pixels */  
font-family: "Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace !important; /* Set the font type */  
}
.widget-area table caption {
/* For Widget */  
/* For Title(Caption) */  
font-size: 10px !important; /* Set the font size in pixels */  
font-family: "Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace !important; /* Set the font type */  
}
</style>
<!-- WP SyntaxHighlighter Ver.1.7.3 CSS for code End -->
	
	<!-- CSS -->
	<link rel="stylesheet" href="./JVM 优化经验总结 - ImportNew_files/style.css" media="screen">
	<!-- link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Noticia+Text:400,700italic,700,400italic" media="screen" / -->
	<style>
				*::selection { background: #0099cc; }
		*::-moz-selection { background: #0099cc; }
		body { background: #ffffff  }
		a, .tabs ul.nav li a:hover, .tabs ul.nav li.active a, .dropcap, .toggle.hover .toggle-title, li.comment cite a:hover, h3.widget-title, .post-meta .meta-title:hover, .the-latest a:hover h4, .aw_socialcounter_widget li a:hover, .aw_tabbed_widget #tab-latest-comments a:hover { color: #0099cc; }
		a:hover { color: #b30000; }
		input:focus, textarea:focus { border-color: #0099cc; }
		#searchsubmit, .highlight, .aw_tabbed_widget .tabs ul.nav li.active a, footer .aw_tabbed_widget .tabs ul.nav li.active a, #top .aw_tabbed_widget .tabs ul.nav li.active a, .aw_tabbed_widget .tabs ul.nav li a:hover, footer .aw_tabbed_widget .tabs ul.nav li a:hover, #top .aw_tabbed_widget .tabs ul.nav li a:hover, .aw_twitter_widget .twitter-icon, .testimonial-icon, #top-closed:hover, .flex-control-nav a:hover, .flex-control-nav a.flex-active { background-color: #0099cc; }
		.submit { background-color: #0099cc; border-color: #007399; }
		.submit:hover { background-color: #b30000; border-color: #860000; }
		#searchsubmit:hover { background-color: #b30000; }
		.toggle.hover .toggle-icon { border-top-color: #0099cc; }
		.toggle.hover.active .toggle-icon { border-bottom-color: #0099cc; }
		.flex-direction-nav li .flex-prev:hover { border-right-color: #0099cc; }
		.flex-direction-nav li .flex-next:hover { border-left-color: #0099cc; }
		@media only screen and (min-width: 768px) and (max-width: 959px) {
			.aw_tabbed_widget .tabs ul.nav li a:hover, .tabs ul.nav li.active a { color: #0099cc; }
		}
		@media screen and (max-width: 767px) {
			.tabs ul.nav li a:hover, .tabs ul.nav li.active a { color: #0099cc; }
		}
	</style>
		
	<!--[if IE 8]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
    <![endif]-->

	<!-- Links: RSS + Atom Syndication + Pingback etc. -->
	<link rel="alternate" type="application/rss+xml" title="ImportNew RSS Feed" href="http://www.importnew.com/feed">
	<link rel="alternate" type="text/xml" title="RSS .92" href="http://www.importnew.com/feed/rss">
	<link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="http://www.importnew.com/feed/atom">
	<link rel="pingback" href="http://www.importnew.com/xmlrpc.php">
    <script src="./JVM 优化经验总结 - ImportNew_files/wb.js.下载" type="text/javascript" charset="utf-8"></script><script charset="UTF-8" src="./JVM 优化经验总结 - ImportNew_files/query"></script>

<!-- END head -->
</head>

<!-- BEGIN body -->
<body class="single single-post postid-16327 single-format-standard chrome"><link href="./JVM 优化经验总结 - ImportNew_files/jiathis_counter.css" rel="stylesheet" type="text/css"><link href="./JVM 优化经验总结 - ImportNew_files/jiathis_share.css" rel="stylesheet" type="text/css"><iframe frameborder="0" style="position: absolute; display: none; opacity: 0;" src="./JVM 优化经验总结 - ImportNew_files/saved_resource.html"></iframe><div class="jiathis_style" style="position: absolute; z-index: 1000000000; display: none; top: 50%; left: 50%; overflow: auto;"></div><div class="jiathis_style" style="position: absolute; z-index: 1000000000; display: none; overflow: auto;"></div><iframe frameborder="0" src="./JVM 优化经验总结 - ImportNew_files/jiathis_utility.html" style="display: none;"></iframe>

		
	
	<!-- BEGIN #top-nav -->
	<nav id="top-nav" class="menu-nav">
		
		<!-- BEGIN .container -->
		<div class="container">

			            <div class="grid-12">
            </div>
			<div class="clear"></div>
		
		</div>
		<!-- END .container -->
    
	</nav>
	<!-- END #top-nav -->
	
	  	
	<!-- BEGIN #wrapper -->
	<div id="wrapper" class="container">

		<!-- BEGIN header -->
		<header>
		
						
			<div class="header-wrapper">
								
				<!-- BEGIN #logo -->
				<div id="logo" class="leaderboard-true">
				
										<a href="http://www.importnew.com/"><img src="./JVM 优化经验总结 - ImportNew_files/6c537425c9ad078efe656a346e5facec.png" width="137" height="85" alt="ImportNew"></a>
									
				</div>
				<!-- END #logo -->
				
				<!-- BEGIN #leaderboard -->
				<div id="leaderboard">
				
									
				</div>
				<!-- END #leaderboard -->
				
				<div class="clear"></div>
			
			</div>
			
						
			<div class="clear"></div>
			
			<!-- BEGIN #main-nav -->
			<nav id="main-nav" class="grid-12 menu-nav">

				<div class="menu-main-container"><ul id="main-nav-menu" class="menu sf-js-enabled"><li id="menu-item-14265" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-14265"><a href="http://www.importnew.com/">首页</a></li>
<li id="menu-item-14278" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-14278"><a href="http://www.importnew.com/all-posts">所有文章</a></li>
<li id="menu-item-858" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-858"><a href="http://www.importnew.com/cat/news">资讯</a></li>
<li id="menu-item-1120" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1120"><a href="http://www.importnew.com/cat/web-development">Web</a></li>
<li id="menu-item-1923" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1923"><a href="http://www.importnew.com/cat/architecture">架构</a></li>
<li id="menu-item-832" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-832"><a href="http://www.importnew.com/cat/basic">基础技术</a></li>
<li id="menu-item-836" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-836"><a href="http://www.importnew.com/cat/books">书籍</a></li>
<li id="menu-item-2183" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2183"><a href="http://www.importnew.com/cat/tutorial">教程</a></li>
<li id="menu-item-20858" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-20858"><a href="http://group.jobbole.com/category/tech/java/" class="external" rel="nofollow" target="_blank">Java小组</a></li>
<li id="menu-item-20859" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-20859"><a href="http://hao.jobbole.com/?catid=32" class="external" rel="nofollow" target="_blank">工具资源</a></li>
</ul><select class="selectnav" id="selectnav1"><option value="">- 导航条 -</option><option value="http://www.importnew.com/">首页</option><option value="http://www.importnew.com/all-posts">所有文章</option><option value="http://www.importnew.com/cat/news">资讯</option><option value="http://www.importnew.com/cat/web-development">Web</option><option value="http://www.importnew.com/cat/architecture">架构</option><option value="http://www.importnew.com/cat/basic">基础技术</option><option value="http://www.importnew.com/cat/books">书籍</option><option value="http://www.importnew.com/cat/tutorial">教程</option><option value="http://group.jobbole.com/category/tech/java/">Java小组</option><option value="http://hao.jobbole.com/?catid=32">工具资源</option></select></div>				
				<div class="clear"></div>
            
			</nav>
			<!-- END #main-nav -->
			
			<div class="clear"></div>
		
		</header>
		<!-- END header -->
		
		

<!-- BEGIN .grid-8 -->
<div class="grid-8">

		
	<!-- BEGIN .post -->
<div class="post-16327 post type-post status-publish format-standard hentry category-basic tag-gc tag-jvm odd" id="post-16327">
	
	<!-- BEGIN .entry-header -->
	<div class="entry-header">
	
				
		<h1>JVM 优化经验总结</h1>
		
							
	</div>
	<!-- BEGIN .entry-header -->
	
	<!-- BEGIN .entry-meta -->
	<div class="entry-meta">
	
		<p class="entry-meta-hide-on-mobile">2015/07/17 | 分类： <a href="http://www.importnew.com/cat/basic" title="查看 基础技术 中的全部文章" rel="category tag">基础技术</a> | <a href="http://www.importnew.com/16327.html#comments" title="《JVM 优化经验总结》上的评论">1 条评论</a>

		 | 标签： <a href="http://www.importnew.com/tag/gc">GC</a>, <a href="http://www.importnew.com/tag/jvm">JVM</a></p>
<!-- JiaThis Button BEGIN -->
<div class="jiathis_style" style="display: block; margin: 0 0px; clear: both;"><span class="jiathis_txt">分享到：</span>
<a class="jiathis_button_tsina" title="分享到微博"><span class="jiathis_txt jtico jtico_tsina"></span></a>
<a class="jiathis_button_weixin" title="分享到微信"><span class="jiathis_txt jtico jtico_weixin"></span></a>
<a class="jiathis_button_qzone" title="分享到QQ空间"><span class="jiathis_txt jtico jtico_qzone"></span></a>
<a class="jiathis_button_fb" title="分享到Facebook"><span class="jiathis_txt jtico jtico_fb"></span></a>
<a class="jiathis_button_renren" title="分享到人人网"><span class="jiathis_txt jtico jtico_renren"></span></a>
<a class="jiathis_button_douban" title="分享到豆瓣"><span class="jiathis_txt jtico jtico_douban"></span></a>
<a class="jiathis_button_readitlater"></a>
<a class="jiathis_button_evernote" title="分享到印象笔记"><span class="jiathis_txt jtico jtico_evernote"></span></a>
<a class="jiathis_button_ydnote" title="分享到有道云笔记"><span class="jiathis_txt jtico jtico_ydnote"></span></a>
<a href="http://www.jiathis.com/share?uid=1745061" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
<a class="jiathis_counter_style"><span class="jiathis_button_expanded jiathis_counter jiathis_bubble_style" id="jiathis_counter_26" title="累计分享27次">27</span></a>
</div>
<!-- JiaThis Button END -->


	</div>
	<!-- END .entry-meta -->

	<!-- BEGIN .entry -->
	<div class="entry">

        
		<div class="copyright-area">原文出处： <a ref="nofollow" target="_blank" href="http://www.ibm.com/developerworks/cn/java/j-lo-jvm-optimize-experience/index.html">周 耀明</a></div>
<h2 id="1. 开始之前|outline">开始之前</h2>
<p>Java 虚拟机有自己完善的硬件架构, 如处理器、堆栈、寄存器等，还具有相应的指令系统。JVM 屏蔽了与具体操作系统平台相关的信息，使得 Java 程序只需生成在 Java 虚拟机上运行的目标代码 (字节码), 就可以在多种平台上不加修改地运行。Java 虚拟机在执行字节码时，实际上最终还是把字节码解释成具体平台上的机器指令执行。</p>
<p>注意：本文仅针对 JDK7、HotSPOT Java 虚拟机，对于 JDK8 引入的 JVM 新特性及其他 Java 虚拟机，本文不予关注。</p>
<p>我们以一个例子开始这篇文章。假设你是一个普通的 Java 对象，你出生在 Eden 区，在 Eden 区有许多和你差不多的小兄弟、小姐妹，可以把 Eden 区当成幼儿园，在这个幼儿园里大家玩了很长时间。Eden 区不能无休止地放你们在里面，所以当年纪稍大，你就要被送到学校去上学，这里假设从小学到高中都称为 Survivor 区。开始的时候你在 Survivor 区里面划分出来的的“From”区，读到高年级了，就进了 Survivor 区的“To”区，中间由于学习成绩不稳定，还经常来回折腾。直到你 18 岁的时候，高中毕业了，该去社会上闯闯了。于是你就去了年老代，年老代里面人也很多。在年老代里，你生活了 20 年 (每次 GC 加一岁)，最后寿终正寝，被 GC 回收。有一点没有提，你在年老代遇到了一个同学，他的名字叫爱德华 (慕光之城里的帅哥吸血鬼)，他以及他的家族永远不会死，那么他们就生活在永生代。</p>
<p>之前的文章<a href="https://www.ibm.com/developerworks/cn/java/j-lo-JVMGarbageCollection/" class="external" rel="nofollow" target="_blank">《JVM 垃圾回收器工作原理及使用实例介绍》</a>中已经介绍过年轻代、年老代、永生代，本文主要讲讲如何运用这些区域，为系统性能提供更好的帮助。本文不再重复这些概念，直接进入主题。</p>
<h2 id="2. 如何将新对象预留在年轻代|outline">如何将新对象预留在年轻代</h2>
<p>众所周知，由于 Full GC 的成本远远高于 Minor GC，因此某些情况下需要尽可能将对象分配在年轻代，这在很多情况下是一个明智的选择。虽然在大部分情况下，JVM 会尝试在 Eden 区分配对象，但是由于空间紧张等问题，很可能不得不将部分年轻对象提前向年老代压缩。因此，在 JVM 参数调优时可以为应用程序分配一个合理的年轻代空间，以最大限度避免新对象直接进入年老代的情况发生。清单 1 所示代码尝试分配 4MB 内存空间，观察一下它的内存使用情况。</p>
<h5 id="2.0.1. 清单 1. 相同大小内存分配|outline">清单 1. 相同大小内存分配</h5>
<div><div id="highlighter_807620" class="syntaxhighlighter notranslate java"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">PutInEden {</code></div><div class="line number2 index1 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args){</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;</code><code class="java keyword">byte</code><code class="java plain">[] b1,b2,b3,b4;</code><code class="java comments">//定义变量</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">b1=</code><code class="java keyword">new</code> <code class="java keyword">byte</code><code class="java plain">[</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">1024</code><code class="java plain">];</code><code class="java comments">//分配 1MB 堆空间，考察堆空间的使用情况</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;</code><code class="java plain">b2=</code><code class="java keyword">new</code> <code class="java keyword">byte</code><code class="java plain">[</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">1024</code><code class="java plain">];</code></div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">b3=</code><code class="java keyword">new</code> <code class="java keyword">byte</code><code class="java plain">[</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">1024</code><code class="java plain">];</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;</code><code class="java plain">b4=</code><code class="java keyword">new</code> <code class="java keyword">byte</code><code class="java plain">[</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">1024</code><code class="java plain">];</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number9 index8 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>使用 JVM 参数-XX:+PrintGCDetails -Xmx20M -Xms20M 运行清单 1 所示代码，输出如清单 2 所示。</p>
<h5 id="2.0.2. 清单 2. 清单 1 运行输出|outline">清单 2. 清单 1 运行输出</h5>
<div><div id="highlighter_302847" class="syntaxhighlighter notranslate actionscript3"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="actionscript3 plain">[GC [DefNew: 5504K-&gt;640K(6144K), </code><code class="actionscript3 value">0.0114236</code> <code class="actionscript3 plain">secs] 5504K-&gt;5352K(19840K), </code></div><div class="line number2 index1 alt1"><code class="actionscript3 spaces">&nbsp;&nbsp;&nbsp;</code><code class="actionscript3 value">0.0114595</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.02</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.02</code> <code class="actionscript3 plain">secs] </code></div><div class="line number3 index2 alt2"><code class="actionscript3 plain">[GC [DefNew: 6144K-&gt;640K(6144K), </code><code class="actionscript3 value">0.0131261</code> <code class="actionscript3 plain">secs] 10856K-&gt;10782K(19840K),</code></div><div class="line number4 index3 alt1"><code class="actionscript3 value">0.0131612</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.02</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.02</code> <code class="actionscript3 plain">secs] </code></div><div class="line number5 index4 alt2"><code class="actionscript3 plain">[GC [DefNew: 6144K-&gt;6144K(6144K), </code><code class="actionscript3 value">0.0000170</code> <code class="actionscript3 plain">secs][Tenured: 10142K-&gt;13695K(13696K),</code></div><div class="line number6 index5 alt1"><code class="actionscript3 value">0.1069249</code> <code class="actionscript3 plain">secs] 16286K-&gt;15966K(19840K), [Perm : 376K-&gt;376K(12288K)],</code></div><div class="line number7 index6 alt2"><code class="actionscript3 value">0.1070058</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.11</code> <code class="actionscript3 plain">secs] </code></div><div class="line number8 index7 alt1"><code class="actionscript3 plain">[Full GC [Tenured: 13695K-&gt;13695K(13696K), </code><code class="actionscript3 value">0.0302067</code> <code class="actionscript3 plain">secs] 19839K-&gt;19595K(19840K), </code></div><div class="line number9 index8 alt2"><code class="actionscript3 plain">[Perm : 376K-&gt;376K(12288K)], </code><code class="actionscript3 value">0.0302635</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number10 index9 alt1"><code class="actionscript3 plain">[Full GC [Tenured: 13695K-&gt;13695K(13696K), </code><code class="actionscript3 value">0.0311986</code> <code class="actionscript3 plain">secs] 19839K-&gt;19839K(19840K), </code></div><div class="line number11 index10 alt2"><code class="actionscript3 plain">[Perm : 376K-&gt;376K(12288K)], </code><code class="actionscript3 value">0.0312515</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number12 index11 alt1"><code class="actionscript3 plain">[Full GC [Tenured: 13695K-&gt;13695K(13696K), </code><code class="actionscript3 value">0.0358821</code> <code class="actionscript3 plain">secs] 19839K-&gt;19825K(19840K), </code></div><div class="line number13 index12 alt2"><code class="actionscript3 plain">[Perm : 376K-&gt;371K(12288K)], </code><code class="actionscript3 value">0.0359315</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.05</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.05</code> <code class="actionscript3 plain">secs] </code></div><div class="line number14 index13 alt1"><code class="actionscript3 plain">[Full GC [Tenured: 13695K-&gt;13695K(13696K), </code><code class="actionscript3 value">0.0283080</code> <code class="actionscript3 plain">secs] 19839K-&gt;19839K(19840K),</code></div><div class="line number15 index14 alt2"><code class="actionscript3 plain">[Perm : 371K-&gt;371K(12288K)], </code><code class="actionscript3 value">0.0283723</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.02</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.01</code> <code class="actionscript3 plain">secs] </code></div><div class="line number16 index15 alt1"><code class="actionscript3 plain">[Full GC [Tenured: 13695K-&gt;13695K(13696K), </code><code class="actionscript3 value">0.0284469</code> <code class="actionscript3 plain">secs] 19839K-&gt;19839K(19840K),</code></div><div class="line number17 index16 alt2"><code class="actionscript3 plain">[Perm : 371K-&gt;371K(12288K)], </code><code class="actionscript3 value">0.0284990</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number18 index17 alt1"><code class="actionscript3 plain">[Full GC [Tenured: 13695K-&gt;13695K(13696K), </code><code class="actionscript3 value">0.0283005</code> <code class="actionscript3 plain">secs] 19839K-&gt;19839K(19840K),</code></div><div class="line number19 index18 alt2"><code class="actionscript3 plain">[Perm : 371K-&gt;371K(12288K)], </code><code class="actionscript3 value">0.0283475</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number20 index19 alt1"><code class="actionscript3 plain">[Full GC [Tenured: 13695K-&gt;13695K(13696K), </code><code class="actionscript3 value">0.0287757</code> <code class="actionscript3 plain">secs] 19839K-&gt;19839K(19840K),</code></div><div class="line number21 index20 alt2"><code class="actionscript3 plain">[Perm : 371K-&gt;371K(12288K)], </code><code class="actionscript3 value">0.0288294</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number22 index21 alt1"><code class="actionscript3 plain">[Full GC [Tenured: 13695K-&gt;13695K(13696K), </code><code class="actionscript3 value">0.0288219</code> <code class="actionscript3 plain">secs] 19839K-&gt;19839K(19840K), </code></div><div class="line number23 index22 alt2"><code class="actionscript3 plain">[Perm : 371K-&gt;371K(12288K)], </code><code class="actionscript3 value">0.0288709</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number24 index23 alt1"><code class="actionscript3 plain">[Full GC [Tenured: 13695K-&gt;13695K(13696K), </code><code class="actionscript3 value">0.0293071</code> <code class="actionscript3 plain">secs] 19839K-&gt;19839K(19840K),</code></div><div class="line number25 index24 alt2"><code class="actionscript3 plain">[Perm : 371K-&gt;371K(12288K)], </code><code class="actionscript3 value">0.0293607</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number26 index25 alt1"><code class="actionscript3 plain">[Full GC [Tenured: 13695K-&gt;13695K(13696K), </code><code class="actionscript3 value">0.0356141</code> <code class="actionscript3 plain">secs] 19839K-&gt;19838K(19840K),</code></div><div class="line number27 index26 alt2"><code class="actionscript3 plain">[Perm : 371K-&gt;371K(12288K)], </code><code class="actionscript3 value">0.0356654</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.01</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number28 index27 alt1"><code class="actionscript3 plain">Heap</code></div><div class="line number29 index28 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">def </code><code class="actionscript3 keyword">new</code> <code class="actionscript3 plain">generation total 6144K, used 6143K [</code><code class="actionscript3 value">0x35c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x362b0000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x362b0000</code><code class="actionscript3 plain">)</code></div><div class="line number30 index29 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">eden space 5504K, </code><code class="actionscript3 value">100</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x35c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36170000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36170000</code><code class="actionscript3 plain">)</code></div><div class="line number31 index30 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">from space 640K, </code><code class="actionscript3 value">99</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36170000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3620fc80</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36210000</code><code class="actionscript3 plain">)</code></div><div class="line number32 index31 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">to space 640K, </code><code class="actionscript3 value">0</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36210000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36210000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x362b0000</code><code class="actionscript3 plain">)</code></div><div class="line number33 index32 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">tenured generation total 13696K, used 13695K [</code><code class="actionscript3 value">0x362b0000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">)</code></div><div class="line number34 index33 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">the space 13696K, </code><code class="actionscript3 value">99</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x362b0000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3700fff8</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">)</code></div><div class="line number35 index34 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">compacting perm gen total 12288K, used 371K [</code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b010000</code><code class="actionscript3 plain">)</code></div><div class="line number36 index35 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">the space 12288K, </code><code class="actionscript3 value">3</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3706cd20</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3706ce00</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37c10000</code><code class="actionscript3 plain">)</code></div><div class="line number37 index36 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">ro space 10240K, </code><code class="actionscript3 value">51</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x3b010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b543000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b543000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3ba10000</code><code class="actionscript3 plain">)</code></div><div class="line number38 index37 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">rw space 12288K, </code><code class="actionscript3 value">55</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x3ba10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c0ae4f8</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c0ae600</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c610000</code><code class="actionscript3 plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>清单 2 所示的日志输出显示年轻代 Eden 的大小有 5MB 左右。分配足够大的年轻代空间，使用 JVM 参数-XX:+PrintGCDetails -Xmx20M -Xms20M-Xmn6M 运行清单 1 所示代码，输出如清单 3 所示。</p>
<h5 id="2.0.3. 清单 3. 增大 Eden 大小后清单 1 运行输出|outline">清单 3. 增大 Eden 大小后清单 1 运行输出</h5>
<div><div id="highlighter_773462" class="syntaxhighlighter notranslate actionscript3"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="actionscript3 plain">[GC [DefNew: 4992K-&gt;576K(5568K), </code><code class="actionscript3 value">0.0116036</code> <code class="actionscript3 plain">secs] 4992K-&gt;4829K(19904K), </code></div><div class="line number2 index1 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 value">0.0116439</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.02</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.02</code> <code class="actionscript3 plain">secs] </code></div><div class="line number3 index2 alt2"><code class="actionscript3 plain">[GC [DefNew: 5568K-&gt;576K(5568K), </code><code class="actionscript3 value">0.0130929</code> <code class="actionscript3 plain">secs] 9821K-&gt;9653K(19904K), </code></div><div class="line number4 index3 alt1"><code class="actionscript3 value">0.0131336</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.02</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.02</code> <code class="actionscript3 plain">secs] </code></div><div class="line number5 index4 alt2"><code class="actionscript3 plain">[GC [DefNew: 5568K-&gt;575K(5568K), </code><code class="actionscript3 value">0.0154148</code> <code class="actionscript3 plain">secs] 14645K-&gt;14500K(19904K),</code></div><div class="line number6 index5 alt1"><code class="actionscript3 value">0.0154531</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.00</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.01</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.01</code> <code class="actionscript3 plain">secs] </code></div><div class="line number7 index6 alt2"><code class="actionscript3 plain">[GC [DefNew: 5567K-&gt;5567K(5568K), </code><code class="actionscript3 value">0.0000197</code> <code class="actionscript3 plain">secs][Tenured: 13924K-&gt;14335K(14336K),</code></div><div class="line number8 index7 alt1"><code class="actionscript3 value">0.0330724</code> <code class="actionscript3 plain">secs] 19492K-&gt;19265K(19904K), [Perm : 376K-&gt;376K(12288K)],</code></div><div class="line number9 index8 alt2"><code class="actionscript3 value">0.0331624</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number10 index9 alt1"><code class="actionscript3 plain">[Full GC [Tenured: 14335K-&gt;14335K(14336K), </code><code class="actionscript3 value">0.0292459</code> <code class="actionscript3 plain">secs] 19903K-&gt;19902K(19904K),</code></div><div class="line number11 index10 alt2"><code class="actionscript3 plain">[Perm : 376K-&gt;376K(12288K)], </code><code class="actionscript3 value">0.0293000</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number12 index11 alt1"><code class="actionscript3 plain">[Full GC [Tenured: 14335K-&gt;14335K(14336K), </code><code class="actionscript3 value">0.0278675</code> <code class="actionscript3 plain">secs] 19903K-&gt;19903K(19904K),</code></div><div class="line number13 index12 alt2"><code class="actionscript3 plain">[Perm : 376K-&gt;376K(12288K)], </code><code class="actionscript3 value">0.0279215</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number14 index13 alt1"><code class="actionscript3 plain">[Full GC [Tenured: 14335K-&gt;14335K(14336K), </code><code class="actionscript3 value">0.0348408</code> <code class="actionscript3 plain">secs] 19903K-&gt;19889K(19904K),</code></div><div class="line number15 index14 alt2"><code class="actionscript3 plain">[Perm : 376K-&gt;371K(12288K)], </code><code class="actionscript3 value">0.0348945</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.05</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.05</code> <code class="actionscript3 plain">secs] </code></div><div class="line number16 index15 alt1"><code class="actionscript3 plain">[Full GC [Tenured: 14335K-&gt;14335K(14336K), </code><code class="actionscript3 value">0.0299813</code> <code class="actionscript3 plain">secs] 19903K-&gt;19903K(19904K),</code></div><div class="line number17 index16 alt2"><code class="actionscript3 plain">[Perm : 371K-&gt;371K(12288K)], </code><code class="actionscript3 value">0.0300349</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.01</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.02</code> <code class="actionscript3 plain">secs] </code></div><div class="line number18 index17 alt1"><code class="actionscript3 plain">[Full GC [Tenured: 14335K-&gt;14335K(14336K), </code><code class="actionscript3 value">0.0298178</code> <code class="actionscript3 plain">secs] 19903K-&gt;19903K(19904K),</code></div><div class="line number19 index18 alt2"><code class="actionscript3 plain">[Perm : 371K-&gt;371K(12288K)], </code><code class="actionscript3 value">0.0298688</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number20 index19 alt1"><code class="actionscript3 plain">Exception </code><code class="actionscript3 keyword">in</code> <code class="actionscript3 plain">thread </code><code class="actionscript3 string">"main"</code> <code class="actionscript3 plain">java.lang.OutOfMemoryError: Java heap space[Full GC [Tenured: </code></div><div class="line number21 index20 alt2"><code class="actionscript3 plain">14335K-&gt;14335K(14336K), </code><code class="actionscript3 value">0.0294953</code> <code class="actionscript3 plain">secs] 19903K-&gt;19903K(19904K),</code></div><div class="line number22 index21 alt1"><code class="actionscript3 plain">[Perm : 371K-&gt;371K(12288K)], </code><code class="actionscript3 value">0.0295474</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number23 index22 alt2"><code class="actionscript3 plain">[Full GC [Tenured</code></div><div class="line number24 index23 alt1"><code class="actionscript3 plain">: 14335K-&gt;14335K(14336K), </code><code class="actionscript3 value">0.0287742</code> <code class="actionscript3 plain">secs] 19903K-&gt;19903K(19904K), </code></div><div class="line number25 index24 alt2"><code class="actionscript3 plain">[Perm : 371K-&gt;371K(12288K)], </code><code class="actionscript3 value">0.0288239</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number26 index25 alt1"><code class="actionscript3 plain">[Full GC [Tenuredat GCTimeTest.main(GCTimeTest.java:</code><code class="actionscript3 value">16</code><code class="actionscript3 plain">)</code></div><div class="line number27 index26 alt2"><code class="actionscript3 plain">: 14335K-&gt;14335K(14336K), </code><code class="actionscript3 value">0.0287102</code> <code class="actionscript3 plain">secs] 19903K-&gt;19903K(19904K),</code></div><div class="line number28 index27 alt1"><code class="actionscript3 plain">[Perm : 371K-&gt;371K(12288K)], </code><code class="actionscript3 value">0.0287627</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number29 index28 alt2"><code class="actionscript3 plain">Heap</code></div><div class="line number30 index29 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">def </code><code class="actionscript3 keyword">new</code> <code class="actionscript3 plain">generation total 5568K, used 5567K [</code><code class="actionscript3 value">0x35c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36210000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36210000</code><code class="actionscript3 plain">)</code></div><div class="line number31 index30 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">eden space 4992K, </code><code class="actionscript3 value">100</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x35c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x360f0000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x360f0000</code><code class="actionscript3 plain">)</code></div><div class="line number32 index31 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">from space 576K, </code><code class="actionscript3 value">99</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36180000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3620ffe8</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36210000</code><code class="actionscript3 plain">)</code></div><div class="line number33 index32 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">to space 576K, </code><code class="actionscript3 value">0</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x360f0000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x360f0000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36180000</code><code class="actionscript3 plain">)</code></div><div class="line number34 index33 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">tenured generation total 14336K, used 14335K [</code><code class="actionscript3 value">0x36210000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">)</code></div><div class="line number35 index34 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">the space 14336K, </code><code class="actionscript3 value">99</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36210000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3700ffd8</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">)</code></div><div class="line number36 index35 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">compacting perm gen total 12288K, used 371K [</code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b010000</code><code class="actionscript3 plain">)</code></div><div class="line number37 index36 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">the space 12288K, </code><code class="actionscript3 value">3</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3706ce28</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3706d000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37c10000</code><code class="actionscript3 plain">)</code></div><div class="line number38 index37 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">ro space 10240K, </code><code class="actionscript3 value">51</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x3b010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b543000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b543000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3ba10000</code><code class="actionscript3 plain">)</code></div><div class="line number39 index38 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">rw space 12288K, </code><code class="actionscript3 value">55</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x3ba10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c0ae4f8</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c0ae600</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c610000</code><code class="actionscript3 plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>通过清单 2 和清单 3 对比，可以发现通过设置一个较大的年轻代预留新对象，设置合理的 Survivor 区并且提供 Survivor 区的使用率，可以将年轻对象保存在年轻代。一般来说，Survivor 区的空间不够，或者占用量达到 50%时，就会使对象进入年老代 (不管它的年龄有多大)。清单 4 创建了 3 个对象，分别分配一定的内存空间。</p>
<h5 id="2.0.4. 清单 4. 不同大小内存分配|outline">清单 4. 不同大小内存分配</h5>
<div><div id="highlighter_668616" class="syntaxhighlighter notranslate java"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">PutInEden2 {</code></div><div class="line number2 index1 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args){</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;</code><code class="java keyword">byte</code><code class="java plain">[] b1,b2,b3;</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">b1=</code><code class="java keyword">new</code> <code class="java keyword">byte</code><code class="java plain">[</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">512</code><code class="java plain">];</code><code class="java comments">//分配 0.5MB 堆空间</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;</code><code class="java plain">b2=</code><code class="java keyword">new</code> <code class="java keyword">byte</code><code class="java plain">[</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">4</code><code class="java plain">];</code><code class="java comments">//分配 4MB 堆空间</code></div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">b3=</code><code class="java keyword">new</code> <code class="java keyword">byte</code><code class="java plain">[</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">4</code><code class="java plain">];</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;</code><code class="java plain">b3=</code><code class="java keyword">null</code><code class="java plain">; </code><code class="java comments">//使 b3 可以被回收</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">b3=</code><code class="java keyword">new</code> <code class="java keyword">byte</code><code class="java plain">[</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">4</code><code class="java plain">];</code><code class="java comments">//分配 4MB 堆空间</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number10 index9 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>使用参数-XX:+PrintGCDetails -Xmx1000M -Xms500M -Xmn100M -XX:SurvivorRatio=8 运行清单 4 所示代码，输出如清单 5 所示。</p>
<h5 id="2.0.5. 清单 5. 清单 4 运行输出|outline">清单 5. 清单 4 运行输出</h5>
<div><div id="highlighter_769011" class="syntaxhighlighter notranslate actionscript3"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="actionscript3 plain">Heap</code></div><div class="line number2 index1 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">def </code><code class="actionscript3 keyword">new</code> <code class="actionscript3 plain">generation total 92160K, used 11878K [</code><code class="actionscript3 value">0x0f010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x15410000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x15410000</code><code class="actionscript3 plain">)</code></div><div class="line number3 index2 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">eden space 81920K, </code><code class="actionscript3 value">2</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x0f010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x0f1a9a20</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x14010000</code><code class="actionscript3 plain">)</code></div><div class="line number4 index3 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">from space 10240K, </code><code class="actionscript3 value">99</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x14a10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x1540fff8</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x15410000</code><code class="actionscript3 plain">)</code></div><div class="line number5 index4 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">to space 10240K, </code><code class="actionscript3 value">0</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x14010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x14010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x14a10000</code><code class="actionscript3 plain">)</code></div><div class="line number6 index5 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">tenured generation total 409600K, used 86434K [</code><code class="actionscript3 value">0x15410000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x2e410000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x4d810000</code><code class="actionscript3 plain">)</code></div><div class="line number7 index6 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">the space 409600K, </code><code class="actionscript3 value">21</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x15410000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x1a878b18</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x1a878c00</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x2e410000</code><code class="actionscript3 plain">)</code></div><div class="line number8 index7 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">compacting perm gen total 12288K, used 2062K [</code><code class="actionscript3 value">0x4d810000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x4e410000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x51810000</code><code class="actionscript3 plain">)</code></div><div class="line number9 index8 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">the space 12288K, </code><code class="actionscript3 value">16</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x4d810000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x4da13b18</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x4da13c00</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x4e410000</code><code class="actionscript3 plain">)</code></div><div class="line number10 index9 alt1"><code class="actionscript3 plain">No shared spaces configured.</code></div></div></td></tr></tbody></table></div></div>
<p>清单 5 输出的日志显示，年轻代分配了 8M，年老代也分配了 8M。我们可以尝试加上-XX:TargetSurvivorRatio=90 参数，这样可以提高 from 区的利用率，使 from 区使用到 90%时，再将对象送入年老代，运行清单 4 代码，输出如清单 6 所示。</p>
<h5 id="2.0.6. 清单 6. 修改运行参数后清单 4 输出|outline">清单 6. 修改运行参数后清单 4 输出</h5>
<div><div id="highlighter_775954" class="syntaxhighlighter notranslate actionscript3"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="actionscript3 plain">Heap</code></div><div class="line number2 index1 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">def </code><code class="actionscript3 keyword">new</code> <code class="actionscript3 plain">generation total 9216K, used 9215K [</code><code class="actionscript3 value">0x35c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">)</code></div><div class="line number3 index2 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">eden space 8192K, </code><code class="actionscript3 value">100</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x35c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36410000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36410000</code><code class="actionscript3 plain">)</code></div><div class="line number4 index3 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">from space 1024K, </code><code class="actionscript3 value">99</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36510000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3660fc50</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">)</code></div><div class="line number5 index4 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">to space 1024K, </code><code class="actionscript3 value">0</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36410000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36410000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36510000</code><code class="actionscript3 plain">)</code></div><div class="line number6 index5 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">tenured generation total 10240K, used 10239K [</code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">)</code></div><div class="line number7 index6 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">the space 10240K, </code><code class="actionscript3 value">99</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3700ff70</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">)</code></div><div class="line number8 index7 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">compacting perm gen total 12288K, used 371K [</code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b010000</code><code class="actionscript3 plain">)</code></div><div class="line number9 index8 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">the space 12288K, </code><code class="actionscript3 value">3</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3706cd90</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3706ce00</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37c10000</code><code class="actionscript3 plain">)</code></div><div class="line number10 index9 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">ro space 10240K, </code><code class="actionscript3 value">51</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x3b010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b543000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b543000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3ba10000</code><code class="actionscript3 plain">)</code></div><div class="line number11 index10 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">rw space 12288K, </code><code class="actionscript3 value">55</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x3ba10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c0ae4f8</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c0ae600</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c610000</code><code class="actionscript3 plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>如果将 SurvivorRatio 设置为 2，将 b1 对象预存在年轻代。输出如清单 7 所示。</p>
<h5 id="2.0.7. 清单 7. 再次修改运行参数后清单 4 输出|outline">清单 7. 再次修改运行参数后清单 4 输出</h5>
<div><div id="highlighter_415891" class="syntaxhighlighter notranslate actionscript3"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="actionscript3 plain">Heap</code></div><div class="line number2 index1 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">def </code><code class="actionscript3 keyword">new</code> <code class="actionscript3 plain">generation total 7680K, used 7679K [</code><code class="actionscript3 value">0x35c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">)</code></div><div class="line number3 index2 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">eden space 5120K, </code><code class="actionscript3 value">100</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x35c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36110000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36110000</code><code class="actionscript3 plain">)</code></div><div class="line number4 index3 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">from space 2560K, </code><code class="actionscript3 value">99</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36110000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3638fff0</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36390000</code><code class="actionscript3 plain">)</code></div><div class="line number5 index4 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">to space 2560K, </code><code class="actionscript3 value">0</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36390000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36390000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">)</code></div><div class="line number6 index5 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">tenured generation total 10240K, used 10239K [</code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">)</code></div><div class="line number7 index6 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">the space 10240K, </code><code class="actionscript3 value">99</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3700fff0</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">)</code></div><div class="line number8 index7 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">compacting perm gen total 12288K, used 371K [</code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b010000</code><code class="actionscript3 plain">)</code></div><div class="line number9 index8 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">the space 12288K, </code><code class="actionscript3 value">3</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3706ce28</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3706d000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37c10000</code><code class="actionscript3 plain">)</code></div><div class="line number10 index9 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">ro space 10240K, </code><code class="actionscript3 value">51</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x3b010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b543000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b543000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3ba10000</code><code class="actionscript3 plain">)</code></div><div class="line number11 index10 alt2"><code class="actionscript3 plain">rw space 12288K, </code><code class="actionscript3 value">55</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x3ba10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c0ae4f8</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c0ae600</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c610000</code><code class="actionscript3 plain">)</code></div></div></td></tr></tbody></table></div></div>
<h2 id="3. 如何让大对象进入年老代|outline">如何让大对象进入年老代</h2>
<p>我们在大部分情况下都会选择将对象分配在年轻代。但是，对于占用内存较多的大对象而言，它的选择可能就不是这样的。因为大对象出现在年轻代很可能扰乱年轻代 GC，并破坏年轻代原有的对象结构。因为尝试在年轻代分配大对象，很可能导致空间不足，为了有足够的空间容纳大对象，JVM 不得不将年轻代中的年轻对象挪到年老代。因为大对象占用空间多，所以可能需要移动大量小的年轻对象进入年老代，这对 GC 相当不利。基于以上原因，可以将大对象直接分配到年老代，保持年轻代对象结构的完整性，这样可以提高 GC 的效率。如果一个大对象同时又是一个短命的对象，假设这种情况出现很频繁，那对于 GC 来说会是一场灾难。原本应该用于存放永久对象的年老代，被短命的对象塞满，这也意味着对堆空间进行了洗牌，扰乱了分代内存回收的基本思路。因此，在软件开发过程中，应该尽可能避免使用短命的大对象。可以使用参数-XX:PetenureSizeThreshold 设置大对象直接进入年老代的阈值。当对象的大小超过这个值时，将直接在年老代分配。参数-XX:PetenureSizeThreshold 只对串行收集器和年轻代并行收集器有效，并行回收收集器不识别这个参数。</p>
<h5 id="3.0.1. 清单 8. 创建一个大对象|outline">清单 8. 创建一个大对象</h5>
<div><div id="highlighter_124146" class="syntaxhighlighter notranslate java"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">BigObj2Old {</code></div><div class="line number2 index1 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args){</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;</code><code class="java keyword">byte</code><code class="java plain">[] b;</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">b = </code><code class="java keyword">new</code> <code class="java keyword">byte</code><code class="java plain">[</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">1024</code><code class="java plain">];</code><code class="java comments">//分配一个 1MB 的对象</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number6 index5 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>使用 JVM 参数-XX:+PrintGCDetails –Xmx20M –Xms20MB 运行，可以得到清单 9 所示日志输出。</p>
<h5 id="3.0.2. 清单 9. 清单 8 运行输出|outline">清单 9. 清单 8 运行输出</h5>
<div><div id="highlighter_475959" class="syntaxhighlighter notranslate actionscript3"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="actionscript3 plain">Heap</code></div><div class="line number2 index1 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">def </code><code class="actionscript3 keyword">new</code> <code class="actionscript3 plain">generation total 6144K, used 1378K [</code><code class="actionscript3 value">0x35c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x362b0000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x362b0000</code><code class="actionscript3 plain">)</code></div><div class="line number3 index2 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">eden space 5504K, </code><code class="actionscript3 value">25</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x35c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x35d689e8</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36170000</code><code class="actionscript3 plain">)</code></div><div class="line number4 index3 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">from space 640K, </code><code class="actionscript3 value">0</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36170000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36170000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36210000</code><code class="actionscript3 plain">)</code></div><div class="line number5 index4 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">to space 640K, </code><code class="actionscript3 value">0</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36210000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36210000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x362b0000</code><code class="actionscript3 plain">)</code></div><div class="line number6 index5 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">tenured generation total 13696K, used 0K [</code><code class="actionscript3 value">0x362b0000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">)</code></div><div class="line number7 index6 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">the space 13696K, </code><code class="actionscript3 value">0</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x362b0000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x362b0000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x362b0200</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">)</code></div><div class="line number8 index7 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">compacting perm gen total 12288K, used 374K [</code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b010000</code><code class="actionscript3 plain">)</code></div><div class="line number9 index8 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">the space 12288K, </code><code class="actionscript3 value">3</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3706dac8</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3706dc00</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37c10000</code><code class="actionscript3 plain">)</code></div><div class="line number10 index9 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">ro space 10240K, </code><code class="actionscript3 value">51</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x3b010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b543000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b543000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3ba10000</code><code class="actionscript3 plain">)</code></div><div class="line number11 index10 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">rw space 12288K, </code><code class="actionscript3 value">55</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x3ba10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c0ae4f8</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c0ae600</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c610000</code><code class="actionscript3 plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>可以看到该对象被分配在了年轻代，占用了 25%的空间。如果需要将 1MB 以上的对象直接在年老代分配，设置-XX:PetenureSizeThreshold=1000000，程序运行后输出如清单 10 所示。</p>
<h5 id="3.0.3. 清单 10. 修改运行参数后清单 8 输出|outline">清单 10. 修改运行参数后清单 8 输出</h5>
<div><div id="highlighter_604682" class="syntaxhighlighter notranslate actionscript3"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="actionscript3 plain">Heap</code></div><div class="line number2 index1 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">def </code><code class="actionscript3 keyword">new</code> <code class="actionscript3 plain">generation total 6144K, used 354K [</code><code class="actionscript3 value">0x35c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x362b0000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x362b0000</code><code class="actionscript3 plain">)</code></div><div class="line number3 index2 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">eden space 5504K, </code><code class="actionscript3 value">6</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x35c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x35c689d8</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36170000</code><code class="actionscript3 plain">)</code></div><div class="line number4 index3 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">from space 640K, </code><code class="actionscript3 value">0</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36170000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36170000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36210000</code><code class="actionscript3 plain">)</code></div><div class="line number5 index4 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">to space 640K, </code><code class="actionscript3 value">0</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36210000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36210000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x362b0000</code><code class="actionscript3 plain">)</code></div><div class="line number6 index5 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">tenured generation total 13696K, used 1024K [</code><code class="actionscript3 value">0x362b0000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">)</code></div><div class="line number7 index6 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">the space 13696K, </code><code class="actionscript3 value">7</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x362b0000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x363b0010</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x363b0200</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">)</code></div><div class="line number8 index7 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">compacting perm gen total 12288K, used 374K [</code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b010000</code><code class="actionscript3 plain">)</code></div><div class="line number9 index8 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">the space 12288K, </code><code class="actionscript3 value">3</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3706dac8</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3706dc00</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37c10000</code><code class="actionscript3 plain">)</code></div><div class="line number10 index9 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">ro space 10240K, </code><code class="actionscript3 value">51</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x3b010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b543000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b543000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3ba10000</code><code class="actionscript3 plain">)</code></div><div class="line number11 index10 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">rw space 12288K, </code><code class="actionscript3 value">55</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x3ba10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c0ae4f8</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c0ae600</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c610000</code><code class="actionscript3 plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>清单 10 里面可以看到当满 1MB 时进入到了年老代。</p>
<h2 id="4. 如何设置对象进入年老代的年龄|outline">如何设置对象进入年老代的年龄</h2>
<p>堆中的每一个对象都有自己的年龄。一般情况下，年轻对象存放在年轻代，年老对象存放在年老代。为了做到这点，虚拟机为每个对象都维护一个年龄。如果对象在 Eden 区，经过一次 GC 后依然存活，则被移动到 Survivor 区中，对象年龄加 1。以后，如果对象每经过一次 GC 依然存活，则年龄再加 1。当对象年龄达到阈值时，就移入年老代，成为老年对象。这个阈值的最大值可以通过参数-XX:MaxTenuringThreshold 来设置，默认值是 15。虽然-XX:MaxTenuringThreshold 的值可能是 15 或者更大，但这不意味着新对象非要达到这个年龄才能进入年老代。事实上，对象实际进入年老代的年龄是虚拟机在运行时根据内存使用情况动态计算的，这个参数指定的是阈值年龄的最大值。即，实际晋升年老代年龄等于动态计算所得的年龄与-XX:MaxTenuringThreshold 中较小的那个。清单 11 所示代码为 3 个对象申请了若干内存。</p>
<h5 id="4.0.1. 清单 11. 申请内存|outline">清单 11. 申请内存</h5>
<div><div id="highlighter_858715" class="syntaxhighlighter notranslate java"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">MaxTenuringThreshold {</code></div><div class="line number2 index1 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String args[]){</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;</code><code class="java keyword">byte</code><code class="java plain">[] b1,b2,b3;</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">b1 = </code><code class="java keyword">new</code> <code class="java keyword">byte</code><code class="java plain">[</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">512</code><code class="java plain">];</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;</code><code class="java plain">b2 = </code><code class="java keyword">new</code> <code class="java keyword">byte</code><code class="java plain">[</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">2</code><code class="java plain">];</code></div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">b3 = </code><code class="java keyword">new</code> <code class="java keyword">byte</code><code class="java plain">[</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">4</code><code class="java plain">];</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;</code><code class="java plain">b3 = </code><code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">b3 = </code><code class="java keyword">new</code> <code class="java keyword">byte</code><code class="java plain">[</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">4</code><code class="java plain">];</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number10 index9 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>参数设置为：-XX:+PrintGCDetails -Xmx20M -Xms20M -Xmn10M -XX:SurvivorRatio=2</p>
<p>运行清单 11 所示代码，输出如清单 12 所示。</p>
<h5 id="4.0.2. 清单 12. 清单 11 运行输出|outline">清单 12. 清单 11 运行输出</h5>
<div><div id="highlighter_721546" class="syntaxhighlighter notranslate actionscript3"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="actionscript3 plain">[GC [DefNew: 2986K-&gt;690K(7680K), </code><code class="actionscript3 value">0.0246816</code> <code class="actionscript3 plain">secs] 2986K-&gt;2738K(17920K),</code></div><div class="line number2 index1 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 value">0.0247226</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.00</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.02</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number3 index2 alt2"><code class="actionscript3 plain">[GC [DefNew: 4786K-&gt;690K(7680K), </code><code class="actionscript3 value">0.0016073</code> <code class="actionscript3 plain">secs] 6834K-&gt;2738K(17920K), </code></div><div class="line number4 index3 alt1"><code class="actionscript3 value">0.0016436</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.00</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.00</code> <code class="actionscript3 plain">secs] </code></div><div class="line number5 index4 alt2"><code class="actionscript3 plain">Heap</code></div><div class="line number6 index5 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">def </code><code class="actionscript3 keyword">new</code> <code class="actionscript3 plain">generation total 7680K, used 4888K [</code><code class="actionscript3 value">0x35c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">)</code></div><div class="line number7 index6 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">eden space 5120K, </code><code class="actionscript3 value">82</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x35c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36029a18</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36110000</code><code class="actionscript3 plain">)</code></div><div class="line number8 index7 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">from space 2560K, </code><code class="actionscript3 value">26</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36110000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x361bc950</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36390000</code><code class="actionscript3 plain">)</code></div><div class="line number9 index8 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">to space 2560K, </code><code class="actionscript3 value">0</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36390000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36390000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">)</code></div><div class="line number10 index9 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">tenured generation total 10240K, used 2048K [</code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">)</code></div><div class="line number11 index10 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">the space 10240K, </code><code class="actionscript3 value">20</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36810010</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36810200</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">)</code></div><div class="line number12 index11 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">compacting perm gen total 12288K, used 374K [</code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b010000</code><code class="actionscript3 plain">)</code></div><div class="line number13 index12 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">the space 12288K, </code><code class="actionscript3 value">3</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3706db50</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3706dc00</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37c10000</code><code class="actionscript3 plain">)</code></div><div class="line number14 index13 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">ro space 10240K, </code><code class="actionscript3 value">51</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x3b010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b543000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b543000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3ba10000</code><code class="actionscript3 plain">)</code></div><div class="line number15 index14 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">rw space 12288K, </code><code class="actionscript3 value">55</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x3ba10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c0ae4f8</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c0ae600</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c610000</code><code class="actionscript3 plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>更改参数为-XX:+PrintGCDetails -Xmx20M -Xms20M -Xmn10M -XX:SurvivorRatio=2 -XX:MaxTenuringThreshold=1，运行清单 11 所示代码，输出如清单 13 所示。</p>
<h5 id="4.0.3. 清单 13. 修改运行参数后清单 11 输出|outline">清单 13. 修改运行参数后清单 11 输出</h5>
<div><div id="highlighter_377363" class="syntaxhighlighter notranslate actionscript3"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="actionscript3 plain">[GC [DefNew: 2986K-&gt;690K(7680K), </code><code class="actionscript3 value">0.0047778</code> <code class="actionscript3 plain">secs] 2986K-&gt;2738K(17920K),</code></div><div class="line number2 index1 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 value">0.0048161</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.00</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.00</code> <code class="actionscript3 plain">secs] </code></div><div class="line number3 index2 alt2"><code class="actionscript3 plain">[GC [DefNew: 4888K-&gt;0K(7680K), </code><code class="actionscript3 value">0.0016271</code> <code class="actionscript3 plain">secs] 6936K-&gt;2738K(17920K),</code></div><div class="line number4 index3 alt1"><code class="actionscript3 value">0.0016630</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.00</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.00</code> <code class="actionscript3 plain">secs] </code></div><div class="line number5 index4 alt2"><code class="actionscript3 plain">Heap</code></div><div class="line number6 index5 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">def </code><code class="actionscript3 keyword">new</code> <code class="actionscript3 plain">generation total 7680K, used 4198K [</code><code class="actionscript3 value">0x35c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">)</code></div><div class="line number7 index6 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">eden space 5120K, </code><code class="actionscript3 value">82</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x35c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36029a18</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36110000</code><code class="actionscript3 plain">)</code></div><div class="line number8 index7 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">from space 2560K, </code><code class="actionscript3 value">0</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36110000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36110088</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36390000</code><code class="actionscript3 plain">)</code></div><div class="line number9 index8 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">to space 2560K, </code><code class="actionscript3 value">0</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36390000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36390000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">)</code></div><div class="line number10 index9 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">tenured generation total 10240K, used 2738K [</code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">)</code></div><div class="line number11 index10 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">the space 10240K, </code><code class="actionscript3 value">26</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x36610000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x368bc890</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x368bca00</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">)</code></div><div class="line number12 index11 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">compacting perm gen total 12288K, used 374K [</code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37c10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b010000</code><code class="actionscript3 plain">)</code></div><div class="line number13 index12 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">the space 12288K, </code><code class="actionscript3 value">3</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x37010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3706db50</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3706dc00</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x37c10000</code><code class="actionscript3 plain">)</code></div><div class="line number14 index13 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">ro space 10240K, </code><code class="actionscript3 value">51</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x3b010000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b543000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3b543000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3ba10000</code><code class="actionscript3 plain">)</code></div><div class="line number15 index14 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">rw space 12288K, </code><code class="actionscript3 value">55</code><code class="actionscript3 plain">% used [</code><code class="actionscript3 value">0x3ba10000</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c0ae4f8</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c0ae600</code><code class="actionscript3 plain">, </code><code class="actionscript3 value">0x3c610000</code><code class="actionscript3 plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>清单 13 所示，第一次运行时 b1 对象在程序结束后依然保存在年轻代。第二次运行前，我们减小了对象晋升年老代的年龄，设置为 1。即，所有经过一次 GC 的对象都可以直接进入年老代。程序运行后，可以发现 b1 对象已经被分配到年老代。如果希望对象尽可能长时间地停留在年轻代，可以设置一个较大的阈值。</p>
<h2 id="5. 稳定的 Java 堆 VS 动荡的 Java 堆|outline">稳定的 Java 堆 VS 动荡的 Java 堆</h2>
<p>一般来说，稳定的堆大小对垃圾回收是有利的。获得一个稳定的堆大小的方法是使-Xms 和-Xmx 的大小一致，即最大堆和最小堆 (初始堆) 一样。如果这样设置，系统在运行时堆大小理论上是恒定的，稳定的堆空间可以减少 GC 的次数。因此，很多服务端应用都会将最大堆和最小堆设置为相同的数值。但是，一个不稳定的堆并非毫无用处。稳定的堆大小虽然可以减少 GC 次数，但同时也增加了每次 GC 的时间。让堆大小在一个区间中震荡，在系统不需要使用大内存时，压缩堆空间，使 GC 应对一个较小的堆，可以加快单次 GC 的速度。基于这样的考虑，JVM 还提供了两个参数用于压缩和扩展堆空间。</p>
<p>-XX:MinHeapFreeRatio 参数用来设置堆空间最小空闲比例，默认值是 40。当堆空间的空闲内存小于这个数值时，JVM 便会扩展堆空间。</p>
<p>-XX:MaxHeapFreeRatio 参数用来设置堆空间最大空闲比例，默认值是 70。当堆空间的空闲内存大于这个数值时，便会压缩堆空间，得到一个较小的堆。</p>
<p>当-Xmx 和-Xms 相等时，-XX:MinHeapFreeRatio 和-XX:MaxHeapFreeRatio 两个参数无效。</p>
<h5 id="5.0.1. 清单 14. 堆大小设置|outline">清单 14. 堆大小设置</h5>
<div><div id="highlighter_63552" class="syntaxhighlighter notranslate java"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">import</code> <code class="java plain">java.util.Vector;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">HeapSize {</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String args[]) </code><code class="java keyword">throws</code> <code class="java plain">InterruptedException{</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;</code><code class="java plain">Vector v = </code><code class="java keyword">new</code> <code class="java plain">Vector();</code></div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;</code><code class="java keyword">while</code><code class="java plain">(</code><code class="java keyword">true</code><code class="java plain">){</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;</code><code class="java keyword">byte</code><code class="java plain">[] b = </code><code class="java keyword">new</code> <code class="java keyword">byte</code><code class="java plain">[</code><code class="java value">1024</code><code class="java plain">*</code><code class="java value">1024</code><code class="java plain">];</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">v.add(b);</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;</code><code class="java keyword">if</code><code class="java plain">(v.size() == </code><code class="java value">10</code><code class="java plain">){</code></div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">v = </code><code class="java keyword">new</code> <code class="java plain">Vector();</code></div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">Thread.sleep(</code><code class="java value">1</code><code class="java plain">);</code></div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">}</code></div><div class="line number15 index14 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>清单 14 所示代码是测试-XX:MinHeapFreeRatio 和-XX:MaxHeapFreeRatio 的作用，设置运行参数为-XX:+PrintGCDetails -Xms10M -Xmx40M -XX:MinHeapFreeRatio=40 -XX:MaxHeapFreeRatio=50 时，输出如清单 15 所示。</p>
<h5 id="5.0.2. 清单 15. 修改运行参数后清单 14 输出|outline">清单 15. 修改运行参数后清单 14 输出</h5>
<div><div id="highlighter_892212" class="syntaxhighlighter notranslate actionscript3"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="actionscript3 plain">[GC [DefNew: 2418K-&gt;178K(3072K), </code><code class="actionscript3 value">0.0034827</code> <code class="actionscript3 plain">secs] 2418K-&gt;2226K(9920K),</code></div><div class="line number2 index1 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 value">0.0035249</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.00</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number3 index2 alt2"><code class="actionscript3 plain">[GC [DefNew: 2312K-&gt;0K(3072K), </code><code class="actionscript3 value">0.0028263</code> <code class="actionscript3 plain">secs] 4360K-&gt;4274K(9920K), </code></div><div class="line number4 index3 alt1"><code class="actionscript3 value">0.0029905</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.00</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number5 index4 alt2"><code class="actionscript3 plain">[GC [DefNew: 2068K-&gt;0K(3072K), </code><code class="actionscript3 value">0.0024363</code> <code class="actionscript3 plain">secs] 6342K-&gt;6322K(9920K),</code></div><div class="line number6 index5 alt1"><code class="actionscript3 value">0.0024836</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.00</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number7 index6 alt2"><code class="actionscript3 plain">[GC [DefNew: 2061K-&gt;0K(3072K), </code><code class="actionscript3 value">0.0017376</code> <code class="actionscript3 plain">secs][Tenured: 8370K-&gt;8370K(8904K),</code></div><div class="line number8 index7 alt1"><code class="actionscript3 value">0.1392692</code> <code class="actionscript3 plain">secs] 8384K-&gt;8370K(11976K), [Perm : 374K-&gt;374K(12288K)],</code></div><div class="line number9 index8 alt2"><code class="actionscript3 value">0.1411363</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.00</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.02</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.16</code> <code class="actionscript3 plain">secs] </code></div><div class="line number10 index9 alt1"><code class="actionscript3 plain">[GC [DefNew: 5138K-&gt;0K(6336K), </code><code class="actionscript3 value">0.0038237</code> <code class="actionscript3 plain">secs] 13508K-&gt;13490K(20288K),</code></div><div class="line number11 index10 alt2"><code class="actionscript3 value">0.0038632</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.00</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs]</code></div></div></td></tr></tbody></table></div></div>
<p>改用参数：-XX:+PrintGCDetails -Xms40M -Xmx40M -XX:MinHeapFreeRatio=40 -XX:MaxHeapFreeRatio=50，运行输出如清单 16 所示。</p>
<h5 id="5.0.3. 清单 16. 再次修改运行参数后清单 14 输出|outline">清单 16. 再次修改运行参数后清单 14 输出</h5>
<div><div id="highlighter_389051" class="syntaxhighlighter notranslate actionscript3"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="actionscript3 plain">[GC [DefNew: 10678K-&gt;178K(12288K), </code><code class="actionscript3 value">0.0019448</code> <code class="actionscript3 plain">secs] 10678K-&gt;178K(39616K), </code></div><div class="line number2 index1 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 value">0.0019851</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.00</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.03</code> <code class="actionscript3 plain">secs] </code></div><div class="line number3 index2 alt2"><code class="actionscript3 plain">[GC [DefNew: 10751K-&gt;178K(12288K), </code><code class="actionscript3 value">0.0010295</code> <code class="actionscript3 plain">secs] 10751K-&gt;178K(39616K),</code></div><div class="line number4 index3 alt1"><code class="actionscript3 value">0.0010697</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.00</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.02</code> <code class="actionscript3 plain">secs] </code></div><div class="line number5 index4 alt2"><code class="actionscript3 plain">[GC [DefNew: 10493K-&gt;178K(12288K), </code><code class="actionscript3 value">0.0008301</code> <code class="actionscript3 plain">secs] 10493K-&gt;178K(39616K),</code></div><div class="line number6 index5 alt1"><code class="actionscript3 value">0.0008672</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.00</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.02</code> <code class="actionscript3 plain">secs] </code></div><div class="line number7 index6 alt2"><code class="actionscript3 plain">[GC [DefNew: 10467K-&gt;178K(12288K), </code><code class="actionscript3 value">0.0008522</code> <code class="actionscript3 plain">secs] 10467K-&gt;178K(39616K),</code></div><div class="line number8 index7 alt1"><code class="actionscript3 value">0.0008905</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.00</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.02</code> <code class="actionscript3 plain">secs] </code></div><div class="line number9 index8 alt2"><code class="actionscript3 plain">[GC [DefNew: 10450K-&gt;178K(12288K), </code><code class="actionscript3 value">0.0008964</code> <code class="actionscript3 plain">secs] 10450K-&gt;178K(39616K),</code></div><div class="line number10 index9 alt1"><code class="actionscript3 value">0.0009339</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.00</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.01</code> <code class="actionscript3 plain">secs] </code></div><div class="line number11 index10 alt2"><code class="actionscript3 plain">[GC [DefNew: 10439K-&gt;178K(12288K), </code><code class="actionscript3 value">0.0009876</code> <code class="actionscript3 plain">secs] 10439K-&gt;178K(39616K),</code></div><div class="line number12 index11 alt1"><code class="actionscript3 value">0.0010279</code> <code class="actionscript3 plain">secs] [Times: user=</code><code class="actionscript3 value">0.00</code> <code class="actionscript3 plain">sys=</code><code class="actionscript3 value">0.00</code><code class="actionscript3 plain">, real=</code><code class="actionscript3 value">0.02</code> <code class="actionscript3 plain">secs]</code></div></div></td></tr></tbody></table></div></div>
<p>从清单 16 可以看出，此时堆空间的垃圾回收稳定在一个固定的范围。在一个稳定的堆中，堆空间大小始终不变，每次 GC 时，都要应对一个 40MB 的空间。因此，虽然 GC 次数减小了，但是单次 GC 速度不如一个震荡的堆。</p>
<h2 id="6. 增大吞吐量提升系统性能|outline">增大吞吐量提升系统性能</h2>
<p>吞吐量优先的方案将会尽可能减少系统执行垃圾回收的总时间，故可以考虑关注系统吞吐量的并行回收收集器。在拥有高性能的计算机上，进行吞吐量优先优化，可以使用参数：</p>
<div><div id="highlighter_811058" class="syntaxhighlighter notranslate actionscript3"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="actionscript3 plain">java –Xmx3800m –Xms3800m –Xmn2G –Xss128k –XX:+UseParallelGC </code></div><div class="line number2 index1 alt1"><code class="actionscript3 spaces">&nbsp;&nbsp;&nbsp;</code><code class="actionscript3 plain">–XX:ParallelGC-Threads=</code><code class="actionscript3 value">20</code> <code class="actionscript3 plain">–XX:+UseParallelOldGC</code></div></div></td></tr></tbody></table></div></div>
<p>–Xmx380m –Xms3800m：设置 Java 堆的最大值和初始值。一般情况下，为了避免堆内存的频繁震荡，导致系统性能下降，我们的做法是设置最大堆等于最小堆。假设这里把最小堆减少为最大堆的一半，即 1900m，那么 JVM 会尽可能在 1900MB 堆空间中运行，如果这样，发生 GC 的可能性就会比较高；</p>
<p>-Xss128k：减少线程栈的大小，这样可以使剩余的系统内存支持更多的线程；</p>
<p>-Xmn2g：设置年轻代区域大小为 2GB；</p>
<p>–XX:+UseParallelGC：年轻代使用并行垃圾回收收集器。这是一个关注吞吐量的收集器，可以尽可能地减少 GC 时间。</p>
<p>–XX:ParallelGC-Threads：设置用于垃圾回收的线程数，通常情况下，可以设置和 CPU 数量相等。但在 CPU 数量比较多的情况下，设置相对较小的数值也是合理的；</p>
<p>–XX:+UseParallelOldGC：设置年老代使用并行回收收集器。</p>
<h2 id="7. 尝试使用大的内存分页|outline">尝试使用大的内存分页</h2>
<p>CPU 是通过寻址来访问内存的。32 位 CPU 的寻址宽度是 0~0xFFFFFFFF ，计算后得到的大小是 4G，也就是说可支持的物理内存最大是 4G。但在实践过程中，碰到了这样的问题，程序需要使用 4G 内存，而可用物理内存小于 4G，导致程序不得不降低内存占用。为了解决此类问题，现代 CPU 引入了 MMU（Memory Management Unit 内存管理单元）。MMU 的核心思想是利用虚拟地址替代物理地址，即 CPU 寻址时使用虚址，由 MMU 负责将虚址映射为物理地址。MMU 的引入，解决了对物理内存的限制，对程序来说，就像自己在使用 4G 内存一样。内存分页 (Paging) 是在使用 MMU 的基础上，提出的一种内存管理机制。它将虚拟地址和物理地址按固定大小（4K）分割成页 (page) 和页帧 (page frame)，并保证页与页帧的大小相同。这种机制，从数据结构上，保证了访问内存的高效，并使 OS 能支持非连续性的内存分配。在程序内存不够用时，还可以将不常用的物理内存页转移到其他存储设备上，比如磁盘，这就是大家耳熟能详的虚拟内存。</p>
<p>在 Solaris 系统中，JVM 可以支持 Large Page Size 的使用。使用大的内存分页可以增强 CPU 的内存寻址能力，从而提升系统的性能。</p>
<div><div id="highlighter_473975" class="syntaxhighlighter notranslate actionscript3"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="actionscript3 plain">java –Xmx2506m –Xms2506m –Xmn1536m –Xss128k –XX:++UseParallelGC</code></div><div class="line number2 index1 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">–XX:ParallelGCThreads=</code><code class="actionscript3 value">20</code> <code class="actionscript3 plain">–XX:+UseParallelOldGC –XX:+LargePageSizeInBytes=256m</code></div></div></td></tr></tbody></table></div></div>
<p>–XX:+LargePageSizeInBytes：设置大页的大小。</p>
<p>过大的内存分页会导致 JVM 在计算 Heap 内部分区（perm, new, old）内存占用比例时，会出现超出正常值的划分，最坏情况下某个区会多占用一个页的大小。</p>
<h2 id="8. 使用非占有的垃圾回收器|outline">使用非占有的垃圾回收器</h2>
<p>为降低应用软件的垃圾回收时的停顿，首先考虑的是使用关注系统停顿的 CMS 回收器，其次，为了减少 Full GC 次数，应尽可能将对象预留在年轻代，因为年轻代 Minor GC 的成本远远小于年老代的 Full GC。</p>
<div><div id="highlighter_230699" class="syntaxhighlighter notranslate actionscript3"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="actionscript3 plain">java –Xmx3550m –Xms3550m –Xmn2g –Xss128k –XX:ParallelGCThreads=</code><code class="actionscript3 value">20</code></div><div class="line number2 index1 alt1"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">–XX:+UseConcMarkSweepGC –XX:+UseParNewGC –XX:+SurvivorRatio=</code><code class="actionscript3 value">8</code> <code class="actionscript3 plain">–XX:TargetSurvivorRatio=</code><code class="actionscript3 value">90</code></div><div class="line number3 index2 alt2"><code class="actionscript3 spaces">&nbsp;</code><code class="actionscript3 plain">–XX:MaxTenuringThreshold=</code><code class="actionscript3 value">31</code></div></div></td></tr></tbody></table></div></div>
<p>–XX:ParallelGCThreads=20：设置 20 个线程进行垃圾回收；</p>
<p>–XX:+UseParNewGC：年轻代使用并行回收器；</p>
<p>–XX:+UseConcMarkSweepGC：年老代使用 CMS 收集器降低停顿；</p>
<p>–XX:+SurvivorRatio：设置 Eden 区和 Survivor 区的比例为 8:1。稍大的 Survivor 空间可以提高在年轻代回收生命周期较短的对象的可能性，如果 Survivor 不够大，一些短命的对象可能直接进入年老代，这对系统来说是不利的。</p>
<p>–XX:TargetSurvivorRatio=90：设置 Survivor 区的可使用率。这里设置为 90%，则允许 90%的 Survivor 空间被使用。默认值是 50%。故该设置提高了 Survivor 区的使用率。当存放的对象超过这个百分比，则对象会向年老代压缩。因此，这个选项更有助于将对象留在年轻代。</p>
<p>–XX:MaxTenuringThreshold：设置年轻对象晋升到年老代的年龄。默认值是 15 次，即对象经过 15 次 Minor GC 依然存活，则进入年老代。这里设置为 31，目的是让对象尽可能地保存在年轻代区域。</p>
<h2 id="7. 结束语|outline">结束语</h2>
<p>通过本文的学习，读者了解了如何将新对象预留在年轻代、如何让大对象进入年老代、如何设置对象进入年老代的年龄、稳定的 Java 堆 VS 动荡的 Java 堆、增大吞吐量提升系统性能、尝试使用大的内存分页、使用非占有的垃圾回收器等主题，通过实例及对应输出解释的形式让读者对于 JVM 优化有一个初步认识。如其他文章相同的观点，没有哪一条优化是固定不变的，读者需要自己判断、实践后才能找到正确的道路。</p>

        
        
        <!-- BEGIN #author-bio -->


<!-- END #author-bio -->
	</div>
	<!-- END .entry -->


<!-- JiaThis Button BEGIN -->
<div class="jiathis_style_24x24">
<a class="jiathis_button_tsina" title="分享到微博"><span class="jiathis_txt jtico jtico_tsina"></span></a>
<a class="jiathis_button_weixin" title="分享到微信"><span class="jiathis_txt jtico jtico_weixin"></span></a>
<a class="jiathis_button_qzone" title="分享到QQ空间"><span class="jiathis_txt jtico jtico_qzone"></span></a>
<a class="jiathis_button_fb" title="分享到Facebook"><span class="jiathis_txt jtico jtico_fb"></span></a>
<a class="jiathis_button_renren" title="分享到人人网"><span class="jiathis_txt jtico jtico_renren"></span></a>
<a class="jiathis_button_douban" title="分享到豆瓣"><span class="jiathis_txt jtico jtico_douban"></span></a>
<a class="jiathis_button_googleplus" title="分享到Google+"><span class="jiathis_txt jtico jtico_googleplus"></span></a>
<a class="jiathis_button_readitlater"></a>
<a class="jiathis_button_evernote" title="分享到印象笔记"><span class="jiathis_txt jtico jtico_evernote"></span></a>
<a class="jiathis_button_ydnote" title="分享到有道云笔记"><span class="jiathis_txt jtico jtico_ydnote"></span></a>
<a href="http://www.jiathis.com/share?uid=1745061" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis external" target="_blank" rel="nofollow"></a>
<a class="jiathis_counter_style"><span class="jiathis_button_expanded jiathis_counter jiathis_bubble_style" id="jiathis_counter_40" title="累计分享27次">27</span></a>
</div>


<script type="text/javascript">
var jiathis_config={
	data_track_clickback:false,
	title:"《JVM 优化经验总结》",
	summary:"本文讲解了如何将新对象预留在年轻代、如何让大对象进入年老代、如何设置对象进入年老代的年龄、稳定的 Java 堆 VS 动荡的 Java 堆、增大吞吐量提升系统性能、尝试使用大的内存分页、使用非占有的垃圾回收器等主题。",
	pic:"http://incdn1.b0.upaiyun.com/2013/10/Java-logo.jpg",
	appkey:{
                "tsina":2284713194 //for importnew
        },
	ralateuid:{
		"tsina":2991905905 //for importnew
	},
	hideMore:false
}
</script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/jia.js.下载" charset="utf-8"></script><script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/plugin.client.js.下载" charset="utf-8"></script>
<!-- JiaThis Button END -->
<br><br>
<div id="text-13">			<div class="textwidget"><p><a href="http://blog.jobbole.com/106093/" target="_blank" class="external" rel="nofollow"><img src="./JVM 优化经验总结 - ImportNew_files/bfdcef89gw1f9cf7iwi24j20h802sjrz.jpg"></a></p>
</div>
		</div>
</div>
<!-- END .post -->	
	
<script type="text/javascript">
window._wp_rp_static_base_url = "http://dtmvdvtzf8rz0.cloudfront.net/static/";

</script>
<h3 class="related_post_title">相关文章</h3><ul class="related_post wp_rp" style="visibility:visible;"><li position="0"><a href="http://www.importnew.com/23752.html">JVM（3）：Java GC算法 垃圾收集器</a></li><li position="1"><a href="http://www.importnew.com/23186.html">JVM初探——使用堆外内存减少Full GC</a></li><li position="2"><a href="http://www.importnew.com/23146.html">JVM GC参数以及GC算法的应用</a></li><li position="3"><a href="http://www.importnew.com/22996.html">JVM内存管理–GC算法精解（五分钟让你彻底明白标记/清除算法）</a></li><li position="4"><a href="http://www.importnew.com/22886.html">JVM 调优 —— GC 长时间停顿问题及解决方法</a></li><li position="5"><a href="http://www.importnew.com/11336.html">高吞吐低延迟Java应用的垃圾回收优化</a></li><li position="6"><a href="http://www.importnew.com/10910.html">Linux HotSopt虚拟机GC线程的CPU占用率</a></li><li position="7"><a href="http://www.importnew.com/10570.html">如何估算内存消耗</a></li><li position="8"><a href="http://www.importnew.com/8286.html">2013年ImportNew最受欢迎的10篇文章</a></li><li position="9"><a href="http://www.importnew.com/8147.html">性能调优、虚拟机、垃圾回收、软硬件协调相关文章和视频 — Part1</a></li></ul>

			
	
<!-- BEGIN #respond -->
<div id="respond">

	<h3 class="widget-title">发表评论</h3>
	
	<!-- BEGIN .cancel-comment-reply -->
	<p class="cancel-comment-reply">
		
		<a rel="nofollow" id="cancel-comment-reply-link" href="http://www.importnew.com/16327.html#respond" style="display:none;">点击这里取消回复。</a>		
	</p>
	<!-- END .cancel-comment-reply -->

		
	<!-- BEGIN #comment-form -->
	<form action="http://www.importnew.com/wp-comments-post.php" method="post" id="comment-form">
		
		<fieldset>
		
			<legend class="none">Comment form</legend>
			
			<!-- BEGIN .container -->
			<div class="container">
			
							
				<div class="grid-4 margin-20">
					<label for="author">Name<span class="red">*</span></label>
				</div>
				
				<div class="grid-4 margin-20">
					<div class="input-wrapper"><input type="text" name="author" id="author" value="" tabindex="1" size="30" class="required" placeholder="姓名"></div>
				</div>
				<div class="clear"></div>
				
				<div class="grid-4 margin-20">
					<label for="email">邮箱<span class="red">*</span></label>
				</div>
				
				<div class="grid-4 margin-20">
					<div class="input-wrapper"><input type="email" name="email" id="email" value="" tabindex="2" size="30" class="required email" placeholder="请填写邮箱"></div>
				</div>
				<div class="clear"></div>
				
				<div class="grid-4 margin-20">
					<label for="url">网站 (请以 http://开头)</label>
				</div>
				
				<div class="grid-4 margin-20">
					<div class="input-wrapper"><input type="url" name="url" id="url" value="" tabindex="3" size="30" placeholder="请填写网站地址"></div>
				</div>
				<div class="clear"></div>
				
								
				<div class="grid-8 margin-20">
					<label for="comment" class="none margin-20">评论内容<span class="red">*</span></label>
					<div class="input-wrapper"><textarea name="comment" id="comment" rows="20" cols="30" class="required" tabindex="4" onkeydown="if(event.ctrlKey &amp;&amp; event.keyCode==13){document.getElementById(&#39;comment-form-submit&#39;).click(); return false;}" placeholder="请填写评论内容"></textarea></div>
				</div>
				<div class="clear"></div>
				
			</div>
			<!-- END .container -->
			
			<p>(<span class="red">*</span>) 表示必填项</p>
			<p></p><div class="submit-wrapper"><a id="comment-form-submit" class="submit">提交评论</a></div><p></p>
			<input type="hidden" name="comment_post_ID" value="16327" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
			<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="147419bdbe"></p>			
		</fieldset>
		
	</form>
	<!-- END #comment-form -->
	
	
</div>
<!-- END #respond -->

	<h3 id="comments" class="widget-title">1 条评论</h3>
	
	<!-- BEGIN .commentlist -->
	<ol class="commentlist">
	
				<li class="comment even thread-even depth-1" id="comment-454896">
				<div id="div-comment-454896" class="comment-body">
				<div class="comment-author vcard">
				<cite class="fn">Aceslup</cite> <span class="says">说道：</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.importnew.com/16327.html#comment-454896">
			2015/08/07 下午 3:25</a>		</div>

		<p>非常感谢，从中学了好多官方文档看不懂的参数。谢谢。对此，目前还是不太会看GC日志。</p>
<p> <img style="padding: 0px; border: none; cursor: pointer;" onmouseover="this.width=this.width*1.3" onmouseout="this.width=this.width/1.2" id="up-454896" src="./JVM 优化经验总结 - ImportNew_files/1_14_up.png" alt="Thumb up" onclick="javascript:ckratingKarma(&#39;454896&#39;, &#39;add&#39;, &#39;www.importnew.com/wp-content/plugins/comment-rating/&#39;, &#39;1_14_&#39;);" title="赞同"> <span id="karma-454896-up" style="font-size:12px; color:#009933;">0</span>&nbsp;<img style="padding: 0px; border: none; cursor: pointer;" onmouseover="this.width=this.width*1.3" onmouseout="this.width=this.width/1.2" id="down-454896" src="./JVM 优化经验总结 - ImportNew_files/1_14_down.png" alt="Thumb down" onclick="javascript:ckratingKarma(&#39;454896&#39;, &#39;subtract&#39;, &#39;www.importnew.com/wp-content/plugins/comment-rating/&#39;, &#39;1_14_&#39;)" title="反对"> <span id="karma-454896-down" style="font-size:12px; color:#990033;">0</span></p>
		<div class="reply">
		<a class="comment-reply-link" href="http://www.importnew.com/16327.html?replytocom=454896#respond" onclick="return addComment.moveForm(" div-comment-454896",="" "454896",="" "respond",="" "16327")"="">回复</a>		</div>
				</div>
		</li>
	
	</ol>

	<!-- END .commentlist -->

		
 



		
				
	<!-- BEGIN .navigation -->
	<div class="navigation margin-20">
	
		<div class="alignleft"><a href="http://www.importnew.com/16325.html" rel="prev">« JVM 垃圾回收器工作原理及使用实例介绍</a></div>
		<div class="alignright"><a href="http://www.importnew.com/16342.html" rel="next">企业级 Java 应用最重要的4个性能指标 »</a></div>
		<div class="clear"></div>

	</div>
	<!-- END .navigation -->
	
		
</div>
<!-- END .grid-8 -->

<!-- BEGIN #sidebar -->
<div id="sidebar" class="grid-4">

	<div id="search-3" class="widget widget_search"><!-- BEGIN #searchform -->
<form method="get" id="searchform" action="http://www.importnew.com/">

	<label class="none" for="s">Search for:</label>
	<div class="input-wrapper"><input type="text" value="" name="s" id="s" placeholder="Search"></div>
	<input type="submit" id="searchsubmit" value="Search">
	
</form>
<!-- END #searchform --></div><div id="text-14" class="widget widget_text">			<div class="textwidget"><p><a href="http://blog.jobbole.com/84342/?utm_source=www.importnew.com&amp;utm_medium=rightBanner-1&amp;utm_content=2015.9.16" target="_blank" class="external" rel="nofollow"><img src="./JVM 优化经验总结 - ImportNew_files/e5298966gw1evyjrd4iqcj208c03c0t0.jpg"></a></p>
</div>
		</div><div id="aw_tabbed_widget-2" class="widget aw_tabbed_widget"><div class="tabs"><ul class="nav clearfix"><li class="active"><a id="link-most-discussed" href="http://www.importnew.com/16327.html#tab-most-discussed" title="本周热门文章">本周热门文章</a></li><li><a id="link-latest-comments" href="http://www.importnew.com/16327.html#tab-latest-comments" title="本月热门">本月热门</a></li><li><a id="link-tags" href="http://www.importnew.com/16327.html#tab-tags" title="热门标签">热门标签</a></li></ul><div id="tab-most-discussed" class="tab" style="display: block;"><div class="floated-thumb">							
							
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">0</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/25180.html" title="【译】Reddit如何统计每个帖子的浏览量">【译】Reddit如何统计每个帖子的浏...</a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
													
							
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">1</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/25223.html" title="深入 JVM 分析 spring-boot 应用 hibernate-validator NoClassDefFoundError">深入 JVM 分析 spring-boot 应用 hibernate-val...</a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
													
							
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">2</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/25295.html" title="JVM 类加载机制详解">JVM 类加载机制详解</a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
													
							
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">3</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/25189.html" title="谈谈对Canal（ 增量数据订阅与消费 ）的理解 ">谈谈对Canal（ 增量数据订阅与消费...</a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
													
							
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">4</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/25228.html" title="Kafka 端到端审计">Kafka 端到端审计</a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
													
							
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">5</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/25242.html" title="为什么 QueueingConsumer 会被 Deprecated ?">为什么 QueueingConsumer 会被 Depr...</a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
													
							
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">6</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/25247.html" title="kafka 数据可靠性深度解读">kafka 数据可靠性深度解读</a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
													
							
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">7</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/25271.html" title="八幅漫画理解使用 JSON Web Token 设计单点登录系统">八幅漫画理解使用 JSON Web To...</a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
													
							
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">8</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/25286.html" title="深入学习 FutureTask">深入学习 FutureTask</a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
													
							
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">9</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/25302.html" title="如何实现一个Java Class 解析器">如何实现一个Java Class 解析器</a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
						</div></div><div id="tab-latest-comments" class="tab" style="display: none;"><div class="floated-thumb">							
											
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">0</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/25023.html" title="图解集合 2 ：LinkedList">图解集合 2 ：LinkedList</a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
													
											
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">1</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/25008.html" title="图解集合 1 ：ArrayList">图解集合 1 ：ArrayList</a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
													
											
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">2</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/24875.html" title="Spring Boot 启动流程详解（一）">Spring Boot 启动流程详解（一）</a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
													
											
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">3</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/24896.html" title="java 调试技能之 dubbo 调试 -- telnet">java 调试技能之 dubbo 调试 -- t...</a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
													
											
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">4</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/24930.html" title="图解集合7：红黑树概念、红黑树的插入及旋转操作详细解读 ">图解集合7：红黑树概念、红黑树的插...</a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
													
											
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">5</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/25034.html" title="图解集合 3 : CopyOnWriteArrayList">图解集合 3 : CopyOnWriteArray...</a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
													
											
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">6</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/24804.html" title="怎样写一个 RefererFilter ">怎样写一个 RefererFilter </a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
													
											
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">7</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/24851.html" title="Spring Boot异常处理详解">Spring Boot异常处理详解</a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
													
											
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">8</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/24789.html" title="Java语法糖 2 ：自动装箱和自动拆箱">Java语法糖 2 ：自动装箱和自动拆箱</a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
													
											
							<!-- BEGIN .post-meta -->
							<div class="post-meta  no-thumb">
							
								<p>
								    <span class="numb">9</span>
								    <a class="meta-title" target="_blank" href="http://www.importnew.com/24822.html" title="HashMap 和 HashTable 到底哪不同 ？">HashMap 和 HashTable 到底哪...</a><br>
								</p>
									
							</div>
							<!-- END .post-meta -->
							
							<div class="clear"></div>
							
						</div></div><div id="tab-tags" class="tab" style="display: none;"><p><a href="http://www.importnew.com/tag/android23days" class="tag-link-240" title="8 个话题" style="font-size: 8.5645161290323px;">android23days</a>
<a href="http://www.importnew.com/tag/android" class="tag-link-36" title="66 个话题" style="font-size: 18.5px;">Android开发</a>
<a href="http://www.importnew.com/tag/aop" class="tag-link-204" title="18 个话题" style="font-size: 12.290322580645px;">AOP</a>
<a href="http://www.importnew.com/tag/arraylist" class="tag-link-314" title="7 个话题" style="font-size: 8px;">ArrayList</a>
<a href="http://www.importnew.com/tag/concurrenthashmap" class="tag-link-355" title="13 个话题" style="font-size: 10.822580645161px;">ConcurrentHashMap</a>
<a href="http://www.importnew.com/tag/eclipse" class="tag-link-81" title="30 个话题" style="font-size: 14.661290322581px;">Eclipse</a>
<a href="http://www.importnew.com/tag/gc" class="tag-link-87" title="39 个话题" style="font-size: 15.903225806452px;">GC</a>
<a href="http://www.importnew.com/tag/gson" class="tag-link-643" title="7 个话题" style="font-size: 8px;">Gson</a>
<a href="http://www.importnew.com/tag/guava" class="tag-link-554" title="11 个话题" style="font-size: 10.032258064516px;">Guava</a>
<a href="http://www.importnew.com/tag/hadoop" class="tag-link-140" title="13 个话题" style="font-size: 10.822580645161px;">Hadoop</a>
<a href="http://www.importnew.com/tag/hashmap" class="tag-link-284" title="30 个话题" style="font-size: 14.661290322581px;">HashMap</a>
<a href="http://www.importnew.com/tag/hashset" class="tag-link-60" title="9 个话题" style="font-size: 9.1290322580645px;">HashSet</a>
<a href="http://www.importnew.com/tag/hbase" class="tag-link-128" title="14 个话题" style="font-size: 11.161290322581px;">HBase</a>
<a href="http://www.importnew.com/tag/hibernate" class="tag-link-109" title="14 个话题" style="font-size: 11.161290322581px;">Hibernate</a>
<a href="http://www.importnew.com/tag/intellij" class="tag-link-213" title="8 个话题" style="font-size: 8.5645161290323px;">IntelliJ</a>
<a href="http://www.importnew.com/tag/io" class="tag-link-70" title="13 个话题" style="font-size: 10.822580645161px;">io</a>
<a href="http://www.importnew.com/tag/java" class="tag-link-35" title="127 个话题" style="font-size: 21.661290322581px;">Java</a>
<a href="http://www.importnew.com/tag/java8" class="tag-link-354" title="33 个话题" style="font-size: 15.112903225806px;">java8</a>
<a href="http://www.importnew.com/tag/java-8" class="tag-link-50" title="32 个话题" style="font-size: 15px;">java 8</a>
<a href="http://www.importnew.com/tag/java9" class="tag-link-436" title="9 个话题" style="font-size: 9.1290322580645px;">Java9</a>
<a href="http://www.importnew.com/tag/javaee" class="tag-link-379" title="7 个话题" style="font-size: 8px;">javaee</a>
<a href="http://www.importnew.com/tag/javaee%e4%b8%8emaven%e6%95%99%e7%a8%8b" class="tag-link-462" title="7 个话题" style="font-size: 8px;">JavaEE与Maven教程</a>
<a href="http://www.importnew.com/tag/java-nio" class="tag-link-750" title="13 个话题" style="font-size: 10.822580645161px;">Java NIO</a>
<a href="http://www.importnew.com/tag/java%e4%b9%b1%e7%a0%81" class="tag-link-807" title="8 个话题" style="font-size: 8.5645161290323px;">Java乱码</a>
<a href="http://www.importnew.com/tag/java%e7%bc%96%e7%a8%8b%e5%85%a5%e9%97%a8" class="tag-link-639" title="24 个话题" style="font-size: 13.645161290323px;">Java编程入门</a>
<a href="http://www.importnew.com/tag/java%e8%99%9a%e6%8b%9f%e6%9c%ba" class="tag-link-671" title="7 个话题" style="font-size: 8px;">java虚拟机</a>
<a href="http://www.importnew.com/tag/jdbc" class="tag-link-122" title="16 个话题" style="font-size: 11.725806451613px;">JDBC</a>
<a href="http://www.importnew.com/tag/jdk" class="tag-link-44" title="12 个话题" style="font-size: 10.370967741935px;">JDK</a>
<a href="http://www.importnew.com/tag/jpa" class="tag-link-161" title="8 个话题" style="font-size: 8.5645161290323px;">JPA</a>
<a href="http://www.importnew.com/tag/jsoup" class="tag-link-703" title="9 个话题" style="font-size: 9.1290322580645px;">Jsoup</a>
<a href="http://www.importnew.com/tag/junit" class="tag-link-337" title="8 个话题" style="font-size: 8.5645161290323px;">JUnit</a>
<a href="http://www.importnew.com/tag/jvm" class="tag-link-80" title="133 个话题" style="font-size: 21.887096774194px;">JVM</a>
<a href="http://www.importnew.com/tag/lambda" class="tag-link-92" title="9 个话题" style="font-size: 9.1290322580645px;">Lambda</a>
<a href="http://www.importnew.com/tag/linkedhashmap" class="tag-link-306" title="7 个话题" style="font-size: 8px;">LinkedHashMap</a>
<a href="http://www.importnew.com/tag/log4j" class="tag-link-117" title="7 个话题" style="font-size: 8px;">log4j</a>
<a href="http://www.importnew.com/tag/mapreduce" class="tag-link-106" title="7 个话题" style="font-size: 8px;">MapReduce</a>
<a href="http://www.importnew.com/tag/maven" class="tag-link-385" title="16 个话题" style="font-size: 11.725806451613px;">maven</a>
<a href="http://www.importnew.com/tag/mybatis" class="tag-link-820" title="25 个话题" style="font-size: 13.758064516129px;">Mybatis</a>
<a href="http://www.importnew.com/tag/netty" class="tag-link-130" title="19 个话题" style="font-size: 12.516129032258px;">Netty</a>
<a href="http://www.importnew.com/tag/nio" class="tag-link-69" title="18 个话题" style="font-size: 12.290322580645px;">nio</a>
<a href="http://www.importnew.com/tag/oracle" class="tag-link-153" title="9 个话题" style="font-size: 9.1290322580645px;">oracle</a>
<a href="http://www.importnew.com/tag/orm" class="tag-link-451" title="10 个话题" style="font-size: 9.5806451612903px;">ORM</a>
<a href="http://www.importnew.com/tag/redis" class="tag-link-772" title="10 个话题" style="font-size: 9.5806451612903px;">redis</a>
<a href="http://www.importnew.com/tag/restful" class="tag-link-196" title="12 个话题" style="font-size: 10.370967741935px;">RESTful</a>
<a href="http://www.importnew.com/tag/scala" class="tag-link-89" title="18 个话题" style="font-size: 12.290322580645px;">Scala</a>
<a href="http://www.importnew.com/tag/servlet" class="tag-link-320" title="9 个话题" style="font-size: 9.1290322580645px;">Servlet</a>
<a href="http://www.importnew.com/tag/socket" class="tag-link-559" title="11 个话题" style="font-size: 10.032258064516px;">Socket</a>
<a href="http://www.importnew.com/tag/solr" class="tag-link-429" title="10 个话题" style="font-size: 9.5806451612903px;">solr</a>
<a href="http://www.importnew.com/tag/spring" class="tag-link-53" title="137 个话题" style="font-size: 22px;">Spring</a>
<a href="http://www.importnew.com/tag/spring4" class="tag-link-771" title="8 个话题" style="font-size: 8.5645161290323px;">Spring4</a>
<a href="http://www.importnew.com/tag/spring-boot" class="tag-link-779" title="8 个话题" style="font-size: 8.5645161290323px;">spring boot</a>
<a href="http://www.importnew.com/tag/springmvc" class="tag-link-614" title="20 个话题" style="font-size: 12.741935483871px;">SpringMVC</a>
<a href="http://www.importnew.com/tag/spring-mvc" class="tag-link-443" title="13 个话题" style="font-size: 10.822580645161px;">Spring MVC</a>
<a href="http://www.importnew.com/tag/string" class="tag-link-252" title="33 个话题" style="font-size: 15.112903225806px;">String</a>
<a href="http://www.importnew.com/tag/synchronized" class="tag-link-737" title="8 个话题" style="font-size: 8.5645161290323px;">synchronized</a>
<a href="http://www.importnew.com/tag/threadlocal" class="tag-link-376" title="12 个话题" style="font-size: 10.370967741935px;">ThreadLocal</a>
<a href="http://www.importnew.com/tag/tomcat" class="tag-link-225" title="21 个话题" style="font-size: 12.967741935484px;">Tomcat</a>
<a href="http://www.importnew.com/tag/volatile" class="tag-link-433" title="10 个话题" style="font-size: 9.5806451612903px;">volatile</a>
<a href="http://www.importnew.com/tag/web-service" class="tag-link-103" title="7 个话题" style="font-size: 8px;">Web Service</a>
<a href="http://www.importnew.com/tag/zookeeper" class="tag-link-828" title="10 个话题" style="font-size: 9.5806451612903px;">Zookeeper</a>
<a href="http://www.importnew.com/tag/%e4%ba%8b%e5%8a%a1" class="tag-link-339" title="9 个话题" style="font-size: 9.1290322580645px;">事务</a>
<a href="http://www.importnew.com/tag/%e5%86%85%e5%ad%98%e7%ae%a1%e7%90%86" class="tag-link-273" title="18 个话题" style="font-size: 12.290322580645px;">内存管理</a>
<a href="http://www.importnew.com/tag/%e5%88%86%e5%b8%83%e5%bc%8f" class="tag-link-598" title="9 个话题" style="font-size: 9.1290322580645px;">分布式</a>
<a href="http://www.importnew.com/tag/%e5%8a%a8%e6%80%81%e4%bb%a3%e7%90%86" class="tag-link-644" title="7 个话题" style="font-size: 8px;">动态代理</a>
<a href="http://www.importnew.com/tag/%e5%8f%82%e6%95%b0%e5%a4%aa%e5%a4%9a%e6%80%8e%e4%b9%88%e5%8a%9e" class="tag-link-470" title="8 个话题" style="font-size: 8.5645161290323px;">参数太多怎么办</a>
<a href="http://www.importnew.com/tag/%e5%8f%8d%e5%b0%84" class="tag-link-301" title="10 个话题" style="font-size: 9.5806451612903px;">反射</a>
<a href="http://www.importnew.com/tag/%e5%9e%83%e5%9c%be%e5%9b%9e%e6%94%b6" class="tag-link-575" title="15 个话题" style="font-size: 11.387096774194px;">垃圾回收</a>
<a href="http://www.importnew.com/tag/%e5%9f%ba%e7%a1%80%e6%8a%80%e6%9c%af" class="tag-link-58" title="65 个话题" style="font-size: 18.387096774194px;">基础技术</a>
<a href="http://www.importnew.com/tag/%e5%a4%9a%e7%ba%bf%e7%a8%8b" class="tag-link-46" title="22 个话题" style="font-size: 13.193548387097px;">多线程</a>
<a href="http://www.importnew.com/tag/%e5%ad%97%e7%ac%a6%e4%b8%b2" class="tag-link-636" title="8 个话题" style="font-size: 8.5645161290323px;">字符串</a>
<a href="http://www.importnew.com/tag/%e5%ad%97%e8%8a%82%e7%a0%81" class="tag-link-38" title="8 个话题" style="font-size: 8.5645161290323px;">字节码</a>
<a href="http://www.importnew.com/tag/%e5%ae%89%e5%85%a8" class="tag-link-235" title="7 个话题" style="font-size: 8px;">安全</a>
<a href="http://www.importnew.com/tag/%e5%b7%a5%e5%85%b7" class="tag-link-126" title="7 个话题" style="font-size: 8px;">工具</a>
<a href="http://www.importnew.com/tag/%e5%b9%b6%e5%8f%91" class="tag-link-401" title="49 个话题" style="font-size: 17.032258064516px;">并发</a>
<a href="http://www.importnew.com/tag/%e5%b9%b6%e5%8f%91%e7%bc%96%e7%a8%8b" class="tag-link-64" title="26 个话题" style="font-size: 13.983870967742px;">并发编程</a>
<a href="http://www.importnew.com/tag/%e5%ba%8f%e5%88%97%e5%8c%96" class="tag-link-298" title="11 个话题" style="font-size: 10.032258064516px;">序列化</a>
<a href="http://www.importnew.com/tag/%e5%bc%82%e5%b8%b8%e5%a4%84%e7%90%86" class="tag-link-214" title="18 个话题" style="font-size: 12.290322580645px;">异常处理</a>
<a href="http://www.importnew.com/tag/%e6%80%a7%e8%83%bd" class="tag-link-47" title="17 个话题" style="font-size: 12.064516129032px;">性能</a>
<a href="http://www.importnew.com/tag/%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96" class="tag-link-88" title="17 个话题" style="font-size: 12.064516129032px;">性能优化</a>
<a href="http://www.importnew.com/tag/%e6%80%a7%e8%83%bd%e8%b0%83%e4%bc%98" class="tag-link-282" title="9 个话题" style="font-size: 9.1290322580645px;">性能调优</a>
<a href="http://www.importnew.com/tag/%e6%95%99%e7%a8%8b" class="tag-link-156" title="17 个话题" style="font-size: 12.064516129032px;">教程</a>
<a href="http://www.importnew.com/tag/%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84" class="tag-link-283" title="12 个话题" style="font-size: 10.370967741935px;">数据结构</a>
<a href="http://www.importnew.com/tag/%e6%97%a5%e5%bf%97" class="tag-link-29" title="10 个话题" style="font-size: 9.5806451612903px;">日志</a>
<a href="http://www.importnew.com/tag/%e6%9e%b6%e6%9e%84" class="tag-link-139" title="9 个话题" style="font-size: 9.1290322580645px;">架构</a>
<a href="http://www.importnew.com/tag/%e6%b3%9b%e5%9e%8b" class="tag-link-246" title="15 个话题" style="font-size: 11.387096774194px;">泛型</a>
<a href="http://www.importnew.com/tag/%e6%b3%a8%e8%a7%a3" class="tag-link-360" title="13 个话题" style="font-size: 10.822580645161px;">注解</a>
<a href="http://www.importnew.com/tag/%e6%b5%8b%e8%af%95" class="tag-link-237" title="8 个话题" style="font-size: 8.5645161290323px;">测试</a>
<a href="http://www.importnew.com/tag/%e6%b8%b8%e6%88%8f" class="tag-link-184" title="9 个话题" style="font-size: 9.1290322580645px;">游戏</a>
<a href="http://www.importnew.com/tag/%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90" class="tag-link-280" title="7 个话题" style="font-size: 8px;">源码分析</a>
<a href="http://www.importnew.com/tag/%e7%ae%97%e6%b3%95" class="tag-link-270" title="8 个话题" style="font-size: 8.5645161290323px;">算法</a>
<a href="http://www.importnew.com/tag/%e7%b1%bb%e5%8a%a0%e8%bd%bd" class="tag-link-556" title="7 个话题" style="font-size: 8px;">类加载</a>
<a href="http://www.importnew.com/tag/%e7%ba%bf%e7%a8%8b" class="tag-link-374" title="11 个话题" style="font-size: 10.032258064516px;">线程</a>
<a href="http://www.importnew.com/tag/%e7%ba%bf%e7%a8%8b%e6%b1%a0" class="tag-link-297" title="13 个话题" style="font-size: 10.822580645161px;">线程池</a>
<a href="http://www.importnew.com/tag/%e7%bc%93%e5%ad%98" class="tag-link-353" title="9 个话题" style="font-size: 9.1290322580645px;">缓存</a>
<a href="http://www.importnew.com/tag/%e8%99%9a%e6%8b%9f%e6%9c%ba" class="tag-link-685" title="11 个话题" style="font-size: 10.032258064516px;">虚拟机</a>
<a href="http://www.importnew.com/tag/%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f" class="tag-link-30" title="52 个话题" style="font-size: 17.258064516129px;">设计模式</a>
<a href="http://www.importnew.com/tag/%e8%b5%84%e8%ae%af" class="tag-link-108" title="9 个话题" style="font-size: 9.1290322580645px;">资讯</a>
<a href="http://www.importnew.com/tag/%e9%9b%86%e5%90%88" class="tag-link-311" title="15 个话题" style="font-size: 11.387096774194px;">集合</a>
<a href="http://www.importnew.com/tag/%e9%9d%a2%e8%af%95" class="tag-link-31" title="23 个话题" style="font-size: 13.41935483871px;">面试</a>
<a href="http://www.importnew.com/tag/%e9%9d%a2%e8%af%95%e9%a2%98" class="tag-link-27" title="11 个话题" style="font-size: 10.032258064516px;">面试题</a></p></div></div></div><div id="text-18" class="widget widget_text">			<div class="textwidget"><p><a href="http://date.jobbole.com/?utm_source=www.importnew.com&amp;utm_medium=rightBanner-2&amp;utm_content=2015.9.16" target="_blank" class="external" rel="nofollow"><img src="./JVM 优化经验总结 - ImportNew_files/bfdcef89gw1esk2g5dvq1j208c03cglu.jpg"></a></p>
</div>
		</div><div id="recent_comments_widget-2" class="widget recent_comments_widget">		<h3 class="widget-title">最新评论</h3>
		<ul>
		
					
			<li id="rc-comment-561049" class="rc-item rc-comment rc-clearfix">
				<img class="rc-avatar rc-left" width="32" height="32" alt="" src="./JVM 优化经验总结 - ImportNew_files/cb962c0fddc4ba5282bbf2996f3ee0d2.png">
				<div class="rc-info">
				Re:
				<a class="rc-post" target="_blank" href="http://www.importnew.com/24254.html#comment-561049" rel="nofollow">Spring源码分析：Bean加载流程...</a>
				</div>
				<div class="rc-timestamp"></div>
				<div class="rc-excerpt">
				可以的, 转载请保留出处和原文链接								<span class="rc-reviewer"> 唐尤华</span>
								</div>
			</li>
			
						
			<li id="rc-comment-561048" class="rc-item rc-comment rc-clearfix">
				<img class="rc-avatar rc-left" width="32" height="32" alt="" src="./JVM 优化经验总结 - ImportNew_files/cb962c0fddc4ba5282bbf2996f3ee0d2.png">
				<div class="rc-info">
				Re:
				<a class="rc-post" target="_blank" href="http://www.importnew.com/7336.html#comment-561048" rel="nofollow">使用Java创建RESTful Web Se...</a>
				</div>
				<div class="rc-timestamp"></div>
				<div class="rc-excerpt">
				404-&gt;HTTP 404或Not Found错误信息是HTTP的其中一种“标准回应信息”（HTTP...								<span class="rc-reviewer"> 唐尤华</span>
								</div>
			</li>
			
						
			<li id="rc-comment-561047" class="rc-item rc-comment rc-clearfix">
				<img class="rc-avatar rc-left" width="32" height="32" alt="" src="./JVM 优化经验总结 - ImportNew_files/cb962c0fddc4ba5282bbf2996f3ee0d2.png">
				<div class="rc-info">
				Re:
				<a class="rc-post" target="_blank" href="http://www.importnew.com/25008.html#comment-561047" rel="nofollow">图解集合 1 ：ArrayList</a>
				</div>
				<div class="rc-timestamp"></div>
				<div class="rc-excerpt">
				可以动手实验的								<span class="rc-reviewer"> 唐尤华</span>
								</div>
			</li>
			
						
			<li id="rc-comment-561045" class="rc-item rc-comment rc-clearfix">
				<img class="rc-avatar rc-left" width="32" height="32" alt="" src="./JVM 优化经验总结 - ImportNew_files/cb962c0fddc4ba5282bbf2996f3ee0d2.png">
				<div class="rc-info">
				Re:
				<a class="rc-post" target="_blank" href="http://www.importnew.com/14841.html#comment-561045" rel="nofollow">Java 8：不要再用循环了</a>
				</div>
				<div class="rc-timestamp"></div>
				<div class="rc-excerpt">
				Hi，请到伯乐在线的小组发帖提问，支持微信登录。链接是： http://group.jobbole....								<span class="rc-reviewer"> 唐尤华</span>
								</div>
			</li>
			
						
			<li id="rc-comment-561043" class="rc-item rc-comment rc-clearfix">
				<img class="rc-avatar rc-left" width="32" height="32" alt="" src="./JVM 优化经验总结 - ImportNew_files/cb962c0fddc4ba5282bbf2996f3ee0d2.png">
				<div class="rc-info">
				Re:
				<a class="rc-post" target="_blank" href="http://www.importnew.com/25008.html#comment-561043" rel="nofollow">图解集合 1 ：ArrayList</a>
				</div>
				<div class="rc-timestamp"></div>
				<div class="rc-excerpt">
				可以列一下各版本的差别, 欢迎投稿								<span class="rc-reviewer"> 唐尤华</span>
								</div>
			</li>
			
						
			<li id="rc-comment-561042" class="rc-item rc-comment rc-clearfix">
				<img class="rc-avatar rc-left" width="32" height="32" alt="" src="./JVM 优化经验总结 - ImportNew_files/cb962c0fddc4ba5282bbf2996f3ee0d2.png">
				<div class="rc-info">
				Re:
				<a class="rc-post" target="_blank" href="http://www.importnew.com/25023.html#comment-561042" rel="nofollow">图解集合 2 ：LinkedList</a>
				</div>
				<div class="rc-timestamp"></div>
				<div class="rc-excerpt">
				没有特指								<span class="rc-reviewer"> 唐尤华</span>
								</div>
			</li>
			
						
			<li id="rc-comment-560954" class="rc-item rc-comment rc-clearfix">
				<img class="rc-avatar rc-left" width="32" height="32" alt="" src="./JVM 优化经验总结 - ImportNew_files/cb962c0fddc4ba5282bbf2996f3ee0d2.png">
				<div class="rc-info">
				Re:
				<a class="rc-post" target="_blank" href="http://www.importnew.com/25023.html#comment-560954" rel="nofollow">图解集合 2 ：LinkedList</a>
				</div>
				<div class="rc-timestamp"></div>
				<div class="rc-excerpt">
				这个系列是java哪个版本的？								<span class="rc-reviewer"> loong</span>
								</div>
			</li>
			
						
			<li id="rc-comment-560796" class="rc-item rc-comment rc-clearfix">
				<img class="rc-avatar rc-left" width="32" height="32" alt="" src="./JVM 优化经验总结 - ImportNew_files/cb962c0fddc4ba5282bbf2996f3ee0d2.png">
				<div class="rc-info">
				Re:
				<a class="rc-post" target="_blank" href="http://www.importnew.com/25008.html#comment-560796" rel="nofollow">图解集合 1 ：ArrayList</a>
				</div>
				<div class="rc-timestamp"></div>
				<div class="rc-excerpt">
				作者应该声明 JDK版本呀。 每个差别很大的 这个扩容方案								<span class="rc-reviewer"> 冷冷</span>
								</div>
			</li>
			
					
		</ul>
        </div><div id="text-19" class="widget widget_text">			<div class="textwidget"><p><a href="http://fanyi.jobbole.com/" target="_blank" class="external" rel="nofollow"><img src="./JVM 优化经验总结 - ImportNew_files/bfdcef89gw1esnyzyrczej208c03cgm3.jpg"></a></p>
</div>
		</div>	
	<!-- BEGIN .container -->
	<div class="container">
	
		<!-- BEGIN .grid-2 -->
		<div class="grid-2">
			
						
		</div>
		<!-- END .grid-2 -->
		
		<!-- BEGIN .grid-2 -->
		<div class="grid-2">
			
						
		</div>
		<!-- END .grid-2 -->
		
		<div class="clear"></div>
			
	</div>
	<!-- END .container -->

</div>
<!-- END #sidebar -->
<div class="clear"></div>	


</div>
<!-- END #wrapper -->

<!-- BEGIN footer -->
<footer>

	<!-- BEGIN .container -->
	<div class="container">
		
		<!-- BEGIN .grid-4 -->
		<div class="grid-4">
			
			<div id="text-15" class="widget widget_text"><h3 class="widget-title">关于ImportNew</h3>			<div class="textwidget"><p>ImportNew 专注于 Java 技术分享。于2012年11月11日 11:11正式上线。是的，这是一个很特别的时刻 :) </p>
<p>ImportNew 由两个 Java 关键字 import 和 new 组成，意指：Java 开发者学习新知识的网站。 import 可认为是学习和吸收， new 则可认为是新知识、新技术圈子和新朋友……</p>
<div id="aw_socialcounter_widget-2" class="widget aw_socialcounter_widget">
<ul>
<li>
<a target="_blank" href="http://weibo.com/importnew" class="external" rel="nofollow"><img class="alignleft" src="./JVM 优化经验总结 - ImportNew_files/sina_32.png" alt="关注我们的新浪微博" title="关注我们的新浪微博"></a><p></p>
<div class="view-rss"><a target="_blank" href="http://www.importnew.com/feed/" class="rss-link"><img class="alignleft" src="./JVM 优化经验总结 - ImportNew_files/rss_32.png" alt="RSS订阅" title="RSS订阅"></a></div>
</li>
</ul>
</div>
</div>
		</div>			
		</div>
		<!-- END .grid-4 -->
		
		<!-- BEGIN .grid-4 -->
		<div class="grid-4">
			
			<div id="text-17" class="widget widget_text"><h3 class="widget-title">联系我们</h3>			<div class="textwidget"><p>Email：<a href="mailto:ImportNew.com@gmail.com">ImportNew.com@gmail.com</a><br>
新浪微博：<a href="http://weibo.com/importnew" target="_blank" class="external" rel="nofollow">@ImportNew</a><br>
推荐微信号<br>
<img src="./JVM 优化经验总结 - ImportNew_files/ImportNew_weixin.png" width="100" height="110"><img src="./JVM 优化经验总结 - ImportNew_files/android_weixin.png" width="100" height="110"><img src="./JVM 优化经验总结 - ImportNew_files/Linux_weixin.png" width="100" height="110"></p>
<p>反馈建议：ImportNew.com@gmail.com<br>
广告与商务合作QQ：2302462408 </p>
</div>
		</div>			
		</div>
		<!-- END .grid-4 -->
		
		<!-- BEGIN .grid-4 -->
		<div class="grid-4">
			
			<div id="text-16" class="widget widget_text"><h3 class="widget-title">推荐关注</h3>			<div class="textwidget"><p><a href="http://group.jobbole.com/?utm_source=www.importnew.com&amp;utm_medium=bottomText" target="_blank" class="external" rel="nofollow">小组</a> – 好的话题、有启发的回复、值得信赖的圈子<br>
<a href="http://top.jobbole.com/?utm_source=www.importnew.com&amp;utm_medium=bottomText" target="_blank" class="external" rel="nofollow">头条</a> – 写了文章？看干货？去头条！<br>
<a href="http://date.jobbole.com/?utm_source=www.importnew.com&amp;utm_medium=bottomText" target="_blank" class="external" rel="nofollow">相亲</a> – 为IT单身男女服务的征婚传播平台<br>
<a href="http://hao.jobbole.com/?utm_source=www.importnew.com&amp;utm_medium=bottomText" target="_blank" class="external" rel="nofollow">资源</a> – 优秀的工具资源导航<br>
<a href="http://fanyi.jobbole.com/?utm_source=www.importnew.com&amp;utm_medium=bottomText" target="_blank" class="external" rel="nofollow">翻译</a> – 活跃 &amp; 专业的翻译小组<br>
<a href="http://blog.jobbole.com/?utm_source=www.importnew.com&amp;utm_medium=bottomText" target="_blank" class="external" rel="nofollow">博客</a> – 国内外的精选博客文章<br>
<a href="http://design.jobbole.com/?utm_source=www.importnew.com&amp;utm_medium=bottomText" target="_blank" class="external" rel="nofollow">设计</a> – UI,网页，交互和用户体验<br>
<a href="http://web.jobbole.com/?utm_source=www.importnew.com&amp;utm_medium=bottomText" target="_blank" class="external" rel="nofollow">前端</a> – JavaScript, HTML5, CSS<br>
<a href="http://android.jobbole.com/?utm_source=www.importnew.com&amp;utm_medium=bottomText" target="_blank" class="external" rel="nofollow">安卓</a> – 专注Android技术分享<br>
<a href="http://ios.jobbole.com/?utm_source=www.importnew.com&amp;utm_medium=bottomText" target="_blank" class="external" rel="nofollow">iOS</a> – 专注iOS技术分享<br>
<a href="http://www.importnew.com/?utm_source=www.importnew.com&amp;utm_medium=bottomText" target="_blank">Java</a> – 专注Java技术分享<br>
<a href="http://python.jobbole.com/?utm_source=www.importnew.com&amp;utm_medium=bottomText" target="_blank" class="external" rel="nofollow">Python</a> – 专注Python技术分享</p>
</div>
		</div>			
		</div>
		<!-- END .grid-4 -->
		
		<div class="clear"></div>
	
	</div>
	<!-- END .container -->

	<!-- BEGIN #bottom -->
	<div id="bottom">
	
		<!-- BEGIN .container -->
		<div class="container">
		
			<!-- BEGIN .grid-12 -->
			<div class="grid-12">
	
				<p>© 2017 ImportNew</p>
			
			</div>
			<!-- END .grid-12 -->
			
			<div class="clear"></div>
						
		</div>
		<!-- END .container -->
		
	</div>
	<!-- END #bottom -->
	
</footer>
<!-- END footer -->


	
<!-- Lightbox Plus v2.3 - 2011.08.11 - Message: 0-->
<script type="text/javascript">
jQuery(document).ready(function($){
  $("a[rel*=lightbox]").colorbox({opacity:0.8});
});
</script>

<!-- WP SyntaxHighlighter Ver.1.7.3 Begin -->
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shCore.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shLegacy.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shAutoloader.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushAppleScript.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushAS3.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushBash.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushColdFusion.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushCpp.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushCSharp.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushCss.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushDelphi.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushDiff.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushErlang.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushGroovy.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushJava.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushJavaFX.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushJScript.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushPerl.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushPhp.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushPlain.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushPowerShell.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushPython.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushRuby.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushSass.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushScala.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushSql.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushVb.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/shBrushXml.js.下载"></script>
<script type="text/javascript">//<![CDATA[
	SyntaxHighlighter.autoloader(
	"applescript	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushAppleScript.js?ver=3.0"
	,"as3 actionscript3	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushAS3.js?ver=3.0"
	,"bash shell	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushBash.js?ver=3.0"
	,"cf coldfusion	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushColdFusion.js?ver=3.0"
	,"cpp c	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCpp.js?ver=3.0"
	,"c# c-sharp csharp	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0"
	,"css	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCss.js?ver=3.0"
	,"delphi pas pascal	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushDelphi.js?ver=3.0"
	,"diff patch	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushDiff.js?ver=3.0"
	,"erl erlang	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushErlang.js?ver=3.0"
	,"groovy	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushGroovy.js?ver=3.0"
	,"java	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJava.js?ver=3.0"
	,"jfx javafx	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJavaFX.js?ver=3.0"
	,"js jscript javascript	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0"
	,"perl pl	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPerl.js?ver=3.0"
	,"php	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPhp.js?ver=3.0"
	,"plain text	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPlain.js?ver=3.0"
	,"ps powershell	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPowerShell.js?ver=3.0"
	,"py python	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0"
	,"rails ror ruby rb	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0"
	,"sass scss	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushSass.js?ver=3.0"
	,"scala	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushScala.js?ver=3.0"
	,"sql	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushSql.js?ver=3.0"
	,"vb vbnet	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushVb.js?ver=3.0"
	,"xml xhtml xslt html	http://www.importnew.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0"
	);
	SyntaxHighlighter.defaults['auto-links'] = false;
	SyntaxHighlighter.defaults['quick-code'] = true;
	SyntaxHighlighter.defaults['title'] = '';
	SyntaxHighlighter.defaults['class-name'] = 'notranslate';
	SyntaxHighlighter.defaults['collapse'] = false;
	SyntaxHighlighter.defaults['first-line'] = 1;
	SyntaxHighlighter.defaults['gutter'] = true;
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['smart-tabs'] = true;
	SyntaxHighlighter.defaults['tab-size'] = 4;
	SyntaxHighlighter.defaults['toolbar'] = false;
 SyntaxHighlighter.config.stripBrs = true;
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = "Can't find brush for: ";
	SyntaxHighlighter.config.strings.brushNotHtmlScript = "Brush wasn't configured for html-script option: ";
	SyntaxHighlighter.all();
	dp.SyntaxHighlighter.HighlightAll('code')
//]]></script>
<!-- WP SyntaxHighlighter Ver.1.7.3 End -->
<link rel="stylesheet" id="wp_rp_scrollup-css" href="http://dtmvdvtzf8rz0.cloudfront.net/static/css-img/scrollup.css?ver=3.4.2" type="text/css" media="all">
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/ck-karma.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/jquery.colorbox-min.js.下载"></script>
<script type="text/javascript">
/* <![CDATA[ */
var viewsCacheL10n = {"admin_ajax_url":"http:\/\/www.importnew.com\/wp-admin\/admin-ajax.php","post_id":"16327"};
/* ]]> */
</script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/postviews-cache.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/ready.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/easing.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/superfish.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/validate.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/touchwipe.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/caroufredsel.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/flexslider.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/jplayer.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/fitvids.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/selectnav.js.下载"></script>
<script type="text/javascript" src="./JVM 优化经验总结 - ImportNew_files/effects.js.下载"></script>
<script type="text/javascript" src="http://dtmvdvtzf8rz0.cloudfront.net/static/js/scrollup.js?ver=3.4.2"></script>


<div id="full-btm" style="position:fixed; left:50%; top:550px;  z-index:100; text-align:center; cursor:pointer;">
<a><img src="./JVM 优化经验总结 - ImportNew_files/back-btm.png" width="20" border="0" alt="跳到底部" title="跳到底部"></a>
</div>

<script type="text/javascript">
jQuery('#full-btm').click(function(){
    jQuery('html, body').animate({scrollTop:jQuery(document).height()}, 'slow');
    return false;
});
</script>

<div id="full-top" style="position:fixed; left:50%; top:520px; margin-left:495px; z-index:100; text-align:center; cursor:pointer;">
<a><img src="./JVM 优化经验总结 - ImportNew_files/back-top.png" width="20" border="0" alt="返回顶部" title="返回顶部"></a>
</div>

<script type="text/javascript">
jQuery('#full-top').click(function(){
    jQuery('html, body').animate({scrollTop:0}, 'slow');
    return false;
});
</script>

<!-- script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','/_assets/js/analytics.js','ga');

    ga('create', 'UA-15621043-1', 'jobbole.com');
    ga('send', 'pageview');

</script -->


<!-- END body -->


<!-- END html -->
<!-- Performance optimized by W3 Total Cache. Learn more: http://www.w3-edge.com/wordpress-plugins/

 Served from: importnew.com @ 2017-06-24 14:38:48 by W3 Total Cache --><div id="cboxOverlay" style="display: none;"></div><div id="colorbox" class="" style="padding-bottom: 50px; padding-right: 50px; display: none;"><div id="cboxWrapper"><div><div id="cboxTopLeft" style="float: left;"></div><div id="cboxTopCenter" style="float: left;"></div><div id="cboxTopRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxMiddleLeft" style="float: left;"></div><div id="cboxContent" style="float: left;"><div id="cboxLoadedContent" style="width: 0px; height: 0px; overflow: hidden; float: left;"></div><div id="cboxLoadingOverlay" style="float: left;"></div><div id="cboxLoadingGraphic" style="float: left;"></div><div id="cboxTitle" style="float: left;"></div><div id="cboxCurrent" style="float: left;"></div><div id="cboxNext" style="float: left;"></div><div id="cboxPrevious" style="float: left;"></div><div id="cboxSlideshow" style="float: left;"></div><div id="cboxClose" style="float: left;"></div></div><div id="cboxMiddleRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxBottomLeft" style="float: left;"></div><div id="cboxBottomCenter" style="float: left;"></div><div id="cboxBottomRight" style="float: left;"></div></div></div><div style="position: absolute; width: 9999px; visibility: hidden; display: none;"></div></div></body></html>